import axios from 'axios';
import { RadixSerializer } from '../atommodel';
import { RadixNode } from '../..';
/**
 * Radix node discovery from a fixed list
 */
export default class RadixNodeDiscoveryHardcoded {
    /**
     * Creates an instance of radix node discovery from seed.
     * @param bootstrapNode Full address to the rpc endpoint of a Radix node in the universe
     */
    constructor(bootstrapNodes) {
        this.bootstrapNodes = bootstrapNodes;
    }
    async loadNodes() {
        return Promise.all(this.bootstrapNodes.map(async (address) => {
            try {
                const response = await axios.get(`http://${address}/api/system`);
                const nodeInfo = RadixSerializer.fromJSON(response.data);
                const node = new RadixNode(nodeInfo, `ws://${address}/rpc`, `http://${address}/rpc`);
                return node;
            }
            catch (error) {
                throw error;
            }
        }));
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiUmFkaXhOb2RlRGlzY292ZXJ5SGFyZGNvZGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vc3JjL21vZHVsZXMvdW5pdmVyc2UvUmFkaXhOb2RlRGlzY292ZXJ5SGFyZGNvZGVkLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sS0FBSyxNQUFNLE9BQU8sQ0FBQTtBQUl6QixPQUFPLEVBQUUsZUFBZSxFQUFFLE1BQU0sY0FBYyxDQUFBO0FBQzlDLE9BQU8sRUFBRSxTQUFTLEVBQW1CLE1BQU0sT0FBTyxDQUFBO0FBRWxEOztHQUVHO0FBQ0gsTUFBTSxDQUFDLE9BQU8sT0FBTywyQkFBMkI7SUFFNUM7OztPQUdHO0lBQ0gsWUFDYSxjQUF3QjtRQUF4QixtQkFBYyxHQUFkLGNBQWMsQ0FBVTtJQUM5QixDQUFDO0lBRUQsS0FBSyxDQUFDLFNBQVM7UUFDbEIsT0FBTyxPQUFPLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxjQUFjLENBQUMsR0FBRyxDQUFDLEtBQUssRUFBRSxPQUFPLEVBQUUsRUFBRTtZQUN6RCxJQUFJO2dCQUNBLE1BQU0sUUFBUSxHQUFHLE1BQU0sS0FBSyxDQUFDLEdBQUcsQ0FBQyxVQUFVLE9BQU8sYUFBYSxDQUFDLENBQUE7Z0JBQ2hFLE1BQU0sUUFBUSxHQUFvQixlQUFlLENBQUMsUUFBUSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsQ0FBQTtnQkFDekUsTUFBTSxJQUFJLEdBQUcsSUFBSSxTQUFTLENBQUMsUUFBUSxFQUFFLFFBQVEsT0FBTyxNQUFNLEVBQUUsVUFBVSxPQUFPLE1BQU0sQ0FBQyxDQUFBO2dCQUNwRixPQUFPLElBQUksQ0FBQTthQUNkO1lBQUMsT0FBTyxLQUFLLEVBQUU7Z0JBQ1osTUFBTSxLQUFLLENBQUE7YUFDZDtRQUNMLENBQUMsQ0FBQyxDQUFDLENBQUE7SUFDUCxDQUFDO0NBQ0oifQ==