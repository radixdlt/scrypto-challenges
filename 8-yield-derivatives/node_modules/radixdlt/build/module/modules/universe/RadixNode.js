import Long from 'long';
export default class RadixNode {
    constructor(nodeInfo, wsAddress, httpAddress) {
        this.nodeInfo = nodeInfo;
        this.wsAddress = wsAddress;
        this.httpAddress = httpAddress;
    }
    canServiceShard(shard) {
        const remainder = shard.mod(RadixNode.SHARD_CHUNK_HALF_RANGE);
        if (this.nodeInfo) {
            const low = Long.fromValue(this.nodeInfo.shards.range.low);
            const high = Long.fromValue(this.nodeInfo.shards.range.high);
            if (high.lessThan(low)) {
                // Wrap around
                return (remainder.greaterThanOrEqual(low) || remainder.lessThanOrEqual(high));
            }
            else {
                return (remainder.greaterThanOrEqual(low) && remainder.lessThanOrEqual(high));
            }
        }
        return false;
    }
}
RadixNode.SHARD_CHUNK_HALF_RANGE = Long.fromValue(1).shl(43);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiUmFkaXhOb2RlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vc3JjL21vZHVsZXMvdW5pdmVyc2UvUmFkaXhOb2RlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUNBLE9BQU8sSUFBSSxNQUFNLE1BQU0sQ0FBQztBQUV4QixNQUFNLENBQUMsT0FBTyxPQUFPLFNBQVM7SUFHMUIsWUFBcUIsUUFBeUIsRUFBVyxTQUFpQixFQUFXLFdBQW1CO1FBQW5GLGFBQVEsR0FBUixRQUFRLENBQWlCO1FBQVcsY0FBUyxHQUFULFNBQVMsQ0FBUTtRQUFXLGdCQUFXLEdBQVgsV0FBVyxDQUFRO0lBQUcsQ0FBQztJQUVyRyxlQUFlLENBQUMsS0FBVztRQUM5QixNQUFNLFNBQVMsR0FBRyxLQUFLLENBQUMsR0FBRyxDQUFDLFNBQVMsQ0FBQyxzQkFBc0IsQ0FBQyxDQUFBO1FBRTdELElBQUksSUFBSSxDQUFDLFFBQVEsRUFBRTtZQUNmLE1BQU0sR0FBRyxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFBO1lBQzFELE1BQU0sSUFBSSxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFBO1lBRTVELElBQUksSUFBSSxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsRUFBRTtnQkFDcEIsY0FBYztnQkFDZCxPQUFPLENBQ0gsU0FBUyxDQUFDLGtCQUFrQixDQUFDLEdBQUcsQ0FBQyxJQUFJLFNBQVMsQ0FBQyxlQUFlLENBQUMsSUFBSSxDQUFDLENBQ3ZFLENBQUE7YUFDSjtpQkFBTTtnQkFDSCxPQUFPLENBQ0gsU0FBUyxDQUFDLGtCQUFrQixDQUFDLEdBQUcsQ0FBQyxJQUFJLFNBQVMsQ0FBQyxlQUFlLENBQUMsSUFBSSxDQUFDLENBQ3ZFLENBQUE7YUFDSjtTQUNKO1FBRUQsT0FBTyxLQUFLLENBQUE7SUFDaEIsQ0FBQzs7QUF4QmEsZ0NBQXNCLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLENBQUEifQ==