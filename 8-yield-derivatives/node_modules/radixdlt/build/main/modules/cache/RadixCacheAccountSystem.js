"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = require("tslib");
var RadixCacheAccountSystem = /** @class */ (function () {
    function RadixCacheAccountSystem(address, atomCache) {
        this.address = address;
        this.name = 'CACHE';
        if (atomCache) {
            this.atomCache = atomCache;
        }
    }
    RadixCacheAccountSystem.prototype.processAtomUpdate = function (atomUpdate) {
        return tslib_1.__awaiter(this, void 0, void 0, function () {
            return tslib_1.__generator(this, function (_a) {
                if (!this.atomCache) {
                    return [2 /*return*/];
                }
                // Just put it in the cache
                if (atomUpdate.action === 'STORE') {
                    this.atomCache.storeAtom(atomUpdate.atom);
                }
                else if (atomUpdate.action === 'DELETE') {
                    this.atomCache.deleteAtom(atomUpdate.atom);
                }
                return [2 /*return*/];
            });
        });
    };
    RadixCacheAccountSystem.prototype.loadAtoms = function () {
        return tslib_1.__awaiter(this, void 0, void 0, function () {
            return tslib_1.__generator(this, function (_a) {
                return [2 /*return*/, this.atomCache.getAtoms(this.address)];
            });
        });
    };
    return RadixCacheAccountSystem;
}());
exports.default = RadixCacheAccountSystem;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiUmFkaXhDYWNoZUFjY291bnRTeXN0ZW0uanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9zcmMvbW9kdWxlcy9jYWNoZS9SYWRpeENhY2hlQWNjb3VudFN5c3RlbS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUFLQTtJQUlJLGlDQUFxQixPQUFxQixFQUFFLFNBQWtDO1FBQXpELFlBQU8sR0FBUCxPQUFPLENBQWM7UUFIbkMsU0FBSSxHQUFHLE9BQU8sQ0FBQTtRQUlqQixJQUFJLFNBQVMsRUFBRTtZQUNYLElBQUksQ0FBQyxTQUFTLEdBQUcsU0FBUyxDQUFBO1NBQzdCO0lBQ0wsQ0FBQztJQUVZLG1EQUFpQixHQUE5QixVQUErQixVQUEyQjs7O2dCQUN0RCxJQUFJLENBQUMsSUFBSSxDQUFDLFNBQVMsRUFBRTtvQkFDakIsc0JBQU07aUJBQ1Q7Z0JBRUQsMkJBQTJCO2dCQUMzQixJQUFJLFVBQVUsQ0FBQyxNQUFNLEtBQUssT0FBTyxFQUFFO29CQUMvQixJQUFJLENBQUMsU0FBUyxDQUFDLFNBQVMsQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLENBQUE7aUJBQzVDO3FCQUFNLElBQUksVUFBVSxDQUFDLE1BQU0sS0FBSyxRQUFRLEVBQUU7b0JBQ3ZDLElBQUksQ0FBQyxTQUFTLENBQUMsVUFBVSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsQ0FBQTtpQkFDN0M7Ozs7S0FDSjtJQUVZLDJDQUFTLEdBQXRCOzs7Z0JBQ0ksc0JBQU8sSUFBSSxDQUFDLFNBQVMsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxFQUFBOzs7S0FDL0M7SUFDTCw4QkFBQztBQUFELENBQUMsQUExQkQsSUEwQkMifQ==