"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = require("tslib");
var long_1 = tslib_1.__importDefault(require("long"));
var RadixNode = /** @class */ (function () {
    function RadixNode(nodeInfo, wsAddress, httpAddress) {
        this.nodeInfo = nodeInfo;
        this.wsAddress = wsAddress;
        this.httpAddress = httpAddress;
    }
    RadixNode.prototype.canServiceShard = function (shard) {
        var remainder = shard.mod(RadixNode.SHARD_CHUNK_HALF_RANGE);
        if (this.nodeInfo) {
            var low = long_1.default.fromValue(this.nodeInfo.shards.range.low);
            var high = long_1.default.fromValue(this.nodeInfo.shards.range.high);
            if (high.lessThan(low)) {
                // Wrap around
                return (remainder.greaterThanOrEqual(low) || remainder.lessThanOrEqual(high));
            }
            else {
                return (remainder.greaterThanOrEqual(low) && remainder.lessThanOrEqual(high));
            }
        }
        return false;
    };
    RadixNode.SHARD_CHUNK_HALF_RANGE = long_1.default.fromValue(1).shl(43);
    return RadixNode;
}());
exports.default = RadixNode;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiUmFkaXhOb2RlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vc3JjL21vZHVsZXMvdW5pdmVyc2UvUmFkaXhOb2RlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7OztBQUNBLHNEQUF3QjtBQUV4QjtJQUdJLG1CQUFxQixRQUF5QixFQUFXLFNBQWlCLEVBQVcsV0FBbUI7UUFBbkYsYUFBUSxHQUFSLFFBQVEsQ0FBaUI7UUFBVyxjQUFTLEdBQVQsU0FBUyxDQUFRO1FBQVcsZ0JBQVcsR0FBWCxXQUFXLENBQVE7SUFBRyxDQUFDO0lBRXJHLG1DQUFlLEdBQXRCLFVBQXVCLEtBQVc7UUFDOUIsSUFBTSxTQUFTLEdBQUcsS0FBSyxDQUFDLEdBQUcsQ0FBQyxTQUFTLENBQUMsc0JBQXNCLENBQUMsQ0FBQTtRQUU3RCxJQUFJLElBQUksQ0FBQyxRQUFRLEVBQUU7WUFDZixJQUFNLEdBQUcsR0FBRyxjQUFJLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQTtZQUMxRCxJQUFNLElBQUksR0FBRyxjQUFJLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQTtZQUU1RCxJQUFJLElBQUksQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUFDLEVBQUU7Z0JBQ3BCLGNBQWM7Z0JBQ2QsT0FBTyxDQUNILFNBQVMsQ0FBQyxrQkFBa0IsQ0FBQyxHQUFHLENBQUMsSUFBSSxTQUFTLENBQUMsZUFBZSxDQUFDLElBQUksQ0FBQyxDQUN2RSxDQUFBO2FBQ0o7aUJBQU07Z0JBQ0gsT0FBTyxDQUNILFNBQVMsQ0FBQyxrQkFBa0IsQ0FBQyxHQUFHLENBQUMsSUFBSSxTQUFTLENBQUMsZUFBZSxDQUFDLElBQUksQ0FBQyxDQUN2RSxDQUFBO2FBQ0o7U0FDSjtRQUVELE9BQU8sS0FBSyxDQUFBO0lBQ2hCLENBQUM7SUF4QmEsZ0NBQXNCLEdBQUcsY0FBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLENBQUE7SUF5QnBFLGdCQUFDO0NBQUEsQUExQkQsSUEwQkM7a0JBMUJvQixTQUFTIn0=