{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar tslib_1 = require(\"tslib\");\nvar RadixPOW_1 = tslib_1.__importDefault(require(\"./RadixPOW\"));\nvar RadixPOWTask = /** @class */function () {\n  function RadixPOWTask(magic, seed, target) {\n    this.magic = magic;\n    this.seed = seed;\n    this.target = target;\n    this.pow = new RadixPOW_1.default(magic, seed);\n  }\n  RadixPOWTask.prototype.computePow = function () {\n    var _this = this;\n    return new Promise(function (resolve, reject) {\n      _this.attemptPow(resolve);\n    });\n  };\n  RadixPOWTask.prototype.attemptPow = function (callback) {\n    var _this = this;\n    for (var i = 0; i < 1000; i++) {\n      this.pow.incrementNonce();\n      var hash = this.pow.getHash();\n      if (this.meetsTarget(hash)) {\n        setTimeout(function () {\n          callback(_this.pow);\n        });\n        return;\n      }\n    }\n    // Non-blocking\n    setTimeout(function () {\n      _this.attemptPow(callback);\n    }, 0);\n  };\n  RadixPOWTask.prototype.meetsTarget = function (hash) {\n    return hash.compare(this.target) < 0;\n  };\n  return RadixPOWTask;\n}();\nexports.default = RadixPOWTask;","map":{"version":3,"names":["RadixPOW_1","tslib_1","__importDefault","require","RadixPOWTask","magic","seed","target","pow","default","prototype","computePow","_this","Promise","resolve","reject","attemptPow","callback","i","incrementNonce","hash","getHash","meetsTarget","setTimeout","compare"],"sources":["../../../../src/modules/pow/RadixPOWTask.ts"],"sourcesContent":[null],"mappings":";;;;;;AAAA,IAAAA,UAAA,GAAAC,OAAA,CAAAC,eAAA,CAAAC,OAAA;AAIA,IAAAC,YAAA;EAGI,SAAAA,aACaC,KAAa,EACbC,IAAY,EACZC,MAAc;IAFd,KAAAF,KAAK,GAALA,KAAK;IACL,KAAAC,IAAI,GAAJA,IAAI;IACJ,KAAAC,MAAM,GAANA,MAAM;IAEf,IAAI,CAACC,GAAG,GAAG,IAAIR,UAAA,CAAAS,OAAQ,CAACJ,KAAK,EAAEC,IAAI,CAAC;EACxC;EAEOF,YAAA,CAAAM,SAAA,CAAAC,UAAU,GAAjB;IAAA,IAAAC,KAAA;IACI,OAAO,IAAIC,OAAO,CAAW,UAACC,OAAO,EAAEC,MAAM;MACzCH,KAAI,CAACI,UAAU,CAACF,OAAO,CAAC;IAC5B,CAAC,CAAC;EACN,CAAC;EAIMV,YAAA,CAAAM,SAAA,CAAAM,UAAU,GAAjB,UAAkBC,QAAiC;IAAnD,IAAAL,KAAA;IACI,KAAK,IAAIM,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG,IAAI,EAAEA,CAAC,EAAE,EAAE;MAC3B,IAAI,CAACV,GAAG,CAACW,cAAc,EAAE;MACzB,IAAMC,IAAI,GAAG,IAAI,CAACZ,GAAG,CAACa,OAAO,EAAE;MAE/B,IAAI,IAAI,CAACC,WAAW,CAACF,IAAI,CAAC,EAAE;QACxBG,UAAU,CAAC;UACPN,QAAQ,CAACL,KAAI,CAACJ,GAAG,CAAC;QACtB,CAAC,CAAC;QAEF;;;IAIR;IACAe,UAAU,CAAC;MACPX,KAAI,CAACI,UAAU,CAACC,QAAQ,CAAC;IAC7B,CAAC,EAAE,CAAC,CAAC;EACT,CAAC;EAEMb,YAAA,CAAAM,SAAA,CAAAY,WAAW,GAAlB,UAAmBF,IAAY;IAC3B,OAAOA,IAAI,CAACI,OAAO,CAAC,IAAI,CAACjB,MAAM,CAAC,GAAG,CAAC;EACxC,CAAC;EACL,OAAAH,YAAC;AAAD,CAAC,CA1CD","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}