{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar tslib_1 = require(\"tslib\");\nvar long_1 = tslib_1.__importDefault(require(\"long\"));\nvar RadixNode = /** @class */function () {\n  function RadixNode(nodeInfo, wsAddress, httpAddress) {\n    this.nodeInfo = nodeInfo;\n    this.wsAddress = wsAddress;\n    this.httpAddress = httpAddress;\n  }\n  RadixNode.prototype.canServiceShard = function (shard) {\n    var remainder = shard.mod(RadixNode.SHARD_CHUNK_HALF_RANGE);\n    if (this.nodeInfo) {\n      var low = long_1.default.fromValue(this.nodeInfo.shards.range.low);\n      var high = long_1.default.fromValue(this.nodeInfo.shards.range.high);\n      if (high.lessThan(low)) {\n        // Wrap around\n        return remainder.greaterThanOrEqual(low) || remainder.lessThanOrEqual(high);\n      } else {\n        return remainder.greaterThanOrEqual(low) && remainder.lessThanOrEqual(high);\n      }\n    }\n    return false;\n  };\n  RadixNode.SHARD_CHUNK_HALF_RANGE = long_1.default.fromValue(1).shl(43);\n  return RadixNode;\n}();\nexports.default = RadixNode;","map":{"version":3,"names":["long_1","tslib_1","__importDefault","require","RadixNode","nodeInfo","wsAddress","httpAddress","prototype","canServiceShard","shard","remainder","mod","SHARD_CHUNK_HALF_RANGE","low","default","fromValue","shards","range","high","lessThan","greaterThanOrEqual","lessThanOrEqual","shl"],"sources":["../../../../src/modules/universe/RadixNode.ts"],"sourcesContent":[null],"mappings":";;;;;;AACA,IAAAA,MAAA,GAAAC,OAAA,CAAAC,eAAA,CAAAC,OAAA;AAEA,IAAAC,SAAA;EAGI,SAAAA,UAAqBC,QAAyB,EAAWC,SAAiB,EAAWC,WAAmB;IAAnF,KAAAF,QAAQ,GAARA,QAAQ;IAA4B,KAAAC,SAAS,GAATA,SAAS;IAAmB,KAAAC,WAAW,GAAXA,WAAW;EAAW;EAEpGH,SAAA,CAAAI,SAAA,CAAAC,eAAe,GAAtB,UAAuBC,KAAW;IAC9B,IAAMC,SAAS,GAAGD,KAAK,CAACE,GAAG,CAACR,SAAS,CAACS,sBAAsB,CAAC;IAE7D,IAAI,IAAI,CAACR,QAAQ,EAAE;MACf,IAAMS,GAAG,GAAGd,MAAA,CAAAe,OAAI,CAACC,SAAS,CAAC,IAAI,CAACX,QAAQ,CAACY,MAAM,CAACC,KAAK,CAACJ,GAAG,CAAC;MAC1D,IAAMK,IAAI,GAAGnB,MAAA,CAAAe,OAAI,CAACC,SAAS,CAAC,IAAI,CAACX,QAAQ,CAACY,MAAM,CAACC,KAAK,CAACC,IAAI,CAAC;MAE5D,IAAIA,IAAI,CAACC,QAAQ,CAACN,GAAG,CAAC,EAAE;QACpB;QACA,OACIH,SAAS,CAACU,kBAAkB,CAACP,GAAG,CAAC,IAAIH,SAAS,CAACW,eAAe,CAACH,IAAI,CAAC;OAE3E,MAAM;QACH,OACIR,SAAS,CAACU,kBAAkB,CAACP,GAAG,CAAC,IAAIH,SAAS,CAACW,eAAe,CAACH,IAAI,CAAC;;;IAKhF,OAAO,KAAK;EAChB,CAAC;EAxBaf,SAAA,CAAAS,sBAAsB,GAAGb,MAAA,CAAAe,OAAI,CAACC,SAAS,CAAC,CAAC,CAAC,CAACO,GAAG,CAAC,EAAE,CAAC;EAyBpE,OAAAnB,SAAC;CAAA,CA1BD;kBAAqBA,SAAS","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}