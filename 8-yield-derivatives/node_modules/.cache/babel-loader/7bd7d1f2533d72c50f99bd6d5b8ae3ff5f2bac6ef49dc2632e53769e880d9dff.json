{"ast":null,"code":"'use strict';\n\nvar utils = require('../utils');\nvar BN = require('bn.js');\nvar inherits = require('inherits');\nvar Base = require('./base');\nvar assert = utils.assert;\nfunction EdwardsCurve(conf) {\n  // NOTE: Important as we are creating point in Base.call()\n  this.twisted = (conf.a | 0) !== 1;\n  this.mOneA = this.twisted && (conf.a | 0) === -1;\n  this.extended = this.mOneA;\n  Base.call(this, 'edwards', conf);\n  this.a = new BN(conf.a, 16).umod(this.red.m);\n  this.a = this.a.toRed(this.red);\n  this.c = new BN(conf.c, 16).toRed(this.red);\n  this.c2 = this.c.redSqr();\n  this.d = new BN(conf.d, 16).toRed(this.red);\n  this.dd = this.d.redAdd(this.d);\n  assert(!this.twisted || this.c.fromRed().cmpn(1) === 0);\n  this.oneC = (conf.c | 0) === 1;\n}\ninherits(EdwardsCurve, Base);\nmodule.exports = EdwardsCurve;\nEdwardsCurve.prototype._mulA = function _mulA(num) {\n  if (this.mOneA) return num.redNeg();else return this.a.redMul(num);\n};\nEdwardsCurve.prototype._mulC = function _mulC(num) {\n  if (this.oneC) return num;else return this.c.redMul(num);\n};\n\n// Just for compatibility with Short curve\nEdwardsCurve.prototype.jpoint = function jpoint(x, y, z, t) {\n  return this.point(x, y, z, t);\n};\nEdwardsCurve.prototype.pointFromX = function pointFromX(x, odd) {\n  x = new BN(x, 16);\n  if (!x.red) x = x.toRed(this.red);\n  var x2 = x.redSqr();\n  var rhs = this.c2.redSub(this.a.redMul(x2));\n  var lhs = this.one.redSub(this.c2.redMul(this.d).redMul(x2));\n  var y2 = rhs.redMul(lhs.redInvm());\n  var y = y2.redSqrt();\n  if (y.redSqr().redSub(y2).cmp(this.zero) !== 0) throw new Error('invalid point');\n  var isOdd = y.fromRed().isOdd();\n  if (odd && !isOdd || !odd && isOdd) y = y.redNeg();\n  return this.point(x, y);\n};\nEdwardsCurve.prototype.pointFromY = function pointFromY(y, odd) {\n  y = new BN(y, 16);\n  if (!y.red) y = y.toRed(this.red);\n\n  // x^2 = (y^2 - c^2) / (c^2 d y^2 - a)\n  var y2 = y.redSqr();\n  var lhs = y2.redSub(this.c2);\n  var rhs = y2.redMul(this.d).redMul(this.c2).redSub(this.a);\n  var x2 = lhs.redMul(rhs.redInvm());\n  if (x2.cmp(this.zero) === 0) {\n    if (odd) throw new Error('invalid point');else return this.point(this.zero, y);\n  }\n  var x = x2.redSqrt();\n  if (x.redSqr().redSub(x2).cmp(this.zero) !== 0) throw new Error('invalid point');\n  if (x.fromRed().isOdd() !== odd) x = x.redNeg();\n  return this.point(x, y);\n};\nEdwardsCurve.prototype.validate = function validate(point) {\n  if (point.isInfinity()) return true;\n\n  // Curve: A * X^2 + Y^2 = C^2 * (1 + D * X^2 * Y^2)\n  point.normalize();\n  var x2 = point.x.redSqr();\n  var y2 = point.y.redSqr();\n  var lhs = x2.redMul(this.a).redAdd(y2);\n  var rhs = this.c2.redMul(this.one.redAdd(this.d.redMul(x2).redMul(y2)));\n  return lhs.cmp(rhs) === 0;\n};\nfunction Point(curve, x, y, z, t) {\n  Base.BasePoint.call(this, curve, 'projective');\n  if (x === null && y === null && z === null) {\n    this.x = this.curve.zero;\n    this.y = this.curve.one;\n    this.z = this.curve.one;\n    this.t = this.curve.zero;\n    this.zOne = true;\n  } else {\n    this.x = new BN(x, 16);\n    this.y = new BN(y, 16);\n    this.z = z ? new BN(z, 16) : this.curve.one;\n    this.t = t && new BN(t, 16);\n    if (!this.x.red) this.x = this.x.toRed(this.curve.red);\n    if (!this.y.red) this.y = this.y.toRed(this.curve.red);\n    if (!this.z.red) this.z = this.z.toRed(this.curve.red);\n    if (this.t && !this.t.red) this.t = this.t.toRed(this.curve.red);\n    this.zOne = this.z === this.curve.one;\n\n    // Use extended coordinates\n    if (this.curve.extended && !this.t) {\n      this.t = this.x.redMul(this.y);\n      if (!this.zOne) this.t = this.t.redMul(this.z.redInvm());\n    }\n  }\n}\ninherits(Point, Base.BasePoint);\nEdwardsCurve.prototype.pointFromJSON = function pointFromJSON(obj) {\n  return Point.fromJSON(this, obj);\n};\nEdwardsCurve.prototype.point = function point(x, y, z, t) {\n  return new Point(this, x, y, z, t);\n};\nPoint.fromJSON = function fromJSON(curve, obj) {\n  return new Point(curve, obj[0], obj[1], obj[2]);\n};\nPoint.prototype.inspect = function inspect() {\n  if (this.isInfinity()) return '<EC Point Infinity>';\n  return '<EC Point x: ' + this.x.fromRed().toString(16, 2) + ' y: ' + this.y.fromRed().toString(16, 2) + ' z: ' + this.z.fromRed().toString(16, 2) + '>';\n};\nPoint.prototype.isInfinity = function isInfinity() {\n  // XXX This code assumes that zero is always zero in red\n  return this.x.cmpn(0) === 0 && (this.y.cmp(this.z) === 0 || this.zOne && this.y.cmp(this.curve.c) === 0);\n};\nPoint.prototype._extDbl = function _extDbl() {\n  // hyperelliptic.org/EFD/g1p/auto-twisted-extended-1.html\n  //     #doubling-dbl-2008-hwcd\n  // 4M + 4S\n\n  // A = X1^2\n  var a = this.x.redSqr();\n  // B = Y1^2\n  var b = this.y.redSqr();\n  // C = 2 * Z1^2\n  var c = this.z.redSqr();\n  c = c.redIAdd(c);\n  // D = a * A\n  var d = this.curve._mulA(a);\n  // E = (X1 + Y1)^2 - A - B\n  var e = this.x.redAdd(this.y).redSqr().redISub(a).redISub(b);\n  // G = D + B\n  var g = d.redAdd(b);\n  // F = G - C\n  var f = g.redSub(c);\n  // H = D - B\n  var h = d.redSub(b);\n  // X3 = E * F\n  var nx = e.redMul(f);\n  // Y3 = G * H\n  var ny = g.redMul(h);\n  // T3 = E * H\n  var nt = e.redMul(h);\n  // Z3 = F * G\n  var nz = f.redMul(g);\n  return this.curve.point(nx, ny, nz, nt);\n};\nPoint.prototype._projDbl = function _projDbl() {\n  // hyperelliptic.org/EFD/g1p/auto-twisted-projective.html\n  //     #doubling-dbl-2008-bbjlp\n  //     #doubling-dbl-2007-bl\n  // and others\n  // Generally 3M + 4S or 2M + 4S\n\n  // B = (X1 + Y1)^2\n  var b = this.x.redAdd(this.y).redSqr();\n  // C = X1^2\n  var c = this.x.redSqr();\n  // D = Y1^2\n  var d = this.y.redSqr();\n  var nx;\n  var ny;\n  var nz;\n  var e;\n  var h;\n  var j;\n  if (this.curve.twisted) {\n    // E = a * C\n    e = this.curve._mulA(c);\n    // F = E + D\n    var f = e.redAdd(d);\n    if (this.zOne) {\n      // X3 = (B - C - D) * (F - 2)\n      nx = b.redSub(c).redSub(d).redMul(f.redSub(this.curve.two));\n      // Y3 = F * (E - D)\n      ny = f.redMul(e.redSub(d));\n      // Z3 = F^2 - 2 * F\n      nz = f.redSqr().redSub(f).redSub(f);\n    } else {\n      // H = Z1^2\n      h = this.z.redSqr();\n      // J = F - 2 * H\n      j = f.redSub(h).redISub(h);\n      // X3 = (B-C-D)*J\n      nx = b.redSub(c).redISub(d).redMul(j);\n      // Y3 = F * (E - D)\n      ny = f.redMul(e.redSub(d));\n      // Z3 = F * J\n      nz = f.redMul(j);\n    }\n  } else {\n    // E = C + D\n    e = c.redAdd(d);\n    // H = (c * Z1)^2\n    h = this.curve._mulC(this.z).redSqr();\n    // J = E - 2 * H\n    j = e.redSub(h).redSub(h);\n    // X3 = c * (B - E) * J\n    nx = this.curve._mulC(b.redISub(e)).redMul(j);\n    // Y3 = c * E * (C - D)\n    ny = this.curve._mulC(e).redMul(c.redISub(d));\n    // Z3 = E * J\n    nz = e.redMul(j);\n  }\n  return this.curve.point(nx, ny, nz);\n};\nPoint.prototype.dbl = function dbl() {\n  if (this.isInfinity()) return this;\n\n  // Double in extended coordinates\n  if (this.curve.extended) return this._extDbl();else return this._projDbl();\n};\nPoint.prototype._extAdd = function _extAdd(p) {\n  // hyperelliptic.org/EFD/g1p/auto-twisted-extended-1.html\n  //     #addition-add-2008-hwcd-3\n  // 8M\n\n  // A = (Y1 - X1) * (Y2 - X2)\n  var a = this.y.redSub(this.x).redMul(p.y.redSub(p.x));\n  // B = (Y1 + X1) * (Y2 + X2)\n  var b = this.y.redAdd(this.x).redMul(p.y.redAdd(p.x));\n  // C = T1 * k * T2\n  var c = this.t.redMul(this.curve.dd).redMul(p.t);\n  // D = Z1 * 2 * Z2\n  var d = this.z.redMul(p.z.redAdd(p.z));\n  // E = B - A\n  var e = b.redSub(a);\n  // F = D - C\n  var f = d.redSub(c);\n  // G = D + C\n  var g = d.redAdd(c);\n  // H = B + A\n  var h = b.redAdd(a);\n  // X3 = E * F\n  var nx = e.redMul(f);\n  // Y3 = G * H\n  var ny = g.redMul(h);\n  // T3 = E * H\n  var nt = e.redMul(h);\n  // Z3 = F * G\n  var nz = f.redMul(g);\n  return this.curve.point(nx, ny, nz, nt);\n};\nPoint.prototype._projAdd = function _projAdd(p) {\n  // hyperelliptic.org/EFD/g1p/auto-twisted-projective.html\n  //     #addition-add-2008-bbjlp\n  //     #addition-add-2007-bl\n  // 10M + 1S\n\n  // A = Z1 * Z2\n  var a = this.z.redMul(p.z);\n  // B = A^2\n  var b = a.redSqr();\n  // C = X1 * X2\n  var c = this.x.redMul(p.x);\n  // D = Y1 * Y2\n  var d = this.y.redMul(p.y);\n  // E = d * C * D\n  var e = this.curve.d.redMul(c).redMul(d);\n  // F = B - E\n  var f = b.redSub(e);\n  // G = B + E\n  var g = b.redAdd(e);\n  // X3 = A * F * ((X1 + Y1) * (X2 + Y2) - C - D)\n  var tmp = this.x.redAdd(this.y).redMul(p.x.redAdd(p.y)).redISub(c).redISub(d);\n  var nx = a.redMul(f).redMul(tmp);\n  var ny;\n  var nz;\n  if (this.curve.twisted) {\n    // Y3 = A * G * (D - a * C)\n    ny = a.redMul(g).redMul(d.redSub(this.curve._mulA(c)));\n    // Z3 = F * G\n    nz = f.redMul(g);\n  } else {\n    // Y3 = A * G * (D - C)\n    ny = a.redMul(g).redMul(d.redSub(c));\n    // Z3 = c * F * G\n    nz = this.curve._mulC(f).redMul(g);\n  }\n  return this.curve.point(nx, ny, nz);\n};\nPoint.prototype.add = function add(p) {\n  if (this.isInfinity()) return p;\n  if (p.isInfinity()) return this;\n  if (this.curve.extended) return this._extAdd(p);else return this._projAdd(p);\n};\nPoint.prototype.mul = function mul(k) {\n  if (this._hasDoubles(k)) return this.curve._fixedNafMul(this, k);else return this.curve._wnafMul(this, k);\n};\nPoint.prototype.mulAdd = function mulAdd(k1, p, k2) {\n  return this.curve._wnafMulAdd(1, [this, p], [k1, k2], 2, false);\n};\nPoint.prototype.jmulAdd = function jmulAdd(k1, p, k2) {\n  return this.curve._wnafMulAdd(1, [this, p], [k1, k2], 2, true);\n};\nPoint.prototype.normalize = function normalize() {\n  if (this.zOne) return this;\n\n  // Normalize coordinates\n  var zi = this.z.redInvm();\n  this.x = this.x.redMul(zi);\n  this.y = this.y.redMul(zi);\n  if (this.t) this.t = this.t.redMul(zi);\n  this.z = this.curve.one;\n  this.zOne = true;\n  return this;\n};\nPoint.prototype.neg = function neg() {\n  return this.curve.point(this.x.redNeg(), this.y, this.z, this.t && this.t.redNeg());\n};\nPoint.prototype.getX = function getX() {\n  this.normalize();\n  return this.x.fromRed();\n};\nPoint.prototype.getY = function getY() {\n  this.normalize();\n  return this.y.fromRed();\n};\nPoint.prototype.eq = function eq(other) {\n  return this === other || this.getX().cmp(other.getX()) === 0 && this.getY().cmp(other.getY()) === 0;\n};\nPoint.prototype.eqXToP = function eqXToP(x) {\n  var rx = x.toRed(this.curve.red).redMul(this.z);\n  if (this.x.cmp(rx) === 0) return true;\n  var xc = x.clone();\n  var t = this.curve.redN.redMul(this.z);\n  for (;;) {\n    xc.iadd(this.curve.n);\n    if (xc.cmp(this.curve.p) >= 0) return false;\n    rx.redIAdd(t);\n    if (this.x.cmp(rx) === 0) return true;\n  }\n};\n\n// Compatibility with BaseCurve\nPoint.prototype.toP = Point.prototype.normalize;\nPoint.prototype.mixedAdd = Point.prototype.add;","map":{"version":3,"names":["utils","require","BN","inherits","Base","assert","EdwardsCurve","conf","twisted","a","mOneA","extended","call","umod","red","m","toRed","c","c2","redSqr","d","dd","redAdd","fromRed","cmpn","oneC","module","exports","prototype","_mulA","num","redNeg","redMul","_mulC","jpoint","x","y","z","t","point","pointFromX","odd","x2","rhs","redSub","lhs","one","y2","redInvm","redSqrt","cmp","zero","Error","isOdd","pointFromY","validate","isInfinity","normalize","Point","curve","BasePoint","zOne","pointFromJSON","obj","fromJSON","inspect","toString","_extDbl","b","redIAdd","e","redISub","g","f","h","nx","ny","nt","nz","_projDbl","j","two","dbl","_extAdd","p","_projAdd","tmp","add","mul","k","_hasDoubles","_fixedNafMul","_wnafMul","mulAdd","k1","k2","_wnafMulAdd","jmulAdd","zi","neg","getX","getY","eq","other","eqXToP","rx","xc","clone","redN","iadd","n","toP","mixedAdd"],"sources":["/Users/mdabdurrazzak/RadInsu/node_modules/elliptic/lib/elliptic/curve/edwards.js"],"sourcesContent":["'use strict';\n\nvar utils = require('../utils');\nvar BN = require('bn.js');\nvar inherits = require('inherits');\nvar Base = require('./base');\n\nvar assert = utils.assert;\n\nfunction EdwardsCurve(conf) {\n  // NOTE: Important as we are creating point in Base.call()\n  this.twisted = (conf.a | 0) !== 1;\n  this.mOneA = this.twisted && (conf.a | 0) === -1;\n  this.extended = this.mOneA;\n\n  Base.call(this, 'edwards', conf);\n\n  this.a = new BN(conf.a, 16).umod(this.red.m);\n  this.a = this.a.toRed(this.red);\n  this.c = new BN(conf.c, 16).toRed(this.red);\n  this.c2 = this.c.redSqr();\n  this.d = new BN(conf.d, 16).toRed(this.red);\n  this.dd = this.d.redAdd(this.d);\n\n  assert(!this.twisted || this.c.fromRed().cmpn(1) === 0);\n  this.oneC = (conf.c | 0) === 1;\n}\ninherits(EdwardsCurve, Base);\nmodule.exports = EdwardsCurve;\n\nEdwardsCurve.prototype._mulA = function _mulA(num) {\n  if (this.mOneA)\n    return num.redNeg();\n  else\n    return this.a.redMul(num);\n};\n\nEdwardsCurve.prototype._mulC = function _mulC(num) {\n  if (this.oneC)\n    return num;\n  else\n    return this.c.redMul(num);\n};\n\n// Just for compatibility with Short curve\nEdwardsCurve.prototype.jpoint = function jpoint(x, y, z, t) {\n  return this.point(x, y, z, t);\n};\n\nEdwardsCurve.prototype.pointFromX = function pointFromX(x, odd) {\n  x = new BN(x, 16);\n  if (!x.red)\n    x = x.toRed(this.red);\n\n  var x2 = x.redSqr();\n  var rhs = this.c2.redSub(this.a.redMul(x2));\n  var lhs = this.one.redSub(this.c2.redMul(this.d).redMul(x2));\n\n  var y2 = rhs.redMul(lhs.redInvm());\n  var y = y2.redSqrt();\n  if (y.redSqr().redSub(y2).cmp(this.zero) !== 0)\n    throw new Error('invalid point');\n\n  var isOdd = y.fromRed().isOdd();\n  if (odd && !isOdd || !odd && isOdd)\n    y = y.redNeg();\n\n  return this.point(x, y);\n};\n\nEdwardsCurve.prototype.pointFromY = function pointFromY(y, odd) {\n  y = new BN(y, 16);\n  if (!y.red)\n    y = y.toRed(this.red);\n\n  // x^2 = (y^2 - c^2) / (c^2 d y^2 - a)\n  var y2 = y.redSqr();\n  var lhs = y2.redSub(this.c2);\n  var rhs = y2.redMul(this.d).redMul(this.c2).redSub(this.a);\n  var x2 = lhs.redMul(rhs.redInvm());\n\n  if (x2.cmp(this.zero) === 0) {\n    if (odd)\n      throw new Error('invalid point');\n    else\n      return this.point(this.zero, y);\n  }\n\n  var x = x2.redSqrt();\n  if (x.redSqr().redSub(x2).cmp(this.zero) !== 0)\n    throw new Error('invalid point');\n\n  if (x.fromRed().isOdd() !== odd)\n    x = x.redNeg();\n\n  return this.point(x, y);\n};\n\nEdwardsCurve.prototype.validate = function validate(point) {\n  if (point.isInfinity())\n    return true;\n\n  // Curve: A * X^2 + Y^2 = C^2 * (1 + D * X^2 * Y^2)\n  point.normalize();\n\n  var x2 = point.x.redSqr();\n  var y2 = point.y.redSqr();\n  var lhs = x2.redMul(this.a).redAdd(y2);\n  var rhs = this.c2.redMul(this.one.redAdd(this.d.redMul(x2).redMul(y2)));\n\n  return lhs.cmp(rhs) === 0;\n};\n\nfunction Point(curve, x, y, z, t) {\n  Base.BasePoint.call(this, curve, 'projective');\n  if (x === null && y === null && z === null) {\n    this.x = this.curve.zero;\n    this.y = this.curve.one;\n    this.z = this.curve.one;\n    this.t = this.curve.zero;\n    this.zOne = true;\n  } else {\n    this.x = new BN(x, 16);\n    this.y = new BN(y, 16);\n    this.z = z ? new BN(z, 16) : this.curve.one;\n    this.t = t && new BN(t, 16);\n    if (!this.x.red)\n      this.x = this.x.toRed(this.curve.red);\n    if (!this.y.red)\n      this.y = this.y.toRed(this.curve.red);\n    if (!this.z.red)\n      this.z = this.z.toRed(this.curve.red);\n    if (this.t && !this.t.red)\n      this.t = this.t.toRed(this.curve.red);\n    this.zOne = this.z === this.curve.one;\n\n    // Use extended coordinates\n    if (this.curve.extended && !this.t) {\n      this.t = this.x.redMul(this.y);\n      if (!this.zOne)\n        this.t = this.t.redMul(this.z.redInvm());\n    }\n  }\n}\ninherits(Point, Base.BasePoint);\n\nEdwardsCurve.prototype.pointFromJSON = function pointFromJSON(obj) {\n  return Point.fromJSON(this, obj);\n};\n\nEdwardsCurve.prototype.point = function point(x, y, z, t) {\n  return new Point(this, x, y, z, t);\n};\n\nPoint.fromJSON = function fromJSON(curve, obj) {\n  return new Point(curve, obj[0], obj[1], obj[2]);\n};\n\nPoint.prototype.inspect = function inspect() {\n  if (this.isInfinity())\n    return '<EC Point Infinity>';\n  return '<EC Point x: ' + this.x.fromRed().toString(16, 2) +\n      ' y: ' + this.y.fromRed().toString(16, 2) +\n      ' z: ' + this.z.fromRed().toString(16, 2) + '>';\n};\n\nPoint.prototype.isInfinity = function isInfinity() {\n  // XXX This code assumes that zero is always zero in red\n  return this.x.cmpn(0) === 0 &&\n    (this.y.cmp(this.z) === 0 ||\n    (this.zOne && this.y.cmp(this.curve.c) === 0));\n};\n\nPoint.prototype._extDbl = function _extDbl() {\n  // hyperelliptic.org/EFD/g1p/auto-twisted-extended-1.html\n  //     #doubling-dbl-2008-hwcd\n  // 4M + 4S\n\n  // A = X1^2\n  var a = this.x.redSqr();\n  // B = Y1^2\n  var b = this.y.redSqr();\n  // C = 2 * Z1^2\n  var c = this.z.redSqr();\n  c = c.redIAdd(c);\n  // D = a * A\n  var d = this.curve._mulA(a);\n  // E = (X1 + Y1)^2 - A - B\n  var e = this.x.redAdd(this.y).redSqr().redISub(a).redISub(b);\n  // G = D + B\n  var g = d.redAdd(b);\n  // F = G - C\n  var f = g.redSub(c);\n  // H = D - B\n  var h = d.redSub(b);\n  // X3 = E * F\n  var nx = e.redMul(f);\n  // Y3 = G * H\n  var ny = g.redMul(h);\n  // T3 = E * H\n  var nt = e.redMul(h);\n  // Z3 = F * G\n  var nz = f.redMul(g);\n  return this.curve.point(nx, ny, nz, nt);\n};\n\nPoint.prototype._projDbl = function _projDbl() {\n  // hyperelliptic.org/EFD/g1p/auto-twisted-projective.html\n  //     #doubling-dbl-2008-bbjlp\n  //     #doubling-dbl-2007-bl\n  // and others\n  // Generally 3M + 4S or 2M + 4S\n\n  // B = (X1 + Y1)^2\n  var b = this.x.redAdd(this.y).redSqr();\n  // C = X1^2\n  var c = this.x.redSqr();\n  // D = Y1^2\n  var d = this.y.redSqr();\n\n  var nx;\n  var ny;\n  var nz;\n  var e;\n  var h;\n  var j;\n  if (this.curve.twisted) {\n    // E = a * C\n    e = this.curve._mulA(c);\n    // F = E + D\n    var f = e.redAdd(d);\n    if (this.zOne) {\n      // X3 = (B - C - D) * (F - 2)\n      nx = b.redSub(c).redSub(d).redMul(f.redSub(this.curve.two));\n      // Y3 = F * (E - D)\n      ny = f.redMul(e.redSub(d));\n      // Z3 = F^2 - 2 * F\n      nz = f.redSqr().redSub(f).redSub(f);\n    } else {\n      // H = Z1^2\n      h = this.z.redSqr();\n      // J = F - 2 * H\n      j = f.redSub(h).redISub(h);\n      // X3 = (B-C-D)*J\n      nx = b.redSub(c).redISub(d).redMul(j);\n      // Y3 = F * (E - D)\n      ny = f.redMul(e.redSub(d));\n      // Z3 = F * J\n      nz = f.redMul(j);\n    }\n  } else {\n    // E = C + D\n    e = c.redAdd(d);\n    // H = (c * Z1)^2\n    h = this.curve._mulC(this.z).redSqr();\n    // J = E - 2 * H\n    j = e.redSub(h).redSub(h);\n    // X3 = c * (B - E) * J\n    nx = this.curve._mulC(b.redISub(e)).redMul(j);\n    // Y3 = c * E * (C - D)\n    ny = this.curve._mulC(e).redMul(c.redISub(d));\n    // Z3 = E * J\n    nz = e.redMul(j);\n  }\n  return this.curve.point(nx, ny, nz);\n};\n\nPoint.prototype.dbl = function dbl() {\n  if (this.isInfinity())\n    return this;\n\n  // Double in extended coordinates\n  if (this.curve.extended)\n    return this._extDbl();\n  else\n    return this._projDbl();\n};\n\nPoint.prototype._extAdd = function _extAdd(p) {\n  // hyperelliptic.org/EFD/g1p/auto-twisted-extended-1.html\n  //     #addition-add-2008-hwcd-3\n  // 8M\n\n  // A = (Y1 - X1) * (Y2 - X2)\n  var a = this.y.redSub(this.x).redMul(p.y.redSub(p.x));\n  // B = (Y1 + X1) * (Y2 + X2)\n  var b = this.y.redAdd(this.x).redMul(p.y.redAdd(p.x));\n  // C = T1 * k * T2\n  var c = this.t.redMul(this.curve.dd).redMul(p.t);\n  // D = Z1 * 2 * Z2\n  var d = this.z.redMul(p.z.redAdd(p.z));\n  // E = B - A\n  var e = b.redSub(a);\n  // F = D - C\n  var f = d.redSub(c);\n  // G = D + C\n  var g = d.redAdd(c);\n  // H = B + A\n  var h = b.redAdd(a);\n  // X3 = E * F\n  var nx = e.redMul(f);\n  // Y3 = G * H\n  var ny = g.redMul(h);\n  // T3 = E * H\n  var nt = e.redMul(h);\n  // Z3 = F * G\n  var nz = f.redMul(g);\n  return this.curve.point(nx, ny, nz, nt);\n};\n\nPoint.prototype._projAdd = function _projAdd(p) {\n  // hyperelliptic.org/EFD/g1p/auto-twisted-projective.html\n  //     #addition-add-2008-bbjlp\n  //     #addition-add-2007-bl\n  // 10M + 1S\n\n  // A = Z1 * Z2\n  var a = this.z.redMul(p.z);\n  // B = A^2\n  var b = a.redSqr();\n  // C = X1 * X2\n  var c = this.x.redMul(p.x);\n  // D = Y1 * Y2\n  var d = this.y.redMul(p.y);\n  // E = d * C * D\n  var e = this.curve.d.redMul(c).redMul(d);\n  // F = B - E\n  var f = b.redSub(e);\n  // G = B + E\n  var g = b.redAdd(e);\n  // X3 = A * F * ((X1 + Y1) * (X2 + Y2) - C - D)\n  var tmp = this.x.redAdd(this.y).redMul(p.x.redAdd(p.y)).redISub(c).redISub(d);\n  var nx = a.redMul(f).redMul(tmp);\n  var ny;\n  var nz;\n  if (this.curve.twisted) {\n    // Y3 = A * G * (D - a * C)\n    ny = a.redMul(g).redMul(d.redSub(this.curve._mulA(c)));\n    // Z3 = F * G\n    nz = f.redMul(g);\n  } else {\n    // Y3 = A * G * (D - C)\n    ny = a.redMul(g).redMul(d.redSub(c));\n    // Z3 = c * F * G\n    nz = this.curve._mulC(f).redMul(g);\n  }\n  return this.curve.point(nx, ny, nz);\n};\n\nPoint.prototype.add = function add(p) {\n  if (this.isInfinity())\n    return p;\n  if (p.isInfinity())\n    return this;\n\n  if (this.curve.extended)\n    return this._extAdd(p);\n  else\n    return this._projAdd(p);\n};\n\nPoint.prototype.mul = function mul(k) {\n  if (this._hasDoubles(k))\n    return this.curve._fixedNafMul(this, k);\n  else\n    return this.curve._wnafMul(this, k);\n};\n\nPoint.prototype.mulAdd = function mulAdd(k1, p, k2) {\n  return this.curve._wnafMulAdd(1, [ this, p ], [ k1, k2 ], 2, false);\n};\n\nPoint.prototype.jmulAdd = function jmulAdd(k1, p, k2) {\n  return this.curve._wnafMulAdd(1, [ this, p ], [ k1, k2 ], 2, true);\n};\n\nPoint.prototype.normalize = function normalize() {\n  if (this.zOne)\n    return this;\n\n  // Normalize coordinates\n  var zi = this.z.redInvm();\n  this.x = this.x.redMul(zi);\n  this.y = this.y.redMul(zi);\n  if (this.t)\n    this.t = this.t.redMul(zi);\n  this.z = this.curve.one;\n  this.zOne = true;\n  return this;\n};\n\nPoint.prototype.neg = function neg() {\n  return this.curve.point(this.x.redNeg(),\n    this.y,\n    this.z,\n    this.t && this.t.redNeg());\n};\n\nPoint.prototype.getX = function getX() {\n  this.normalize();\n  return this.x.fromRed();\n};\n\nPoint.prototype.getY = function getY() {\n  this.normalize();\n  return this.y.fromRed();\n};\n\nPoint.prototype.eq = function eq(other) {\n  return this === other ||\n         this.getX().cmp(other.getX()) === 0 &&\n         this.getY().cmp(other.getY()) === 0;\n};\n\nPoint.prototype.eqXToP = function eqXToP(x) {\n  var rx = x.toRed(this.curve.red).redMul(this.z);\n  if (this.x.cmp(rx) === 0)\n    return true;\n\n  var xc = x.clone();\n  var t = this.curve.redN.redMul(this.z);\n  for (;;) {\n    xc.iadd(this.curve.n);\n    if (xc.cmp(this.curve.p) >= 0)\n      return false;\n\n    rx.redIAdd(t);\n    if (this.x.cmp(rx) === 0)\n      return true;\n  }\n};\n\n// Compatibility with BaseCurve\nPoint.prototype.toP = Point.prototype.normalize;\nPoint.prototype.mixedAdd = Point.prototype.add;\n"],"mappings":"AAAA,YAAY;;AAEZ,IAAIA,KAAK,GAAGC,OAAO,CAAC,UAAU,CAAC;AAC/B,IAAIC,EAAE,GAAGD,OAAO,CAAC,OAAO,CAAC;AACzB,IAAIE,QAAQ,GAAGF,OAAO,CAAC,UAAU,CAAC;AAClC,IAAIG,IAAI,GAAGH,OAAO,CAAC,QAAQ,CAAC;AAE5B,IAAII,MAAM,GAAGL,KAAK,CAACK,MAAM;AAEzB,SAASC,YAAYA,CAACC,IAAI,EAAE;EAC1B;EACA,IAAI,CAACC,OAAO,GAAG,CAACD,IAAI,CAACE,CAAC,GAAG,CAAC,MAAM,CAAC;EACjC,IAAI,CAACC,KAAK,GAAG,IAAI,CAACF,OAAO,IAAI,CAACD,IAAI,CAACE,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;EAChD,IAAI,CAACE,QAAQ,GAAG,IAAI,CAACD,KAAK;EAE1BN,IAAI,CAACQ,IAAI,CAAC,IAAI,EAAE,SAAS,EAAEL,IAAI,CAAC;EAEhC,IAAI,CAACE,CAAC,GAAG,IAAIP,EAAE,CAACK,IAAI,CAACE,CAAC,EAAE,EAAE,CAAC,CAACI,IAAI,CAAC,IAAI,CAACC,GAAG,CAACC,CAAC,CAAC;EAC5C,IAAI,CAACN,CAAC,GAAG,IAAI,CAACA,CAAC,CAACO,KAAK,CAAC,IAAI,CAACF,GAAG,CAAC;EAC/B,IAAI,CAACG,CAAC,GAAG,IAAIf,EAAE,CAACK,IAAI,CAACU,CAAC,EAAE,EAAE,CAAC,CAACD,KAAK,CAAC,IAAI,CAACF,GAAG,CAAC;EAC3C,IAAI,CAACI,EAAE,GAAG,IAAI,CAACD,CAAC,CAACE,MAAM,CAAC,CAAC;EACzB,IAAI,CAACC,CAAC,GAAG,IAAIlB,EAAE,CAACK,IAAI,CAACa,CAAC,EAAE,EAAE,CAAC,CAACJ,KAAK,CAAC,IAAI,CAACF,GAAG,CAAC;EAC3C,IAAI,CAACO,EAAE,GAAG,IAAI,CAACD,CAAC,CAACE,MAAM,CAAC,IAAI,CAACF,CAAC,CAAC;EAE/Bf,MAAM,CAAC,CAAC,IAAI,CAACG,OAAO,IAAI,IAAI,CAACS,CAAC,CAACM,OAAO,CAAC,CAAC,CAACC,IAAI,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC;EACvD,IAAI,CAACC,IAAI,GAAG,CAAClB,IAAI,CAACU,CAAC,GAAG,CAAC,MAAM,CAAC;AAChC;AACAd,QAAQ,CAACG,YAAY,EAAEF,IAAI,CAAC;AAC5BsB,MAAM,CAACC,OAAO,GAAGrB,YAAY;AAE7BA,YAAY,CAACsB,SAAS,CAACC,KAAK,GAAG,SAASA,KAAKA,CAACC,GAAG,EAAE;EACjD,IAAI,IAAI,CAACpB,KAAK,EACZ,OAAOoB,GAAG,CAACC,MAAM,CAAC,CAAC,CAAC,KAEpB,OAAO,IAAI,CAACtB,CAAC,CAACuB,MAAM,CAACF,GAAG,CAAC;AAC7B,CAAC;AAEDxB,YAAY,CAACsB,SAAS,CAACK,KAAK,GAAG,SAASA,KAAKA,CAACH,GAAG,EAAE;EACjD,IAAI,IAAI,CAACL,IAAI,EACX,OAAOK,GAAG,CAAC,KAEX,OAAO,IAAI,CAACb,CAAC,CAACe,MAAM,CAACF,GAAG,CAAC;AAC7B,CAAC;;AAED;AACAxB,YAAY,CAACsB,SAAS,CAACM,MAAM,GAAG,SAASA,MAAMA,CAACC,CAAC,EAAEC,CAAC,EAAEC,CAAC,EAAEC,CAAC,EAAE;EAC1D,OAAO,IAAI,CAACC,KAAK,CAACJ,CAAC,EAAEC,CAAC,EAAEC,CAAC,EAAEC,CAAC,CAAC;AAC/B,CAAC;AAEDhC,YAAY,CAACsB,SAAS,CAACY,UAAU,GAAG,SAASA,UAAUA,CAACL,CAAC,EAAEM,GAAG,EAAE;EAC9DN,CAAC,GAAG,IAAIjC,EAAE,CAACiC,CAAC,EAAE,EAAE,CAAC;EACjB,IAAI,CAACA,CAAC,CAACrB,GAAG,EACRqB,CAAC,GAAGA,CAAC,CAACnB,KAAK,CAAC,IAAI,CAACF,GAAG,CAAC;EAEvB,IAAI4B,EAAE,GAAGP,CAAC,CAAChB,MAAM,CAAC,CAAC;EACnB,IAAIwB,GAAG,GAAG,IAAI,CAACzB,EAAE,CAAC0B,MAAM,CAAC,IAAI,CAACnC,CAAC,CAACuB,MAAM,CAACU,EAAE,CAAC,CAAC;EAC3C,IAAIG,GAAG,GAAG,IAAI,CAACC,GAAG,CAACF,MAAM,CAAC,IAAI,CAAC1B,EAAE,CAACc,MAAM,CAAC,IAAI,CAACZ,CAAC,CAAC,CAACY,MAAM,CAACU,EAAE,CAAC,CAAC;EAE5D,IAAIK,EAAE,GAAGJ,GAAG,CAACX,MAAM,CAACa,GAAG,CAACG,OAAO,CAAC,CAAC,CAAC;EAClC,IAAIZ,CAAC,GAAGW,EAAE,CAACE,OAAO,CAAC,CAAC;EACpB,IAAIb,CAAC,CAACjB,MAAM,CAAC,CAAC,CAACyB,MAAM,CAACG,EAAE,CAAC,CAACG,GAAG,CAAC,IAAI,CAACC,IAAI,CAAC,KAAK,CAAC,EAC5C,MAAM,IAAIC,KAAK,CAAC,eAAe,CAAC;EAElC,IAAIC,KAAK,GAAGjB,CAAC,CAACb,OAAO,CAAC,CAAC,CAAC8B,KAAK,CAAC,CAAC;EAC/B,IAAIZ,GAAG,IAAI,CAACY,KAAK,IAAI,CAACZ,GAAG,IAAIY,KAAK,EAChCjB,CAAC,GAAGA,CAAC,CAACL,MAAM,CAAC,CAAC;EAEhB,OAAO,IAAI,CAACQ,KAAK,CAACJ,CAAC,EAAEC,CAAC,CAAC;AACzB,CAAC;AAED9B,YAAY,CAACsB,SAAS,CAAC0B,UAAU,GAAG,SAASA,UAAUA,CAAClB,CAAC,EAAEK,GAAG,EAAE;EAC9DL,CAAC,GAAG,IAAIlC,EAAE,CAACkC,CAAC,EAAE,EAAE,CAAC;EACjB,IAAI,CAACA,CAAC,CAACtB,GAAG,EACRsB,CAAC,GAAGA,CAAC,CAACpB,KAAK,CAAC,IAAI,CAACF,GAAG,CAAC;;EAEvB;EACA,IAAIiC,EAAE,GAAGX,CAAC,CAACjB,MAAM,CAAC,CAAC;EACnB,IAAI0B,GAAG,GAAGE,EAAE,CAACH,MAAM,CAAC,IAAI,CAAC1B,EAAE,CAAC;EAC5B,IAAIyB,GAAG,GAAGI,EAAE,CAACf,MAAM,CAAC,IAAI,CAACZ,CAAC,CAAC,CAACY,MAAM,CAAC,IAAI,CAACd,EAAE,CAAC,CAAC0B,MAAM,CAAC,IAAI,CAACnC,CAAC,CAAC;EAC1D,IAAIiC,EAAE,GAAGG,GAAG,CAACb,MAAM,CAACW,GAAG,CAACK,OAAO,CAAC,CAAC,CAAC;EAElC,IAAIN,EAAE,CAACQ,GAAG,CAAC,IAAI,CAACC,IAAI,CAAC,KAAK,CAAC,EAAE;IAC3B,IAAIV,GAAG,EACL,MAAM,IAAIW,KAAK,CAAC,eAAe,CAAC,CAAC,KAEjC,OAAO,IAAI,CAACb,KAAK,CAAC,IAAI,CAACY,IAAI,EAAEf,CAAC,CAAC;EACnC;EAEA,IAAID,CAAC,GAAGO,EAAE,CAACO,OAAO,CAAC,CAAC;EACpB,IAAId,CAAC,CAAChB,MAAM,CAAC,CAAC,CAACyB,MAAM,CAACF,EAAE,CAAC,CAACQ,GAAG,CAAC,IAAI,CAACC,IAAI,CAAC,KAAK,CAAC,EAC5C,MAAM,IAAIC,KAAK,CAAC,eAAe,CAAC;EAElC,IAAIjB,CAAC,CAACZ,OAAO,CAAC,CAAC,CAAC8B,KAAK,CAAC,CAAC,KAAKZ,GAAG,EAC7BN,CAAC,GAAGA,CAAC,CAACJ,MAAM,CAAC,CAAC;EAEhB,OAAO,IAAI,CAACQ,KAAK,CAACJ,CAAC,EAAEC,CAAC,CAAC;AACzB,CAAC;AAED9B,YAAY,CAACsB,SAAS,CAAC2B,QAAQ,GAAG,SAASA,QAAQA,CAAChB,KAAK,EAAE;EACzD,IAAIA,KAAK,CAACiB,UAAU,CAAC,CAAC,EACpB,OAAO,IAAI;;EAEb;EACAjB,KAAK,CAACkB,SAAS,CAAC,CAAC;EAEjB,IAAIf,EAAE,GAAGH,KAAK,CAACJ,CAAC,CAAChB,MAAM,CAAC,CAAC;EACzB,IAAI4B,EAAE,GAAGR,KAAK,CAACH,CAAC,CAACjB,MAAM,CAAC,CAAC;EACzB,IAAI0B,GAAG,GAAGH,EAAE,CAACV,MAAM,CAAC,IAAI,CAACvB,CAAC,CAAC,CAACa,MAAM,CAACyB,EAAE,CAAC;EACtC,IAAIJ,GAAG,GAAG,IAAI,CAACzB,EAAE,CAACc,MAAM,CAAC,IAAI,CAACc,GAAG,CAACxB,MAAM,CAAC,IAAI,CAACF,CAAC,CAACY,MAAM,CAACU,EAAE,CAAC,CAACV,MAAM,CAACe,EAAE,CAAC,CAAC,CAAC;EAEvE,OAAOF,GAAG,CAACK,GAAG,CAACP,GAAG,CAAC,KAAK,CAAC;AAC3B,CAAC;AAED,SAASe,KAAKA,CAACC,KAAK,EAAExB,CAAC,EAAEC,CAAC,EAAEC,CAAC,EAAEC,CAAC,EAAE;EAChClC,IAAI,CAACwD,SAAS,CAAChD,IAAI,CAAC,IAAI,EAAE+C,KAAK,EAAE,YAAY,CAAC;EAC9C,IAAIxB,CAAC,KAAK,IAAI,IAAIC,CAAC,KAAK,IAAI,IAAIC,CAAC,KAAK,IAAI,EAAE;IAC1C,IAAI,CAACF,CAAC,GAAG,IAAI,CAACwB,KAAK,CAACR,IAAI;IACxB,IAAI,CAACf,CAAC,GAAG,IAAI,CAACuB,KAAK,CAACb,GAAG;IACvB,IAAI,CAACT,CAAC,GAAG,IAAI,CAACsB,KAAK,CAACb,GAAG;IACvB,IAAI,CAACR,CAAC,GAAG,IAAI,CAACqB,KAAK,CAACR,IAAI;IACxB,IAAI,CAACU,IAAI,GAAG,IAAI;EAClB,CAAC,MAAM;IACL,IAAI,CAAC1B,CAAC,GAAG,IAAIjC,EAAE,CAACiC,CAAC,EAAE,EAAE,CAAC;IACtB,IAAI,CAACC,CAAC,GAAG,IAAIlC,EAAE,CAACkC,CAAC,EAAE,EAAE,CAAC;IACtB,IAAI,CAACC,CAAC,GAAGA,CAAC,GAAG,IAAInC,EAAE,CAACmC,CAAC,EAAE,EAAE,CAAC,GAAG,IAAI,CAACsB,KAAK,CAACb,GAAG;IAC3C,IAAI,CAACR,CAAC,GAAGA,CAAC,IAAI,IAAIpC,EAAE,CAACoC,CAAC,EAAE,EAAE,CAAC;IAC3B,IAAI,CAAC,IAAI,CAACH,CAAC,CAACrB,GAAG,EACb,IAAI,CAACqB,CAAC,GAAG,IAAI,CAACA,CAAC,CAACnB,KAAK,CAAC,IAAI,CAAC2C,KAAK,CAAC7C,GAAG,CAAC;IACvC,IAAI,CAAC,IAAI,CAACsB,CAAC,CAACtB,GAAG,EACb,IAAI,CAACsB,CAAC,GAAG,IAAI,CAACA,CAAC,CAACpB,KAAK,CAAC,IAAI,CAAC2C,KAAK,CAAC7C,GAAG,CAAC;IACvC,IAAI,CAAC,IAAI,CAACuB,CAAC,CAACvB,GAAG,EACb,IAAI,CAACuB,CAAC,GAAG,IAAI,CAACA,CAAC,CAACrB,KAAK,CAAC,IAAI,CAAC2C,KAAK,CAAC7C,GAAG,CAAC;IACvC,IAAI,IAAI,CAACwB,CAAC,IAAI,CAAC,IAAI,CAACA,CAAC,CAACxB,GAAG,EACvB,IAAI,CAACwB,CAAC,GAAG,IAAI,CAACA,CAAC,CAACtB,KAAK,CAAC,IAAI,CAAC2C,KAAK,CAAC7C,GAAG,CAAC;IACvC,IAAI,CAAC+C,IAAI,GAAG,IAAI,CAACxB,CAAC,KAAK,IAAI,CAACsB,KAAK,CAACb,GAAG;;IAErC;IACA,IAAI,IAAI,CAACa,KAAK,CAAChD,QAAQ,IAAI,CAAC,IAAI,CAAC2B,CAAC,EAAE;MAClC,IAAI,CAACA,CAAC,GAAG,IAAI,CAACH,CAAC,CAACH,MAAM,CAAC,IAAI,CAACI,CAAC,CAAC;MAC9B,IAAI,CAAC,IAAI,CAACyB,IAAI,EACZ,IAAI,CAACvB,CAAC,GAAG,IAAI,CAACA,CAAC,CAACN,MAAM,CAAC,IAAI,CAACK,CAAC,CAACW,OAAO,CAAC,CAAC,CAAC;IAC5C;EACF;AACF;AACA7C,QAAQ,CAACuD,KAAK,EAAEtD,IAAI,CAACwD,SAAS,CAAC;AAE/BtD,YAAY,CAACsB,SAAS,CAACkC,aAAa,GAAG,SAASA,aAAaA,CAACC,GAAG,EAAE;EACjE,OAAOL,KAAK,CAACM,QAAQ,CAAC,IAAI,EAAED,GAAG,CAAC;AAClC,CAAC;AAEDzD,YAAY,CAACsB,SAAS,CAACW,KAAK,GAAG,SAASA,KAAKA,CAACJ,CAAC,EAAEC,CAAC,EAAEC,CAAC,EAAEC,CAAC,EAAE;EACxD,OAAO,IAAIoB,KAAK,CAAC,IAAI,EAAEvB,CAAC,EAAEC,CAAC,EAAEC,CAAC,EAAEC,CAAC,CAAC;AACpC,CAAC;AAEDoB,KAAK,CAACM,QAAQ,GAAG,SAASA,QAAQA,CAACL,KAAK,EAAEI,GAAG,EAAE;EAC7C,OAAO,IAAIL,KAAK,CAACC,KAAK,EAAEI,GAAG,CAAC,CAAC,CAAC,EAAEA,GAAG,CAAC,CAAC,CAAC,EAAEA,GAAG,CAAC,CAAC,CAAC,CAAC;AACjD,CAAC;AAEDL,KAAK,CAAC9B,SAAS,CAACqC,OAAO,GAAG,SAASA,OAAOA,CAAA,EAAG;EAC3C,IAAI,IAAI,CAACT,UAAU,CAAC,CAAC,EACnB,OAAO,qBAAqB;EAC9B,OAAO,eAAe,GAAG,IAAI,CAACrB,CAAC,CAACZ,OAAO,CAAC,CAAC,CAAC2C,QAAQ,CAAC,EAAE,EAAE,CAAC,CAAC,GACrD,MAAM,GAAG,IAAI,CAAC9B,CAAC,CAACb,OAAO,CAAC,CAAC,CAAC2C,QAAQ,CAAC,EAAE,EAAE,CAAC,CAAC,GACzC,MAAM,GAAG,IAAI,CAAC7B,CAAC,CAACd,OAAO,CAAC,CAAC,CAAC2C,QAAQ,CAAC,EAAE,EAAE,CAAC,CAAC,GAAG,GAAG;AACrD,CAAC;AAEDR,KAAK,CAAC9B,SAAS,CAAC4B,UAAU,GAAG,SAASA,UAAUA,CAAA,EAAG;EACjD;EACA,OAAO,IAAI,CAACrB,CAAC,CAACX,IAAI,CAAC,CAAC,CAAC,KAAK,CAAC,KACxB,IAAI,CAACY,CAAC,CAACc,GAAG,CAAC,IAAI,CAACb,CAAC,CAAC,KAAK,CAAC,IACxB,IAAI,CAACwB,IAAI,IAAI,IAAI,CAACzB,CAAC,CAACc,GAAG,CAAC,IAAI,CAACS,KAAK,CAAC1C,CAAC,CAAC,KAAK,CAAE,CAAC;AAClD,CAAC;AAEDyC,KAAK,CAAC9B,SAAS,CAACuC,OAAO,GAAG,SAASA,OAAOA,CAAA,EAAG;EAC3C;EACA;EACA;;EAEA;EACA,IAAI1D,CAAC,GAAG,IAAI,CAAC0B,CAAC,CAAChB,MAAM,CAAC,CAAC;EACvB;EACA,IAAIiD,CAAC,GAAG,IAAI,CAAChC,CAAC,CAACjB,MAAM,CAAC,CAAC;EACvB;EACA,IAAIF,CAAC,GAAG,IAAI,CAACoB,CAAC,CAAClB,MAAM,CAAC,CAAC;EACvBF,CAAC,GAAGA,CAAC,CAACoD,OAAO,CAACpD,CAAC,CAAC;EAChB;EACA,IAAIG,CAAC,GAAG,IAAI,CAACuC,KAAK,CAAC9B,KAAK,CAACpB,CAAC,CAAC;EAC3B;EACA,IAAI6D,CAAC,GAAG,IAAI,CAACnC,CAAC,CAACb,MAAM,CAAC,IAAI,CAACc,CAAC,CAAC,CAACjB,MAAM,CAAC,CAAC,CAACoD,OAAO,CAAC9D,CAAC,CAAC,CAAC8D,OAAO,CAACH,CAAC,CAAC;EAC5D;EACA,IAAII,CAAC,GAAGpD,CAAC,CAACE,MAAM,CAAC8C,CAAC,CAAC;EACnB;EACA,IAAIK,CAAC,GAAGD,CAAC,CAAC5B,MAAM,CAAC3B,CAAC,CAAC;EACnB;EACA,IAAIyD,CAAC,GAAGtD,CAAC,CAACwB,MAAM,CAACwB,CAAC,CAAC;EACnB;EACA,IAAIO,EAAE,GAAGL,CAAC,CAACtC,MAAM,CAACyC,CAAC,CAAC;EACpB;EACA,IAAIG,EAAE,GAAGJ,CAAC,CAACxC,MAAM,CAAC0C,CAAC,CAAC;EACpB;EACA,IAAIG,EAAE,GAAGP,CAAC,CAACtC,MAAM,CAAC0C,CAAC,CAAC;EACpB;EACA,IAAII,EAAE,GAAGL,CAAC,CAACzC,MAAM,CAACwC,CAAC,CAAC;EACpB,OAAO,IAAI,CAACb,KAAK,CAACpB,KAAK,CAACoC,EAAE,EAAEC,EAAE,EAAEE,EAAE,EAAED,EAAE,CAAC;AACzC,CAAC;AAEDnB,KAAK,CAAC9B,SAAS,CAACmD,QAAQ,GAAG,SAASA,QAAQA,CAAA,EAAG;EAC7C;EACA;EACA;EACA;EACA;;EAEA;EACA,IAAIX,CAAC,GAAG,IAAI,CAACjC,CAAC,CAACb,MAAM,CAAC,IAAI,CAACc,CAAC,CAAC,CAACjB,MAAM,CAAC,CAAC;EACtC;EACA,IAAIF,CAAC,GAAG,IAAI,CAACkB,CAAC,CAAChB,MAAM,CAAC,CAAC;EACvB;EACA,IAAIC,CAAC,GAAG,IAAI,CAACgB,CAAC,CAACjB,MAAM,CAAC,CAAC;EAEvB,IAAIwD,EAAE;EACN,IAAIC,EAAE;EACN,IAAIE,EAAE;EACN,IAAIR,CAAC;EACL,IAAII,CAAC;EACL,IAAIM,CAAC;EACL,IAAI,IAAI,CAACrB,KAAK,CAACnD,OAAO,EAAE;IACtB;IACA8D,CAAC,GAAG,IAAI,CAACX,KAAK,CAAC9B,KAAK,CAACZ,CAAC,CAAC;IACvB;IACA,IAAIwD,CAAC,GAAGH,CAAC,CAAChD,MAAM,CAACF,CAAC,CAAC;IACnB,IAAI,IAAI,CAACyC,IAAI,EAAE;MACb;MACAc,EAAE,GAAGP,CAAC,CAACxB,MAAM,CAAC3B,CAAC,CAAC,CAAC2B,MAAM,CAACxB,CAAC,CAAC,CAACY,MAAM,CAACyC,CAAC,CAAC7B,MAAM,CAAC,IAAI,CAACe,KAAK,CAACsB,GAAG,CAAC,CAAC;MAC3D;MACAL,EAAE,GAAGH,CAAC,CAACzC,MAAM,CAACsC,CAAC,CAAC1B,MAAM,CAACxB,CAAC,CAAC,CAAC;MAC1B;MACA0D,EAAE,GAAGL,CAAC,CAACtD,MAAM,CAAC,CAAC,CAACyB,MAAM,CAAC6B,CAAC,CAAC,CAAC7B,MAAM,CAAC6B,CAAC,CAAC;IACrC,CAAC,MAAM;MACL;MACAC,CAAC,GAAG,IAAI,CAACrC,CAAC,CAAClB,MAAM,CAAC,CAAC;MACnB;MACA6D,CAAC,GAAGP,CAAC,CAAC7B,MAAM,CAAC8B,CAAC,CAAC,CAACH,OAAO,CAACG,CAAC,CAAC;MAC1B;MACAC,EAAE,GAAGP,CAAC,CAACxB,MAAM,CAAC3B,CAAC,CAAC,CAACsD,OAAO,CAACnD,CAAC,CAAC,CAACY,MAAM,CAACgD,CAAC,CAAC;MACrC;MACAJ,EAAE,GAAGH,CAAC,CAACzC,MAAM,CAACsC,CAAC,CAAC1B,MAAM,CAACxB,CAAC,CAAC,CAAC;MAC1B;MACA0D,EAAE,GAAGL,CAAC,CAACzC,MAAM,CAACgD,CAAC,CAAC;IAClB;EACF,CAAC,MAAM;IACL;IACAV,CAAC,GAAGrD,CAAC,CAACK,MAAM,CAACF,CAAC,CAAC;IACf;IACAsD,CAAC,GAAG,IAAI,CAACf,KAAK,CAAC1B,KAAK,CAAC,IAAI,CAACI,CAAC,CAAC,CAAClB,MAAM,CAAC,CAAC;IACrC;IACA6D,CAAC,GAAGV,CAAC,CAAC1B,MAAM,CAAC8B,CAAC,CAAC,CAAC9B,MAAM,CAAC8B,CAAC,CAAC;IACzB;IACAC,EAAE,GAAG,IAAI,CAAChB,KAAK,CAAC1B,KAAK,CAACmC,CAAC,CAACG,OAAO,CAACD,CAAC,CAAC,CAAC,CAACtC,MAAM,CAACgD,CAAC,CAAC;IAC7C;IACAJ,EAAE,GAAG,IAAI,CAACjB,KAAK,CAAC1B,KAAK,CAACqC,CAAC,CAAC,CAACtC,MAAM,CAACf,CAAC,CAACsD,OAAO,CAACnD,CAAC,CAAC,CAAC;IAC7C;IACA0D,EAAE,GAAGR,CAAC,CAACtC,MAAM,CAACgD,CAAC,CAAC;EAClB;EACA,OAAO,IAAI,CAACrB,KAAK,CAACpB,KAAK,CAACoC,EAAE,EAAEC,EAAE,EAAEE,EAAE,CAAC;AACrC,CAAC;AAEDpB,KAAK,CAAC9B,SAAS,CAACsD,GAAG,GAAG,SAASA,GAAGA,CAAA,EAAG;EACnC,IAAI,IAAI,CAAC1B,UAAU,CAAC,CAAC,EACnB,OAAO,IAAI;;EAEb;EACA,IAAI,IAAI,CAACG,KAAK,CAAChD,QAAQ,EACrB,OAAO,IAAI,CAACwD,OAAO,CAAC,CAAC,CAAC,KAEtB,OAAO,IAAI,CAACY,QAAQ,CAAC,CAAC;AAC1B,CAAC;AAEDrB,KAAK,CAAC9B,SAAS,CAACuD,OAAO,GAAG,SAASA,OAAOA,CAACC,CAAC,EAAE;EAC5C;EACA;EACA;;EAEA;EACA,IAAI3E,CAAC,GAAG,IAAI,CAAC2B,CAAC,CAACQ,MAAM,CAAC,IAAI,CAACT,CAAC,CAAC,CAACH,MAAM,CAACoD,CAAC,CAAChD,CAAC,CAACQ,MAAM,CAACwC,CAAC,CAACjD,CAAC,CAAC,CAAC;EACrD;EACA,IAAIiC,CAAC,GAAG,IAAI,CAAChC,CAAC,CAACd,MAAM,CAAC,IAAI,CAACa,CAAC,CAAC,CAACH,MAAM,CAACoD,CAAC,CAAChD,CAAC,CAACd,MAAM,CAAC8D,CAAC,CAACjD,CAAC,CAAC,CAAC;EACrD;EACA,IAAIlB,CAAC,GAAG,IAAI,CAACqB,CAAC,CAACN,MAAM,CAAC,IAAI,CAAC2B,KAAK,CAACtC,EAAE,CAAC,CAACW,MAAM,CAACoD,CAAC,CAAC9C,CAAC,CAAC;EAChD;EACA,IAAIlB,CAAC,GAAG,IAAI,CAACiB,CAAC,CAACL,MAAM,CAACoD,CAAC,CAAC/C,CAAC,CAACf,MAAM,CAAC8D,CAAC,CAAC/C,CAAC,CAAC,CAAC;EACtC;EACA,IAAIiC,CAAC,GAAGF,CAAC,CAACxB,MAAM,CAACnC,CAAC,CAAC;EACnB;EACA,IAAIgE,CAAC,GAAGrD,CAAC,CAACwB,MAAM,CAAC3B,CAAC,CAAC;EACnB;EACA,IAAIuD,CAAC,GAAGpD,CAAC,CAACE,MAAM,CAACL,CAAC,CAAC;EACnB;EACA,IAAIyD,CAAC,GAAGN,CAAC,CAAC9C,MAAM,CAACb,CAAC,CAAC;EACnB;EACA,IAAIkE,EAAE,GAAGL,CAAC,CAACtC,MAAM,CAACyC,CAAC,CAAC;EACpB;EACA,IAAIG,EAAE,GAAGJ,CAAC,CAACxC,MAAM,CAAC0C,CAAC,CAAC;EACpB;EACA,IAAIG,EAAE,GAAGP,CAAC,CAACtC,MAAM,CAAC0C,CAAC,CAAC;EACpB;EACA,IAAII,EAAE,GAAGL,CAAC,CAACzC,MAAM,CAACwC,CAAC,CAAC;EACpB,OAAO,IAAI,CAACb,KAAK,CAACpB,KAAK,CAACoC,EAAE,EAAEC,EAAE,EAAEE,EAAE,EAAED,EAAE,CAAC;AACzC,CAAC;AAEDnB,KAAK,CAAC9B,SAAS,CAACyD,QAAQ,GAAG,SAASA,QAAQA,CAACD,CAAC,EAAE;EAC9C;EACA;EACA;EACA;;EAEA;EACA,IAAI3E,CAAC,GAAG,IAAI,CAAC4B,CAAC,CAACL,MAAM,CAACoD,CAAC,CAAC/C,CAAC,CAAC;EAC1B;EACA,IAAI+B,CAAC,GAAG3D,CAAC,CAACU,MAAM,CAAC,CAAC;EAClB;EACA,IAAIF,CAAC,GAAG,IAAI,CAACkB,CAAC,CAACH,MAAM,CAACoD,CAAC,CAACjD,CAAC,CAAC;EAC1B;EACA,IAAIf,CAAC,GAAG,IAAI,CAACgB,CAAC,CAACJ,MAAM,CAACoD,CAAC,CAAChD,CAAC,CAAC;EAC1B;EACA,IAAIkC,CAAC,GAAG,IAAI,CAACX,KAAK,CAACvC,CAAC,CAACY,MAAM,CAACf,CAAC,CAAC,CAACe,MAAM,CAACZ,CAAC,CAAC;EACxC;EACA,IAAIqD,CAAC,GAAGL,CAAC,CAACxB,MAAM,CAAC0B,CAAC,CAAC;EACnB;EACA,IAAIE,CAAC,GAAGJ,CAAC,CAAC9C,MAAM,CAACgD,CAAC,CAAC;EACnB;EACA,IAAIgB,GAAG,GAAG,IAAI,CAACnD,CAAC,CAACb,MAAM,CAAC,IAAI,CAACc,CAAC,CAAC,CAACJ,MAAM,CAACoD,CAAC,CAACjD,CAAC,CAACb,MAAM,CAAC8D,CAAC,CAAChD,CAAC,CAAC,CAAC,CAACmC,OAAO,CAACtD,CAAC,CAAC,CAACsD,OAAO,CAACnD,CAAC,CAAC;EAC7E,IAAIuD,EAAE,GAAGlE,CAAC,CAACuB,MAAM,CAACyC,CAAC,CAAC,CAACzC,MAAM,CAACsD,GAAG,CAAC;EAChC,IAAIV,EAAE;EACN,IAAIE,EAAE;EACN,IAAI,IAAI,CAACnB,KAAK,CAACnD,OAAO,EAAE;IACtB;IACAoE,EAAE,GAAGnE,CAAC,CAACuB,MAAM,CAACwC,CAAC,CAAC,CAACxC,MAAM,CAACZ,CAAC,CAACwB,MAAM,CAAC,IAAI,CAACe,KAAK,CAAC9B,KAAK,CAACZ,CAAC,CAAC,CAAC,CAAC;IACtD;IACA6D,EAAE,GAAGL,CAAC,CAACzC,MAAM,CAACwC,CAAC,CAAC;EAClB,CAAC,MAAM;IACL;IACAI,EAAE,GAAGnE,CAAC,CAACuB,MAAM,CAACwC,CAAC,CAAC,CAACxC,MAAM,CAACZ,CAAC,CAACwB,MAAM,CAAC3B,CAAC,CAAC,CAAC;IACpC;IACA6D,EAAE,GAAG,IAAI,CAACnB,KAAK,CAAC1B,KAAK,CAACwC,CAAC,CAAC,CAACzC,MAAM,CAACwC,CAAC,CAAC;EACpC;EACA,OAAO,IAAI,CAACb,KAAK,CAACpB,KAAK,CAACoC,EAAE,EAAEC,EAAE,EAAEE,EAAE,CAAC;AACrC,CAAC;AAEDpB,KAAK,CAAC9B,SAAS,CAAC2D,GAAG,GAAG,SAASA,GAAGA,CAACH,CAAC,EAAE;EACpC,IAAI,IAAI,CAAC5B,UAAU,CAAC,CAAC,EACnB,OAAO4B,CAAC;EACV,IAAIA,CAAC,CAAC5B,UAAU,CAAC,CAAC,EAChB,OAAO,IAAI;EAEb,IAAI,IAAI,CAACG,KAAK,CAAChD,QAAQ,EACrB,OAAO,IAAI,CAACwE,OAAO,CAACC,CAAC,CAAC,CAAC,KAEvB,OAAO,IAAI,CAACC,QAAQ,CAACD,CAAC,CAAC;AAC3B,CAAC;AAED1B,KAAK,CAAC9B,SAAS,CAAC4D,GAAG,GAAG,SAASA,GAAGA,CAACC,CAAC,EAAE;EACpC,IAAI,IAAI,CAACC,WAAW,CAACD,CAAC,CAAC,EACrB,OAAO,IAAI,CAAC9B,KAAK,CAACgC,YAAY,CAAC,IAAI,EAAEF,CAAC,CAAC,CAAC,KAExC,OAAO,IAAI,CAAC9B,KAAK,CAACiC,QAAQ,CAAC,IAAI,EAAEH,CAAC,CAAC;AACvC,CAAC;AAED/B,KAAK,CAAC9B,SAAS,CAACiE,MAAM,GAAG,SAASA,MAAMA,CAACC,EAAE,EAAEV,CAAC,EAAEW,EAAE,EAAE;EAClD,OAAO,IAAI,CAACpC,KAAK,CAACqC,WAAW,CAAC,CAAC,EAAE,CAAE,IAAI,EAAEZ,CAAC,CAAE,EAAE,CAAEU,EAAE,EAAEC,EAAE,CAAE,EAAE,CAAC,EAAE,KAAK,CAAC;AACrE,CAAC;AAEDrC,KAAK,CAAC9B,SAAS,CAACqE,OAAO,GAAG,SAASA,OAAOA,CAACH,EAAE,EAAEV,CAAC,EAAEW,EAAE,EAAE;EACpD,OAAO,IAAI,CAACpC,KAAK,CAACqC,WAAW,CAAC,CAAC,EAAE,CAAE,IAAI,EAAEZ,CAAC,CAAE,EAAE,CAAEU,EAAE,EAAEC,EAAE,CAAE,EAAE,CAAC,EAAE,IAAI,CAAC;AACpE,CAAC;AAEDrC,KAAK,CAAC9B,SAAS,CAAC6B,SAAS,GAAG,SAASA,SAASA,CAAA,EAAG;EAC/C,IAAI,IAAI,CAACI,IAAI,EACX,OAAO,IAAI;;EAEb;EACA,IAAIqC,EAAE,GAAG,IAAI,CAAC7D,CAAC,CAACW,OAAO,CAAC,CAAC;EACzB,IAAI,CAACb,CAAC,GAAG,IAAI,CAACA,CAAC,CAACH,MAAM,CAACkE,EAAE,CAAC;EAC1B,IAAI,CAAC9D,CAAC,GAAG,IAAI,CAACA,CAAC,CAACJ,MAAM,CAACkE,EAAE,CAAC;EAC1B,IAAI,IAAI,CAAC5D,CAAC,EACR,IAAI,CAACA,CAAC,GAAG,IAAI,CAACA,CAAC,CAACN,MAAM,CAACkE,EAAE,CAAC;EAC5B,IAAI,CAAC7D,CAAC,GAAG,IAAI,CAACsB,KAAK,CAACb,GAAG;EACvB,IAAI,CAACe,IAAI,GAAG,IAAI;EAChB,OAAO,IAAI;AACb,CAAC;AAEDH,KAAK,CAAC9B,SAAS,CAACuE,GAAG,GAAG,SAASA,GAAGA,CAAA,EAAG;EACnC,OAAO,IAAI,CAACxC,KAAK,CAACpB,KAAK,CAAC,IAAI,CAACJ,CAAC,CAACJ,MAAM,CAAC,CAAC,EACrC,IAAI,CAACK,CAAC,EACN,IAAI,CAACC,CAAC,EACN,IAAI,CAACC,CAAC,IAAI,IAAI,CAACA,CAAC,CAACP,MAAM,CAAC,CAAC,CAAC;AAC9B,CAAC;AAED2B,KAAK,CAAC9B,SAAS,CAACwE,IAAI,GAAG,SAASA,IAAIA,CAAA,EAAG;EACrC,IAAI,CAAC3C,SAAS,CAAC,CAAC;EAChB,OAAO,IAAI,CAACtB,CAAC,CAACZ,OAAO,CAAC,CAAC;AACzB,CAAC;AAEDmC,KAAK,CAAC9B,SAAS,CAACyE,IAAI,GAAG,SAASA,IAAIA,CAAA,EAAG;EACrC,IAAI,CAAC5C,SAAS,CAAC,CAAC;EAChB,OAAO,IAAI,CAACrB,CAAC,CAACb,OAAO,CAAC,CAAC;AACzB,CAAC;AAEDmC,KAAK,CAAC9B,SAAS,CAAC0E,EAAE,GAAG,SAASA,EAAEA,CAACC,KAAK,EAAE;EACtC,OAAO,IAAI,KAAKA,KAAK,IACd,IAAI,CAACH,IAAI,CAAC,CAAC,CAAClD,GAAG,CAACqD,KAAK,CAACH,IAAI,CAAC,CAAC,CAAC,KAAK,CAAC,IACnC,IAAI,CAACC,IAAI,CAAC,CAAC,CAACnD,GAAG,CAACqD,KAAK,CAACF,IAAI,CAAC,CAAC,CAAC,KAAK,CAAC;AAC5C,CAAC;AAED3C,KAAK,CAAC9B,SAAS,CAAC4E,MAAM,GAAG,SAASA,MAAMA,CAACrE,CAAC,EAAE;EAC1C,IAAIsE,EAAE,GAAGtE,CAAC,CAACnB,KAAK,CAAC,IAAI,CAAC2C,KAAK,CAAC7C,GAAG,CAAC,CAACkB,MAAM,CAAC,IAAI,CAACK,CAAC,CAAC;EAC/C,IAAI,IAAI,CAACF,CAAC,CAACe,GAAG,CAACuD,EAAE,CAAC,KAAK,CAAC,EACtB,OAAO,IAAI;EAEb,IAAIC,EAAE,GAAGvE,CAAC,CAACwE,KAAK,CAAC,CAAC;EAClB,IAAIrE,CAAC,GAAG,IAAI,CAACqB,KAAK,CAACiD,IAAI,CAAC5E,MAAM,CAAC,IAAI,CAACK,CAAC,CAAC;EACtC,SAAS;IACPqE,EAAE,CAACG,IAAI,CAAC,IAAI,CAAClD,KAAK,CAACmD,CAAC,CAAC;IACrB,IAAIJ,EAAE,CAACxD,GAAG,CAAC,IAAI,CAACS,KAAK,CAACyB,CAAC,CAAC,IAAI,CAAC,EAC3B,OAAO,KAAK;IAEdqB,EAAE,CAACpC,OAAO,CAAC/B,CAAC,CAAC;IACb,IAAI,IAAI,CAACH,CAAC,CAACe,GAAG,CAACuD,EAAE,CAAC,KAAK,CAAC,EACtB,OAAO,IAAI;EACf;AACF,CAAC;;AAED;AACA/C,KAAK,CAAC9B,SAAS,CAACmF,GAAG,GAAGrD,KAAK,CAAC9B,SAAS,CAAC6B,SAAS;AAC/CC,KAAK,CAAC9B,SAAS,CAACoF,QAAQ,GAAGtD,KAAK,CAAC9B,SAAS,CAAC2D,GAAG","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}