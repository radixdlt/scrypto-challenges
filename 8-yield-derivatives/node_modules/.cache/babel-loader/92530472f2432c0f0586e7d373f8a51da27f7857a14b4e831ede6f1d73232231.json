{"ast":null,"code":"\"use strict\";\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nvar __generator = this && this.__generator || function (thisArg, body) {\n  var _ = {\n      label: 0,\n      sent: function () {\n        if (t[0] & 1) throw t[1];\n        return t[1];\n      },\n      trys: [],\n      ops: []\n    },\n    f,\n    y,\n    t,\n    g;\n  return g = {\n    next: verb(0),\n    \"throw\": verb(1),\n    \"return\": verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n    while (_) try {\n      if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n      if (y = 0, t) op = [op[0] & 2, t.value];\n      switch (op[0]) {\n        case 0:\n        case 1:\n          t = op;\n          break;\n        case 4:\n          _.label++;\n          return {\n            value: op[1],\n            done: false\n          };\n        case 5:\n          _.label++;\n          y = op[1];\n          op = [0];\n          continue;\n        case 7:\n          op = _.ops.pop();\n          _.trys.pop();\n          continue;\n        default:\n          if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n            _ = 0;\n            continue;\n          }\n          if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n            _.label = op[1];\n            break;\n          }\n          if (op[0] === 6 && _.label < t[1]) {\n            _.label = t[1];\n            t = op;\n            break;\n          }\n          if (t && _.label < t[2]) {\n            _.label = t[2];\n            _.ops.push(op);\n            break;\n          }\n          if (t[2]) _.ops.pop();\n          _.trys.pop();\n          continue;\n      }\n      op = body.call(thisArg, _);\n    } catch (e) {\n      op = [6, e];\n      y = 0;\n    } finally {\n      f = t = 0;\n    }\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n};\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.OpenRPCDocumentDereferencingError = void 0;\nvar dereferencer_1 = __importDefault(require(\"@json-schema-tools/dereferencer\"));\nvar reference_resolver_1 = __importDefault(require(\"@json-schema-tools/reference-resolver\"));\nvar fast_safe_stringify_1 = __importDefault(require(\"fast-safe-stringify\"));\n/**\n * Provides an error interface for OpenRPC Document dereferencing problems\n *\n * @category Errors\n *\n */\nvar OpenRPCDocumentDereferencingError = /** @class */function () {\n  /**\n   * @param e The error that originated from jsonSchemaRefParser\n   */\n  function OpenRPCDocumentDereferencingError(e) {\n    this.name = \"OpenRPCDocumentDereferencingError\";\n    this.message = \"The json schema provided cannot be dereferenced. Received Error: \\n \" + e;\n  }\n  return OpenRPCDocumentDereferencingError;\n}();\nexports.OpenRPCDocumentDereferencingError = OpenRPCDocumentDereferencingError;\nvar derefItem = function (item, doc) {\n  return __awaiter(void 0, void 0, void 0, function () {\n    var $ref, err_1;\n    return __generator(this, function (_a) {\n      switch (_a.label) {\n        case 0:\n          $ref = item.$ref;\n          if ($ref === undefined) {\n            return [2 /*return*/, item];\n          }\n          _a.label = 1;\n        case 1:\n          _a.trys.push([1, 5,, 6]);\n          if (!reference_resolver_1.default.resolve) return [3 /*break*/, 3];\n          return [4 /*yield*/, reference_resolver_1.default.resolve($ref, doc)];\n        case 2:\n          return [2 /*return*/, _a.sent()];\n        case 3:\n          return [4 /*yield*/, reference_resolver_1.default($ref, doc)];\n        case 4:\n          // @ts-ignore\n          return [2 /*return*/, _a.sent()];\n        case 5:\n          err_1 = _a.sent();\n          throw new OpenRPCDocumentDereferencingError([\"unable to eval pointer against OpenRPC Document.\", \"error type: \" + err_1.name, \"error message: \" + err_1.message, \"instance: \" + err_1.instance, \"token: \" + err_1.token, \"pointer: \" + $ref, \"reference object: \" + fast_safe_stringify_1.default(item)].join(\"\\n\"));\n        case 6:\n          return [2 /*return*/];\n      }\n    });\n  });\n};\nvar derefItems = function (items, doc) {\n  return __awaiter(void 0, void 0, void 0, function () {\n    var dereffed, _i, items_1, i, _a, _b;\n    return __generator(this, function (_c) {\n      switch (_c.label) {\n        case 0:\n          dereffed = [];\n          _i = 0, items_1 = items;\n          _c.label = 1;\n        case 1:\n          if (!(_i < items_1.length)) return [3 /*break*/, 4];\n          i = items_1[_i];\n          _b = (_a = dereffed).push;\n          return [4 /*yield*/, derefItem(i, doc)];\n        case 2:\n          _b.apply(_a, [_c.sent()]);\n          _c.label = 3;\n        case 3:\n          _i++;\n          return [3 /*break*/, 1];\n        case 4:\n          return [2 /*return*/, dereffed];\n      }\n    });\n  });\n};\nvar handleSchemaWithSchemaComponents = function (s, schemaComponents) {\n  return __awaiter(void 0, void 0, void 0, function () {\n    var dereffer, dereffed, e_1;\n    return __generator(this, function (_a) {\n      switch (_a.label) {\n        case 0:\n          if (s === true || s === false) {\n            return [2 /*return*/, Promise.resolve(s)];\n          }\n          if (schemaComponents !== undefined) {\n            s.components = {\n              schemas: schemaComponents\n            };\n          }\n          dereffer = new dereferencer_1.default(s);\n          _a.label = 1;\n        case 1:\n          _a.trys.push([1, 3,, 4]);\n          return [4 /*yield*/, dereffer.resolve()];\n        case 2:\n          dereffed = _a.sent();\n          if (dereffed !== true && dereffed !== false) {\n            delete dereffed.components;\n          }\n          return [2 /*return*/, dereffed];\n        case 3:\n          e_1 = _a.sent();\n          throw new OpenRPCDocumentDereferencingError([\"Unable to parse reference inside of JSONSchema\", s.title ? \"Schema Title: \" + s.title : \"\", \"error message: \" + e_1.message, \"schema in question: \" + fast_safe_stringify_1.default(s)].join(\"\\n\"));\n        case 4:\n          return [2 /*return*/];\n      }\n    });\n  });\n};\nvar handleSchemaComponents = function (doc) {\n  return __awaiter(void 0, void 0, void 0, function () {\n    var schemas, schemaKeys, _i, schemaKeys_1, k, _a, _b;\n    return __generator(this, function (_c) {\n      switch (_c.label) {\n        case 0:\n          if (doc.components === undefined) {\n            return [2 /*return*/, Promise.resolve(doc)];\n          }\n          if (doc.components.schemas === undefined) {\n            return [2 /*return*/, Promise.resolve(doc)];\n          }\n          schemas = doc.components.schemas;\n          schemaKeys = Object.keys(schemas);\n          _i = 0, schemaKeys_1 = schemaKeys;\n          _c.label = 1;\n        case 1:\n          if (!(_i < schemaKeys_1.length)) return [3 /*break*/, 4];\n          k = schemaKeys_1[_i];\n          _a = schemas;\n          _b = k;\n          return [4 /*yield*/, handleSchemaWithSchemaComponents(schemas[k], schemas)];\n        case 2:\n          _a[_b] = _c.sent();\n          _c.label = 3;\n        case 3:\n          _i++;\n          return [3 /*break*/, 1];\n        case 4:\n          return [2 /*return*/, doc];\n      }\n    });\n  });\n};\nvar handleSchemasInsideContentDescriptorComponents = function (doc) {\n  return __awaiter(void 0, void 0, void 0, function () {\n    var cds, cdsKeys, componentSchemas, _i, cdsKeys_1, cdK, _a;\n    return __generator(this, function (_b) {\n      switch (_b.label) {\n        case 0:\n          if (doc.components === undefined) {\n            return [2 /*return*/, Promise.resolve(doc)];\n          }\n          if (doc.components.contentDescriptors === undefined) {\n            return [2 /*return*/, Promise.resolve(doc)];\n          }\n          cds = doc.components.contentDescriptors;\n          cdsKeys = Object.keys(cds);\n          componentSchemas = {};\n          if (doc.components.schemas) {\n            componentSchemas = doc.components.schemas;\n          }\n          _i = 0, cdsKeys_1 = cdsKeys;\n          _b.label = 1;\n        case 1:\n          if (!(_i < cdsKeys_1.length)) return [3 /*break*/, 4];\n          cdK = cdsKeys_1[_i];\n          _a = cds[cdK];\n          return [4 /*yield*/, handleSchemaWithSchemaComponents(cds[cdK].schema, componentSchemas)];\n        case 2:\n          _a.schema = _b.sent();\n          _b.label = 3;\n        case 3:\n          _i++;\n          return [3 /*break*/, 1];\n        case 4:\n          return [2 /*return*/, doc];\n      }\n    });\n  });\n};\nvar handleMethod = function (method, doc) {\n  return __awaiter(void 0, void 0, void 0, function () {\n    var _a, _b, _c, _d, _i, _e, exPairing, _f, _g, _h, _j, componentSchemas, params, _k, params_1, p, _l, result, _m;\n    return __generator(this, function (_o) {\n      switch (_o.label) {\n        case 0:\n          if (!(method.tags !== undefined)) return [3 /*break*/, 2];\n          _a = method;\n          return [4 /*yield*/, derefItems(method.tags, doc)];\n        case 1:\n          _a.tags = _o.sent();\n          _o.label = 2;\n        case 2:\n          if (!(method.errors !== undefined)) return [3 /*break*/, 4];\n          _b = method;\n          return [4 /*yield*/, derefItems(method.errors, doc)];\n        case 3:\n          _b.errors = _o.sent();\n          _o.label = 4;\n        case 4:\n          if (!(method.links !== undefined)) return [3 /*break*/, 6];\n          _c = method;\n          return [4 /*yield*/, derefItems(method.links, doc)];\n        case 5:\n          _c.links = _o.sent();\n          _o.label = 6;\n        case 6:\n          if (!(method.examples !== undefined)) return [3 /*break*/, 12];\n          _d = method;\n          return [4 /*yield*/, derefItems(method.examples, doc)];\n        case 7:\n          _d.examples = _o.sent();\n          _i = 0, _e = method.examples;\n          _o.label = 8;\n        case 8:\n          if (!(_i < _e.length)) return [3 /*break*/, 12];\n          exPairing = _e[_i];\n          _f = exPairing;\n          return [4 /*yield*/, derefItems(exPairing.params, doc)];\n        case 9:\n          _f.params = _o.sent();\n          _g = exPairing;\n          return [4 /*yield*/, derefItem(exPairing.result, doc)];\n        case 10:\n          _g.result = _o.sent();\n          _o.label = 11;\n        case 11:\n          _i++;\n          return [3 /*break*/, 8];\n        case 12:\n          _h = method;\n          return [4 /*yield*/, derefItems(method.params, doc)];\n        case 13:\n          _h.params = _o.sent();\n          _j = method;\n          return [4 /*yield*/, derefItem(method.result, doc)];\n        case 14:\n          _j.result = _o.sent();\n          componentSchemas = {};\n          if (doc.components && doc.components.schemas) {\n            componentSchemas = doc.components.schemas;\n          }\n          params = method.params;\n          _k = 0, params_1 = params;\n          _o.label = 15;\n        case 15:\n          if (!(_k < params_1.length)) return [3 /*break*/, 18];\n          p = params_1[_k];\n          _l = p;\n          return [4 /*yield*/, handleSchemaWithSchemaComponents(p.schema, componentSchemas)];\n        case 16:\n          _l.schema = _o.sent();\n          _o.label = 17;\n        case 17:\n          _k++;\n          return [3 /*break*/, 15];\n        case 18:\n          result = method.result;\n          _m = result;\n          return [4 /*yield*/, handleSchemaWithSchemaComponents(result.schema, componentSchemas)];\n        case 19:\n          _m.schema = _o.sent();\n          return [2 /*return*/, method];\n      }\n    });\n  });\n};\n/**\n * replaces $ref's within a document and its schemas. The replaced value will be a javascript object reference to the\n * real schema / open-rpc component\n *\n * @param schema The OpenRPC document\n *\n * @returns The same OpenRPC Document that was passed in, but with all $ref's dereferenced.\n *\n * @throws [[OpenRPCDocumentDereferencingError]]\n *\n * @example\n * ```typescript\n *\n * import { OpenRPC } from \"@open-rpc/meta-schema\"\n * import { dereferenceDocument } from \"@open-rpc/schema-utils-js\";\n *\n * try {\n *   const dereffedDocument = await dereferenceDocument({ ... }) as OpenRPC;\n * } catch (e) {\n *   // handle validation errors\n * }\n * ```\n *\n */\nfunction dereferenceDocument(openrpcDocument) {\n  return __awaiter(this, void 0, void 0, function () {\n    var derefDoc, methods, _i, _a, method, _b, _c;\n    return __generator(this, function (_d) {\n      switch (_d.label) {\n        case 0:\n          derefDoc = __assign({}, openrpcDocument);\n          return [4 /*yield*/, handleSchemaComponents(derefDoc)];\n        case 1:\n          derefDoc = _d.sent();\n          return [4 /*yield*/, handleSchemasInsideContentDescriptorComponents(derefDoc)];\n        case 2:\n          derefDoc = _d.sent();\n          methods = [];\n          _i = 0, _a = derefDoc.methods;\n          _d.label = 3;\n        case 3:\n          if (!(_i < _a.length)) return [3 /*break*/, 6];\n          method = _a[_i];\n          // @ts-ignore\n          _c = (_b = methods).push;\n          return [4 /*yield*/, handleMethod(method, derefDoc)];\n        case 4:\n          // @ts-ignore\n          _c.apply(_b, [_d.sent()]);\n          _d.label = 5;\n        case 5:\n          _i++;\n          return [3 /*break*/, 3];\n        case 6:\n          derefDoc.methods = methods;\n          return [2 /*return*/, derefDoc];\n      }\n    });\n  });\n}\nexports.default = dereferenceDocument;","map":{"version":3,"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","__awaiter","thisArg","_arguments","P","generator","adopt","value","resolve","Promise","reject","fulfilled","step","next","e","rejected","result","done","then","__generator","body","_","label","sent","trys","ops","f","y","g","verb","Symbol","iterator","v","op","TypeError","pop","push","__importDefault","mod","__esModule","defineProperty","exports","OpenRPCDocumentDereferencingError","dereferencer_1","require","reference_resolver_1","fast_safe_stringify_1","name","message","derefItem","item","doc","$ref","err_1","_a","undefined","default","instance","token","join","derefItems","items","dereffed","_i","items_1","_b","_c","handleSchemaWithSchemaComponents","schemaComponents","dereffer","e_1","components","schemas","title","handleSchemaComponents","schemaKeys","schemaKeys_1","k","keys","handleSchemasInsideContentDescriptorComponents","cds","cdsKeys","componentSchemas","cdsKeys_1","cdK","contentDescriptors","schema","handleMethod","method","_d","_e","exPairing","_f","_g","_h","_j","params","_k","params_1","_l","_m","_o","tags","errors","links","examples","dereferenceDocument","openrpcDocument","derefDoc","methods"],"sources":["/Users/mdabdurrazzak/RadInsu/node_modules/open-rpc-utils/build/dereference-document.js"],"sourcesContent":["\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.OpenRPCDocumentDereferencingError = void 0;\nvar dereferencer_1 = __importDefault(require(\"@json-schema-tools/dereferencer\"));\nvar reference_resolver_1 = __importDefault(require(\"@json-schema-tools/reference-resolver\"));\nvar fast_safe_stringify_1 = __importDefault(require(\"fast-safe-stringify\"));\n/**\n * Provides an error interface for OpenRPC Document dereferencing problems\n *\n * @category Errors\n *\n */\nvar OpenRPCDocumentDereferencingError = /** @class */ (function () {\n    /**\n     * @param e The error that originated from jsonSchemaRefParser\n     */\n    function OpenRPCDocumentDereferencingError(e) {\n        this.name = \"OpenRPCDocumentDereferencingError\";\n        this.message = \"The json schema provided cannot be dereferenced. Received Error: \\n \" + e;\n    }\n    return OpenRPCDocumentDereferencingError;\n}());\nexports.OpenRPCDocumentDereferencingError = OpenRPCDocumentDereferencingError;\nvar derefItem = function (item, doc) { return __awaiter(void 0, void 0, void 0, function () {\n    var $ref, err_1;\n    return __generator(this, function (_a) {\n        switch (_a.label) {\n            case 0:\n                $ref = item.$ref;\n                if ($ref === undefined) {\n                    return [2 /*return*/, item];\n                }\n                _a.label = 1;\n            case 1:\n                _a.trys.push([1, 5, , 6]);\n                if (!reference_resolver_1.default.resolve) return [3 /*break*/, 3];\n                return [4 /*yield*/, reference_resolver_1.default.resolve($ref, doc)];\n            case 2: return [2 /*return*/, _a.sent()];\n            case 3: return [4 /*yield*/, reference_resolver_1.default($ref, doc)];\n            case 4: \n            // @ts-ignore\n            return [2 /*return*/, _a.sent()];\n            case 5:\n                err_1 = _a.sent();\n                throw new OpenRPCDocumentDereferencingError([\n                    \"unable to eval pointer against OpenRPC Document.\",\n                    \"error type: \" + err_1.name,\n                    \"error message: \" + err_1.message,\n                    \"instance: \" + err_1.instance,\n                    \"token: \" + err_1.token,\n                    \"pointer: \" + $ref,\n                    \"reference object: \" + fast_safe_stringify_1.default(item)\n                ].join(\"\\n\"));\n            case 6: return [2 /*return*/];\n        }\n    });\n}); };\nvar derefItems = function (items, doc) { return __awaiter(void 0, void 0, void 0, function () {\n    var dereffed, _i, items_1, i, _a, _b;\n    return __generator(this, function (_c) {\n        switch (_c.label) {\n            case 0:\n                dereffed = [];\n                _i = 0, items_1 = items;\n                _c.label = 1;\n            case 1:\n                if (!(_i < items_1.length)) return [3 /*break*/, 4];\n                i = items_1[_i];\n                _b = (_a = dereffed).push;\n                return [4 /*yield*/, derefItem(i, doc)];\n            case 2:\n                _b.apply(_a, [_c.sent()]);\n                _c.label = 3;\n            case 3:\n                _i++;\n                return [3 /*break*/, 1];\n            case 4: return [2 /*return*/, dereffed];\n        }\n    });\n}); };\nvar handleSchemaWithSchemaComponents = function (s, schemaComponents) { return __awaiter(void 0, void 0, void 0, function () {\n    var dereffer, dereffed, e_1;\n    return __generator(this, function (_a) {\n        switch (_a.label) {\n            case 0:\n                if (s === true || s === false) {\n                    return [2 /*return*/, Promise.resolve(s)];\n                }\n                if (schemaComponents !== undefined) {\n                    s.components = { schemas: schemaComponents };\n                }\n                dereffer = new dereferencer_1.default(s);\n                _a.label = 1;\n            case 1:\n                _a.trys.push([1, 3, , 4]);\n                return [4 /*yield*/, dereffer.resolve()];\n            case 2:\n                dereffed = _a.sent();\n                if (dereffed !== true && dereffed !== false) {\n                    delete dereffed.components;\n                }\n                return [2 /*return*/, dereffed];\n            case 3:\n                e_1 = _a.sent();\n                throw new OpenRPCDocumentDereferencingError([\n                    \"Unable to parse reference inside of JSONSchema\",\n                    s.title ? \"Schema Title: \" + s.title : \"\",\n                    \"error message: \" + e_1.message,\n                    \"schema in question: \" + fast_safe_stringify_1.default(s)\n                ].join(\"\\n\"));\n            case 4: return [2 /*return*/];\n        }\n    });\n}); };\nvar handleSchemaComponents = function (doc) { return __awaiter(void 0, void 0, void 0, function () {\n    var schemas, schemaKeys, _i, schemaKeys_1, k, _a, _b;\n    return __generator(this, function (_c) {\n        switch (_c.label) {\n            case 0:\n                if (doc.components === undefined) {\n                    return [2 /*return*/, Promise.resolve(doc)];\n                }\n                if (doc.components.schemas === undefined) {\n                    return [2 /*return*/, Promise.resolve(doc)];\n                }\n                schemas = doc.components.schemas;\n                schemaKeys = Object.keys(schemas);\n                _i = 0, schemaKeys_1 = schemaKeys;\n                _c.label = 1;\n            case 1:\n                if (!(_i < schemaKeys_1.length)) return [3 /*break*/, 4];\n                k = schemaKeys_1[_i];\n                _a = schemas;\n                _b = k;\n                return [4 /*yield*/, handleSchemaWithSchemaComponents(schemas[k], schemas)];\n            case 2:\n                _a[_b] = _c.sent();\n                _c.label = 3;\n            case 3:\n                _i++;\n                return [3 /*break*/, 1];\n            case 4: return [2 /*return*/, doc];\n        }\n    });\n}); };\nvar handleSchemasInsideContentDescriptorComponents = function (doc) { return __awaiter(void 0, void 0, void 0, function () {\n    var cds, cdsKeys, componentSchemas, _i, cdsKeys_1, cdK, _a;\n    return __generator(this, function (_b) {\n        switch (_b.label) {\n            case 0:\n                if (doc.components === undefined) {\n                    return [2 /*return*/, Promise.resolve(doc)];\n                }\n                if (doc.components.contentDescriptors === undefined) {\n                    return [2 /*return*/, Promise.resolve(doc)];\n                }\n                cds = doc.components.contentDescriptors;\n                cdsKeys = Object.keys(cds);\n                componentSchemas = {};\n                if (doc.components.schemas) {\n                    componentSchemas = doc.components.schemas;\n                }\n                _i = 0, cdsKeys_1 = cdsKeys;\n                _b.label = 1;\n            case 1:\n                if (!(_i < cdsKeys_1.length)) return [3 /*break*/, 4];\n                cdK = cdsKeys_1[_i];\n                _a = cds[cdK];\n                return [4 /*yield*/, handleSchemaWithSchemaComponents(cds[cdK].schema, componentSchemas)];\n            case 2:\n                _a.schema = _b.sent();\n                _b.label = 3;\n            case 3:\n                _i++;\n                return [3 /*break*/, 1];\n            case 4: return [2 /*return*/, doc];\n        }\n    });\n}); };\nvar handleMethod = function (method, doc) { return __awaiter(void 0, void 0, void 0, function () {\n    var _a, _b, _c, _d, _i, _e, exPairing, _f, _g, _h, _j, componentSchemas, params, _k, params_1, p, _l, result, _m;\n    return __generator(this, function (_o) {\n        switch (_o.label) {\n            case 0:\n                if (!(method.tags !== undefined)) return [3 /*break*/, 2];\n                _a = method;\n                return [4 /*yield*/, derefItems(method.tags, doc)];\n            case 1:\n                _a.tags = _o.sent();\n                _o.label = 2;\n            case 2:\n                if (!(method.errors !== undefined)) return [3 /*break*/, 4];\n                _b = method;\n                return [4 /*yield*/, derefItems(method.errors, doc)];\n            case 3:\n                _b.errors = _o.sent();\n                _o.label = 4;\n            case 4:\n                if (!(method.links !== undefined)) return [3 /*break*/, 6];\n                _c = method;\n                return [4 /*yield*/, derefItems(method.links, doc)];\n            case 5:\n                _c.links = _o.sent();\n                _o.label = 6;\n            case 6:\n                if (!(method.examples !== undefined)) return [3 /*break*/, 12];\n                _d = method;\n                return [4 /*yield*/, derefItems(method.examples, doc)];\n            case 7:\n                _d.examples = _o.sent();\n                _i = 0, _e = method.examples;\n                _o.label = 8;\n            case 8:\n                if (!(_i < _e.length)) return [3 /*break*/, 12];\n                exPairing = _e[_i];\n                _f = exPairing;\n                return [4 /*yield*/, derefItems(exPairing.params, doc)];\n            case 9:\n                _f.params = _o.sent();\n                _g = exPairing;\n                return [4 /*yield*/, derefItem(exPairing.result, doc)];\n            case 10:\n                _g.result = _o.sent();\n                _o.label = 11;\n            case 11:\n                _i++;\n                return [3 /*break*/, 8];\n            case 12:\n                _h = method;\n                return [4 /*yield*/, derefItems(method.params, doc)];\n            case 13:\n                _h.params = _o.sent();\n                _j = method;\n                return [4 /*yield*/, derefItem(method.result, doc)];\n            case 14:\n                _j.result = _o.sent();\n                componentSchemas = {};\n                if (doc.components && doc.components.schemas) {\n                    componentSchemas = doc.components.schemas;\n                }\n                params = method.params;\n                _k = 0, params_1 = params;\n                _o.label = 15;\n            case 15:\n                if (!(_k < params_1.length)) return [3 /*break*/, 18];\n                p = params_1[_k];\n                _l = p;\n                return [4 /*yield*/, handleSchemaWithSchemaComponents(p.schema, componentSchemas)];\n            case 16:\n                _l.schema = _o.sent();\n                _o.label = 17;\n            case 17:\n                _k++;\n                return [3 /*break*/, 15];\n            case 18:\n                result = method.result;\n                _m = result;\n                return [4 /*yield*/, handleSchemaWithSchemaComponents(result.schema, componentSchemas)];\n            case 19:\n                _m.schema = _o.sent();\n                return [2 /*return*/, method];\n        }\n    });\n}); };\n/**\n * replaces $ref's within a document and its schemas. The replaced value will be a javascript object reference to the\n * real schema / open-rpc component\n *\n * @param schema The OpenRPC document\n *\n * @returns The same OpenRPC Document that was passed in, but with all $ref's dereferenced.\n *\n * @throws [[OpenRPCDocumentDereferencingError]]\n *\n * @example\n * ```typescript\n *\n * import { OpenRPC } from \"@open-rpc/meta-schema\"\n * import { dereferenceDocument } from \"@open-rpc/schema-utils-js\";\n *\n * try {\n *   const dereffedDocument = await dereferenceDocument({ ... }) as OpenRPC;\n * } catch (e) {\n *   // handle validation errors\n * }\n * ```\n *\n */\nfunction dereferenceDocument(openrpcDocument) {\n    return __awaiter(this, void 0, void 0, function () {\n        var derefDoc, methods, _i, _a, method, _b, _c;\n        return __generator(this, function (_d) {\n            switch (_d.label) {\n                case 0:\n                    derefDoc = __assign({}, openrpcDocument);\n                    return [4 /*yield*/, handleSchemaComponents(derefDoc)];\n                case 1:\n                    derefDoc = _d.sent();\n                    return [4 /*yield*/, handleSchemasInsideContentDescriptorComponents(derefDoc)];\n                case 2:\n                    derefDoc = _d.sent();\n                    methods = [];\n                    _i = 0, _a = derefDoc.methods;\n                    _d.label = 3;\n                case 3:\n                    if (!(_i < _a.length)) return [3 /*break*/, 6];\n                    method = _a[_i];\n                    // @ts-ignore\n                    _c = (_b = methods).push;\n                    return [4 /*yield*/, handleMethod(method, derefDoc)];\n                case 4:\n                    // @ts-ignore\n                    _c.apply(_b, [_d.sent()]);\n                    _d.label = 5;\n                case 5:\n                    _i++;\n                    return [3 /*break*/, 3];\n                case 6:\n                    derefDoc.methods = methods;\n                    return [2 /*return*/, derefDoc];\n            }\n        });\n    });\n}\nexports.default = dereferenceDocument;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}