{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.addressRegexDecoder = exports.addressFromUnsafe = exports.validatorAddressObjectDecoder = exports.addressObjectDecoder = exports.validatorAddressDecoder = exports.addressDecoder = exports.networkDecoder = exports.transactionIdentifierDecoder = exports.URLDecoder = exports.RRIDecoder = exports.dateDecoder = exports.amountDecoder = void 0;\nconst data_formats_1 = require(\"../../../data-formats\");\nconst neverthrow_1 = require(\"neverthrow\");\nconst account_1 = require(\"@radixdlt/account\");\nconst primitives_1 = require(\"../../../primitives\");\nconst util_1 = require(\"../../../util\");\nconst dto_1 = require(\"../dto\");\nconst amountDecoder = (...keys) => (0, data_formats_1.decoder)((value, key) => key !== undefined && keys.includes(key) && (0, util_1.isString)(value) ? primitives_1.Amount.fromUnsafe(value) : undefined);\nexports.amountDecoder = amountDecoder;\nconst dateDecoder = (...keys) => (0, data_formats_1.decoder)((value, key) => key !== undefined && keys.includes(key) && (0, util_1.isString)(value) ? (0, neverthrow_1.ok)(new Date(value)) : undefined);\nexports.dateDecoder = dateDecoder;\nconst RRIDecoder = (...keys) => (0, data_formats_1.decoder)((value, key) => key !== undefined && keys.includes(key) && (0, util_1.isString)(value) ? account_1.ResourceIdentifier.fromUnsafe(value) : undefined);\nexports.RRIDecoder = RRIDecoder;\nconst URLDecoder = (...keys) => (0, data_formats_1.decoder)((value, key) => {\n  if (key !== undefined && keys.includes(key) && (0, util_1.isString)(value)) {\n    try {\n      return (0, neverthrow_1.ok)(new URL(value));\n    } catch (_a) {\n      return undefined;\n    }\n  }\n  return undefined;\n});\nexports.URLDecoder = URLDecoder;\nconst transactionIdentifierDecoder = (...keys) => (0, data_formats_1.decoder)((value, key) => key !== undefined && keys.includes(key) && (0, util_1.isString)(value) ? dto_1.TransactionIdentifier.create(value) : undefined);\nexports.transactionIdentifierDecoder = transactionIdentifierDecoder;\nconst networkDecoder = (...keys) => (0, data_formats_1.decoder)((value, key) => key !== undefined && keys.includes(key) && typeof value === 'number' && Object.keys(primitives_1.NetworkId).includes(value.toString()) ?\n// @ts-ignore\n(0, neverthrow_1.ok)(primitives_1.NetworkId[value.toString()]) : undefined);\nexports.networkDecoder = networkDecoder;\nconst addressDecoder = (...keys) => (0, data_formats_1.decoder)((value, key) => key !== undefined && keys.includes(key) && (0, util_1.isString)(value) ? account_1.AccountAddress.fromUnsafe(value) : undefined);\nexports.addressDecoder = addressDecoder;\nconst validatorAddressDecoder = (...keys) => (0, data_formats_1.decoder)((value, key) => key !== undefined && keys.includes(key) && (0, util_1.isString)(value) ? account_1.ValidatorAddress.fromUnsafe(value) : undefined);\nexports.validatorAddressDecoder = validatorAddressDecoder;\nconst addressObjectDecoder = (...keys) => (0, data_formats_1.decoder)((value, key) => key !== undefined && keys.includes(key) && (0, util_1.isObject)(value) && value['address'] ? account_1.AccountAddress.fromUnsafe(value['address']) : undefined);\nexports.addressObjectDecoder = addressObjectDecoder;\nconst validatorAddressObjectDecoder = (...keys) => (0, data_formats_1.decoder)((value, key) => key !== undefined && keys.includes(key) && (0, util_1.isObject)(value) && value['address'] ? account_1.ValidatorAddress.fromUnsafe(value['address']) : undefined);\nexports.validatorAddressObjectDecoder = validatorAddressObjectDecoder;\nconst validatorAddressPattern = /^(r|t|d)v[0-9]?1[023456789ACDEFGHJKLMNPQRSTUVWXYZacdefghjklmnpqrstuvwxyz]{6,69}$/;\nconst accountAddressPattern = /^(r|t|d)dx[0-9]?1[023456789ACDEFGHJKLMNPQRSTUVWXYZacdefghjklmnpqrstuvwxyz]{6,69}$/;\nconst addressFromUnsafe = address => validatorAddressPattern.test(address) ? account_1.ValidatorAddress.fromUnsafe(address) : accountAddressPattern.test(address) ? account_1.AccountAddress.fromUnsafe(address) : undefined;\nexports.addressFromUnsafe = addressFromUnsafe;\nconst addressRegexDecoder = (...keys) =>\n// @ts-ignore\n(0, data_formats_1.decoder)((value, key) => {\n  const isValidString = key !== undefined && keys.includes(key) && (0, util_1.isString)(value);\n  if (!isValidString) {\n    return undefined;\n  }\n  return (0, exports.addressFromUnsafe)(value);\n});\nexports.addressRegexDecoder = addressRegexDecoder;","map":{"version":3,"names":["data_formats_1","require","neverthrow_1","account_1","primitives_1","util_1","dto_1","amountDecoder","keys","decoder","value","key","undefined","includes","isString","Amount","fromUnsafe","exports","dateDecoder","ok","Date","RRIDecoder","ResourceIdentifier","URLDecoder","URL","_a","transactionIdentifierDecoder","TransactionIdentifier","create","networkDecoder","Object","NetworkId","toString","addressDecoder","AccountAddress","validatorAddressDecoder","ValidatorAddress","addressObjectDecoder","isObject","validatorAddressObjectDecoder","validatorAddressPattern","accountAddressPattern","addressFromUnsafe","address","test","addressRegexDecoder","isValidString"],"sources":["/Users/mdabdurrazzak/RadInsu/node_modules/@radixdlt/application/src/api/decoders.ts"],"sourcesContent":["import { decoder } from '../../../data-formats'\nimport { ok } from 'neverthrow'\nimport {\n\tAccountAddress,\n\tValidatorAddress,\n\tResourceIdentifier,\n\tValidatorAddressOrUnsafeInput,\n\tAddressOrUnsafeInput,\n} from '@radixdlt/account'\nimport { Amount, NetworkId } from '../../../primitives'\nimport { isObject, isString } from '../../../util'\nimport { TransactionIdentifier } from '../dto'\n\nexport const amountDecoder = (...keys: string[]) =>\n\tdecoder((value, key) =>\n\t\tkey !== undefined && keys.includes(key) && isString(value)\n\t\t\t? Amount.fromUnsafe(value)\n\t\t\t: undefined,\n\t)\n\nexport const dateDecoder = (...keys: string[]) =>\n\tdecoder((value, key) =>\n\t\tkey !== undefined && keys.includes(key) && isString(value)\n\t\t\t? ok(new Date(value))\n\t\t\t: undefined,\n\t)\n\nexport const RRIDecoder = (...keys: string[]) =>\n\tdecoder((value, key) =>\n\t\tkey !== undefined && keys.includes(key) && isString(value)\n\t\t\t? ResourceIdentifier.fromUnsafe(value)\n\t\t\t: undefined,\n\t)\n\nexport const URLDecoder = (...keys: string[]) =>\n\tdecoder((value, key) => {\n\t\tif (key !== undefined && keys.includes(key) && isString(value)) {\n\t\t\ttry {\n\t\t\t\treturn ok(new URL(value))\n\t\t\t} catch {\n\t\t\t\treturn undefined\n\t\t\t}\n\t\t}\n\t\treturn undefined\n\t})\n\nexport const transactionIdentifierDecoder = (...keys: string[]) =>\n\tdecoder((value, key) =>\n\t\tkey !== undefined && keys.includes(key) && isString(value)\n\t\t\t? TransactionIdentifier.create(value)\n\t\t\t: undefined,\n\t)\n\nexport const networkDecoder = (...keys: string[]) =>\n\tdecoder((value, key) =>\n\t\tkey !== undefined &&\n\t\tkeys.includes(key) &&\n\t\ttypeof value === 'number' &&\n\t\tObject.keys(NetworkId).includes(value.toString())\n\t\t\t? // @ts-ignore\n\t\t\t  ok(NetworkId[value.toString()])\n\t\t\t: undefined,\n\t)\n\nexport const addressDecoder = (...keys: string[]) =>\n\tdecoder((value, key) =>\n\t\tkey !== undefined && keys.includes(key) && isString(value)\n\t\t\t? AccountAddress.fromUnsafe(value)\n\t\t\t: undefined,\n\t)\n\nexport const validatorAddressDecoder = (...keys: string[]) =>\n\tdecoder((value, key) =>\n\t\tkey !== undefined && keys.includes(key) && isString(value)\n\t\t\t? ValidatorAddress.fromUnsafe(value)\n\t\t\t: undefined,\n\t)\n\nexport const addressObjectDecoder = (...keys: string[]) =>\n\tdecoder((value, key) =>\n\t\tkey !== undefined &&\n\t\tkeys.includes(key) &&\n\t\tisObject(value) &&\n\t\tvalue['address']\n\t\t\t? AccountAddress.fromUnsafe(\n\t\t\t\t\tvalue['address'] as AddressOrUnsafeInput,\n\t\t\t  )\n\t\t\t: undefined,\n\t)\n\nexport const validatorAddressObjectDecoder = (...keys: string[]) =>\n\tdecoder((value, key) =>\n\t\tkey !== undefined &&\n\t\tkeys.includes(key) &&\n\t\tisObject(value) &&\n\t\tvalue['address']\n\t\t\t? ValidatorAddress.fromUnsafe(\n\t\t\t\t\tvalue['address'] as ValidatorAddressOrUnsafeInput,\n\t\t\t  )\n\t\t\t: undefined,\n\t)\n\nconst validatorAddressPattern = /^(r|t|d)v[0-9]?1[023456789ACDEFGHJKLMNPQRSTUVWXYZacdefghjklmnpqrstuvwxyz]{6,69}$/\n\nconst accountAddressPattern = /^(r|t|d)dx[0-9]?1[023456789ACDEFGHJKLMNPQRSTUVWXYZacdefghjklmnpqrstuvwxyz]{6,69}$/\n\nexport const addressFromUnsafe = (address: string) =>\n\tvalidatorAddressPattern.test(address)\n\t\t? ValidatorAddress.fromUnsafe(address)\n\t\t: accountAddressPattern.test(address)\n\t\t? AccountAddress.fromUnsafe(address)\n\t\t: undefined\n\nexport const addressRegexDecoder = (...keys: string[]) =>\n\t// @ts-ignore\n\tdecoder((value, key) => {\n\t\tconst isValidString =\n\t\t\tkey !== undefined && keys.includes(key) && isString(value)\n\n\t\tif (!isValidString) {\n\t\t\treturn undefined\n\t\t}\n\n\t\treturn addressFromUnsafe(value)\n\t})\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}