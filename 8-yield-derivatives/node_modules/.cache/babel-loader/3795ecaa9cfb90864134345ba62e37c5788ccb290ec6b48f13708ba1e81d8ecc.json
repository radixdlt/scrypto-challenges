{"ast":null,"code":"/** PURE_IMPORTS_START tslib,_Subscriber,_Subject PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Subscriber } from '../Subscriber';\nimport { Subject } from '../Subject';\nexport function windowCount(windowSize, startWindowEvery) {\n  if (startWindowEvery === void 0) {\n    startWindowEvery = 0;\n  }\n  return function windowCountOperatorFunction(source) {\n    return source.lift(new WindowCountOperator(windowSize, startWindowEvery));\n  };\n}\nvar WindowCountOperator = /*@__PURE__*/function () {\n  function WindowCountOperator(windowSize, startWindowEvery) {\n    this.windowSize = windowSize;\n    this.startWindowEvery = startWindowEvery;\n  }\n  WindowCountOperator.prototype.call = function (subscriber, source) {\n    return source.subscribe(new WindowCountSubscriber(subscriber, this.windowSize, this.startWindowEvery));\n  };\n  return WindowCountOperator;\n}();\nvar WindowCountSubscriber = /*@__PURE__*/function (_super) {\n  tslib_1.__extends(WindowCountSubscriber, _super);\n  function WindowCountSubscriber(destination, windowSize, startWindowEvery) {\n    var _this = _super.call(this, destination) || this;\n    _this.destination = destination;\n    _this.windowSize = windowSize;\n    _this.startWindowEvery = startWindowEvery;\n    _this.windows = [new Subject()];\n    _this.count = 0;\n    destination.next(_this.windows[0]);\n    return _this;\n  }\n  WindowCountSubscriber.prototype._next = function (value) {\n    var startWindowEvery = this.startWindowEvery > 0 ? this.startWindowEvery : this.windowSize;\n    var destination = this.destination;\n    var windowSize = this.windowSize;\n    var windows = this.windows;\n    var len = windows.length;\n    for (var i = 0; i < len && !this.closed; i++) {\n      windows[i].next(value);\n    }\n    var c = this.count - windowSize + 1;\n    if (c >= 0 && c % startWindowEvery === 0 && !this.closed) {\n      windows.shift().complete();\n    }\n    if (++this.count % startWindowEvery === 0 && !this.closed) {\n      var window_1 = new Subject();\n      windows.push(window_1);\n      destination.next(window_1);\n    }\n  };\n  WindowCountSubscriber.prototype._error = function (err) {\n    var windows = this.windows;\n    if (windows) {\n      while (windows.length > 0 && !this.closed) {\n        windows.shift().error(err);\n      }\n    }\n    this.destination.error(err);\n  };\n  WindowCountSubscriber.prototype._complete = function () {\n    var windows = this.windows;\n    if (windows) {\n      while (windows.length > 0 && !this.closed) {\n        windows.shift().complete();\n      }\n    }\n    this.destination.complete();\n  };\n  WindowCountSubscriber.prototype._unsubscribe = function () {\n    this.count = 0;\n    this.windows = null;\n  };\n  return WindowCountSubscriber;\n}(Subscriber);","map":{"version":3,"names":["tslib_1","Subscriber","Subject","windowCount","windowSize","startWindowEvery","windowCountOperatorFunction","source","lift","WindowCountOperator","prototype","call","subscriber","subscribe","WindowCountSubscriber","_super","__extends","destination","_this","count","next","windows","_next","value","len","length","i","closed","c","shift","complete","window_1","push","_error","err","error","_complete","_unsubscribe"],"sources":["/Users/mdabdurrazzak/RadInsu/node_modules/radixdlt/node_modules/rxjs/src/internal/operators/windowCount.ts"],"sourcesContent":["import { Operator } from '../Operator';\nimport { Subscriber } from '../Subscriber';\nimport { Observable } from '../Observable';\nimport { Subject } from '../Subject';\nimport { OperatorFunction } from '../types';\n\n/**\n * Branch out the source Observable values as a nested Observable with each\n * nested Observable emitting at most `windowSize` values.\n *\n * <span class=\"informal\">It's like {@link bufferCount}, but emits a nested\n * Observable instead of an array.</span>\n *\n * ![](windowCount.png)\n *\n * Returns an Observable that emits windows of items it collects from the source\n * Observable. The output Observable emits windows every `startWindowEvery`\n * items, each containing no more than `windowSize` items. When the source\n * Observable completes or encounters an error, the output Observable emits\n * the current window and propagates the notification from the source\n * Observable. If `startWindowEvery` is not provided, then new windows are\n * started immediately at the start of the source and when each window completes\n * with size `windowSize`.\n *\n * ## Examples\n * Ignore every 3rd click event, starting from the first one\n * ```ts\n * import { fromEvent } from 'rxjs';\n * import { windowCount, map, mergeAll, skip } from 'rxjs/operators';\n *\n * const clicks = fromEvent(document, 'click');\n * const result = clicks.pipe(\n *   windowCount(3),\n *   map(win => win.pipe(skip(1))), // skip first of every 3 clicks\n *   mergeAll()                     // flatten the Observable-of-Observables\n * );\n * result.subscribe(x => console.log(x));\n * ```\n *\n * Ignore every 3rd click event, starting from the third one\n * ```ts\n * import { fromEvent } from 'rxjs';\n * import { windowCount, mergeAll } from 'rxjs/operators';\n *\n * const clicks = fromEvent(document, 'click');\n * const result = clicks.pipe(\n *   windowCount(2, 3),\n *   mergeAll(),              // flatten the Observable-of-Observables\n * );\n * result.subscribe(x => console.log(x));\n * ```\n *\n * @see {@link window}\n * @see {@link windowTime}\n * @see {@link windowToggle}\n * @see {@link windowWhen}\n * @see {@link bufferCount}\n *\n * @param {number} windowSize The maximum number of values emitted by each\n * window.\n * @param {number} [startWindowEvery] Interval at which to start a new window.\n * For example if `startWindowEvery` is `2`, then a new window will be started\n * on every other value from the source. A new window is started at the\n * beginning of the source by default.\n * @return {Observable<Observable<T>>} An Observable of windows, which in turn\n * are Observable of values.\n * @method windowCount\n * @owner Observable\n */\nexport function windowCount<T>(windowSize: number,\n                               startWindowEvery: number = 0): OperatorFunction<T, Observable<T>> {\n  return function windowCountOperatorFunction(source: Observable<T>) {\n    return source.lift(new WindowCountOperator<T>(windowSize, startWindowEvery));\n  };\n}\n\nclass WindowCountOperator<T> implements Operator<T, Observable<T>> {\n\n  constructor(private windowSize: number,\n              private startWindowEvery: number) {\n  }\n\n  call(subscriber: Subscriber<Observable<T>>, source: any): any {\n    return source.subscribe(new WindowCountSubscriber(subscriber, this.windowSize, this.startWindowEvery));\n  }\n}\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nclass WindowCountSubscriber<T> extends Subscriber<T> {\n  private windows: Subject<T>[] = [ new Subject<T>() ];\n  private count: number = 0;\n\n  constructor(protected destination: Subscriber<Observable<T>>,\n              private windowSize: number,\n              private startWindowEvery: number) {\n    super(destination);\n    destination.next(this.windows[0]);\n  }\n\n  protected _next(value: T) {\n    const startWindowEvery = (this.startWindowEvery > 0) ? this.startWindowEvery : this.windowSize;\n    const destination = this.destination;\n    const windowSize = this.windowSize;\n    const windows = this.windows;\n    const len = windows.length;\n\n    for (let i = 0; i < len && !this.closed; i++) {\n      windows[i].next(value);\n    }\n    const c = this.count - windowSize + 1;\n    if (c >= 0 && c % startWindowEvery === 0 && !this.closed) {\n      windows.shift().complete();\n    }\n    if (++this.count % startWindowEvery === 0 && !this.closed) {\n      const window = new Subject<T>();\n      windows.push(window);\n      destination.next(window);\n    }\n  }\n\n  protected _error(err: any) {\n    const windows = this.windows;\n    if (windows) {\n      while (windows.length > 0 && !this.closed) {\n        windows.shift().error(err);\n      }\n    }\n    this.destination.error(err);\n  }\n\n  protected _complete() {\n    const windows = this.windows;\n    if (windows) {\n      while (windows.length > 0 && !this.closed) {\n        windows.shift().complete();\n      }\n    }\n    this.destination.complete();\n  }\n\n  protected _unsubscribe() {\n    this.count = 0;\n    this.windows = null;\n  }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}