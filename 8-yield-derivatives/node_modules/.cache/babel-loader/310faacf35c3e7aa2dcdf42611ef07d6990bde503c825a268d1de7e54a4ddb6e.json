{"ast":null,"code":"import'./profile.css';import React,{useEffect,useState}from\"react\";import{RadixDappToolkit,RadixNetwork,DataRequestBuilder}from'@radixdlt/radix-dapp-toolkit';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Profile=()=>{const[account,setAccount]=useState(null);const[rdt,setRdt]=useState(null);const[loading,setLoading]=useState(true);// Add loading state\nconst loadAccount=async()=>{try{const newAccount=await rdt.keyManager.createAccount();if(newAccount){setAccount(newAccount);}}catch(error){console.error(\"Error loading account:\",error);}};useEffect(()=>{const initializeToolkit=async()=>{try{const newRdt=new RadixDappToolkit({dAppDefinitionAddress:'account_tdx_2_12xxk4dqhg9dz53p745qhpr5tr2k2al4mpx3296tr8k78kna6rkcgsz',// Use your dApp definition address\nnetworkId:RadixNetwork.Stokenet,// Replace with the appropriate network ID\napplicationName:'Infix',applicationVersion:'1.0.0'});setRdt(newRdt);setLoading(false);// Update loading state when toolkit is initialized\nconsole.log(\"Radix Dapp Toolkit initialized successfully\");}catch(error){console.error('Error initializing Radix Dapp Toolkit:',error);}};initializeToolkit();return()=>{// Clean up if necessary\n};},[]);useEffect(()=>{if(rdt){// Fetch the user's account address\nrdt.walletApi.setRequestData(DataRequestBuilder.accounts().atLeast(1));rdt.walletApi.walletData$.subscribe(walletData=>{console.log(\"subscription wallet data: \",walletData);if(walletData.accounts.length>0){setAccount(walletData.accounts[0].address);}});}},[rdt]);const handleConnectWallet=async()=>{try{if(rdt){await rdt.account.connect();loadAccount();}else{console.error(\"Radix Dapp Toolkit is not initialized.\");}}catch(error){console.error(\"Error connecting to Radix Wallet Connector:\",error);}};return/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"aboutUs\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"button-container\",children:!loading&&!account&&/*#__PURE__*/_jsx(\"button\",{className:\"wallet-button\",onClick:handleConnectWallet,children:\"Connect Wallet\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"welcome\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Welcome Back, Alex!\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Wow! You spent 725 minutes with your favorite artist this year!\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"button-container\",children:account&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"Account Address: \",account]}),/*#__PURE__*/_jsx(\"p\",{children:\"Hello\"})]})})]})});};export default Profile;","map":{"version":3,"names":["React","useEffect","useState","RadixDappToolkit","RadixNetwork","DataRequestBuilder","jsx","_jsx","jsxs","_jsxs","Profile","account","setAccount","rdt","setRdt","loading","setLoading","loadAccount","newAccount","keyManager","createAccount","error","console","initializeToolkit","newRdt","dAppDefinitionAddress","networkId","Stokenet","applicationName","applicationVersion","log","walletApi","setRequestData","accounts","atLeast","walletData$","subscribe","walletData","length","address","handleConnectWallet","connect","className","children","onClick"],"sources":["/Users/mdabdurrazzak/RadInsu/src/Profile.js"],"sourcesContent":["import './profile.css';\nimport React, { useEffect, useState } from \"react\";\nimport { RadixDappToolkit, RadixNetwork, DataRequestBuilder } from '@radixdlt/radix-dapp-toolkit';\n\nconst Profile = () => {\n  const [account, setAccount] = useState(null);\n  const [rdt, setRdt] = useState(null);\n  const [loading, setLoading] = useState(true); // Add loading state\n\n  const loadAccount = async () => {\n    try {\n      const newAccount = await rdt.keyManager.createAccount();\n      if (newAccount) {\n        setAccount(newAccount);\n      }\n    } catch (error) {\n      console.error(\"Error loading account:\", error);\n    }\n  };\n\n  useEffect(() => {\n    const initializeToolkit = async () => {\n      try {\n        const newRdt = new RadixDappToolkit({\n          dAppDefinitionAddress: 'account_tdx_2_12xxk4dqhg9dz53p745qhpr5tr2k2al4mpx3296tr8k78kna6rkcgsz', // Use your dApp definition address\n          networkId: RadixNetwork.Stokenet, // Replace with the appropriate network ID\n          applicationName: 'Infix',\n          applicationVersion: '1.0.0',\n        });\n        setRdt(newRdt);\n        setLoading(false); // Update loading state when toolkit is initialized\n        console.log(\"Radix Dapp Toolkit initialized successfully\");\n      } catch (error) {\n        console.error('Error initializing Radix Dapp Toolkit:', error);\n      }\n    };\n\n    initializeToolkit();\n\n    return () => {\n      // Clean up if necessary\n    };\n  }, []);\n\n  useEffect(() => {\n    if (rdt) {\n      // Fetch the user's account address\n      rdt.walletApi.setRequestData(DataRequestBuilder.accounts().atLeast(1));\n      rdt.walletApi.walletData$.subscribe((walletData) => {\n        console.log(\"subscription wallet data: \", walletData);\n        if (walletData.accounts.length > 0) {\n          setAccount(walletData.accounts[0].address);\n        }\n      });\n    }\n  }, [rdt]);\n\n  const handleConnectWallet = async () => {\n    try {\n      if (rdt) {\n        await rdt.account.connect();\n        loadAccount();\n      } else {\n        console.error(\"Radix Dapp Toolkit is not initialized.\");\n      }\n    } catch (error) {\n      console.error(\"Error connecting to Radix Wallet Connector:\", error);\n    }\n  };\n\n  return (\n    <div className=\"container\">\n      <div className=\"aboutUs\">\n        <div className=\"button-container\">\n          {!loading && !account && (\n            <button className=\"wallet-button\" onClick={handleConnectWallet}>Connect Wallet</button>\n          )}\n        </div>\n        <div className=\"welcome\">\n          <h2>Welcome Back, Alex!</h2>\n          <p>Wow! You spent 725 minutes with your favorite artist this year!</p>\n        </div>\n        <div className=\"button-container\">\n          {account && (\n            <div>\n              <p>Account Address: {account}</p>\n              <p>Hello</p>\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Profile;\n"],"mappings":"AAAA,MAAO,eAAe,CACtB,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,OAASC,gBAAgB,CAAEC,YAAY,CAAEC,kBAAkB,KAAQ,8BAA8B,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAElG,KAAM,CAAAC,OAAO,CAAGA,CAAA,GAAM,CACpB,KAAM,CAACC,OAAO,CAAEC,UAAU,CAAC,CAAGV,QAAQ,CAAC,IAAI,CAAC,CAC5C,KAAM,CAACW,GAAG,CAAEC,MAAM,CAAC,CAAGZ,QAAQ,CAAC,IAAI,CAAC,CACpC,KAAM,CAACa,OAAO,CAAEC,UAAU,CAAC,CAAGd,QAAQ,CAAC,IAAI,CAAC,CAAE;AAE9C,KAAM,CAAAe,WAAW,CAAG,KAAAA,CAAA,GAAY,CAC9B,GAAI,CACF,KAAM,CAAAC,UAAU,CAAG,KAAM,CAAAL,GAAG,CAACM,UAAU,CAACC,aAAa,CAAC,CAAC,CACvD,GAAIF,UAAU,CAAE,CACdN,UAAU,CAACM,UAAU,CAAC,CACxB,CACF,CAAE,MAAOG,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,wBAAwB,CAAEA,KAAK,CAAC,CAChD,CACF,CAAC,CAEDpB,SAAS,CAAC,IAAM,CACd,KAAM,CAAAsB,iBAAiB,CAAG,KAAAA,CAAA,GAAY,CACpC,GAAI,CACF,KAAM,CAAAC,MAAM,CAAG,GAAI,CAAArB,gBAAgB,CAAC,CAClCsB,qBAAqB,CAAE,uEAAuE,CAAE;AAChGC,SAAS,CAAEtB,YAAY,CAACuB,QAAQ,CAAE;AAClCC,eAAe,CAAE,OAAO,CACxBC,kBAAkB,CAAE,OACtB,CAAC,CAAC,CACFf,MAAM,CAACU,MAAM,CAAC,CACdR,UAAU,CAAC,KAAK,CAAC,CAAE;AACnBM,OAAO,CAACQ,GAAG,CAAC,6CAA6C,CAAC,CAC5D,CAAE,MAAOT,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,wCAAwC,CAAEA,KAAK,CAAC,CAChE,CACF,CAAC,CAEDE,iBAAiB,CAAC,CAAC,CAEnB,MAAO,IAAM,CACX;AAAA,CACD,CACH,CAAC,CAAE,EAAE,CAAC,CAENtB,SAAS,CAAC,IAAM,CACd,GAAIY,GAAG,CAAE,CACP;AACAA,GAAG,CAACkB,SAAS,CAACC,cAAc,CAAC3B,kBAAkB,CAAC4B,QAAQ,CAAC,CAAC,CAACC,OAAO,CAAC,CAAC,CAAC,CAAC,CACtErB,GAAG,CAACkB,SAAS,CAACI,WAAW,CAACC,SAAS,CAAEC,UAAU,EAAK,CAClDf,OAAO,CAACQ,GAAG,CAAC,4BAA4B,CAAEO,UAAU,CAAC,CACrD,GAAIA,UAAU,CAACJ,QAAQ,CAACK,MAAM,CAAG,CAAC,CAAE,CAClC1B,UAAU,CAACyB,UAAU,CAACJ,QAAQ,CAAC,CAAC,CAAC,CAACM,OAAO,CAAC,CAC5C,CACF,CAAC,CAAC,CACJ,CACF,CAAC,CAAE,CAAC1B,GAAG,CAAC,CAAC,CAET,KAAM,CAAA2B,mBAAmB,CAAG,KAAAA,CAAA,GAAY,CACtC,GAAI,CACF,GAAI3B,GAAG,CAAE,CACP,KAAM,CAAAA,GAAG,CAACF,OAAO,CAAC8B,OAAO,CAAC,CAAC,CAC3BxB,WAAW,CAAC,CAAC,CACf,CAAC,IAAM,CACLK,OAAO,CAACD,KAAK,CAAC,wCAAwC,CAAC,CACzD,CACF,CAAE,MAAOA,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,6CAA6C,CAAEA,KAAK,CAAC,CACrE,CACF,CAAC,CAED,mBACEd,IAAA,QAAKmC,SAAS,CAAC,WAAW,CAAAC,QAAA,cACxBlC,KAAA,QAAKiC,SAAS,CAAC,SAAS,CAAAC,QAAA,eACtBpC,IAAA,QAAKmC,SAAS,CAAC,kBAAkB,CAAAC,QAAA,CAC9B,CAAC5B,OAAO,EAAI,CAACJ,OAAO,eACnBJ,IAAA,WAAQmC,SAAS,CAAC,eAAe,CAACE,OAAO,CAAEJ,mBAAoB,CAAAG,QAAA,CAAC,gBAAc,CAAQ,CACvF,CACE,CAAC,cACNlC,KAAA,QAAKiC,SAAS,CAAC,SAAS,CAAAC,QAAA,eACtBpC,IAAA,OAAAoC,QAAA,CAAI,qBAAmB,CAAI,CAAC,cAC5BpC,IAAA,MAAAoC,QAAA,CAAG,iEAA+D,CAAG,CAAC,EACnE,CAAC,cACNpC,IAAA,QAAKmC,SAAS,CAAC,kBAAkB,CAAAC,QAAA,CAC9BhC,OAAO,eACNF,KAAA,QAAAkC,QAAA,eACElC,KAAA,MAAAkC,QAAA,EAAG,mBAAiB,CAAChC,OAAO,EAAI,CAAC,cACjCJ,IAAA,MAAAoC,QAAA,CAAG,OAAK,CAAG,CAAC,EACT,CACN,CACE,CAAC,EACH,CAAC,CACH,CAAC,CAEV,CAAC,CAED,cAAe,CAAAjC,OAAO","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}