(function(m,oe){typeof exports=="object"&&typeof module<"u"?oe(exports):typeof define=="function"&&define.amd?define(["exports"],oe):(m=typeof globalThis<"u"?globalThis:m||self,oe(m["wallet-sdk"]={}))})(this,function(m){var Rr;"use strict";function oe(n,e,t,r){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function o(l){try{c(r.next(l))}catch(p){a(p)}}function u(l){try{c(r.throw(l))}catch(p){a(p)}}function c(l){l.done?s(l.value):i(l.value).then(o,u)}c((r=r.apply(n,e||[])).next())})}function gt(n,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,a;return a={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function o(c){return function(l){return u([c,l])}}function u(c){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(s=c[0]&2?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return t.label++,{value:c[1],done:!1};case 5:t.label++,i=c[1],c=[0];continue;case 7:c=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){t=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){t.label=c[1];break}if(c[0]===6&&t.label<s[1]){t.label=s[1],s=c;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(c);break}s[2]&&t.ops.pop(),t.trys.pop();continue}c=e.call(n,t)}catch(l){c=[6,l],i=0}finally{r=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function Be(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,s=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(o){a={error:o}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return s}function ue(n,e,t){if(t||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return n.concat(s||Array.prototype.slice.call(e))}var Pr={withStackTrace:!1},en=function(n,e,t){t===void 0&&(t=Pr);var r=e.isOk()?{type:"Ok",value:e.value}:{type:"Err",value:e.error},i=t.withStackTrace?new Error().stack:void 0;return{data:r,message:n,stack:i}},M=function(){function n(e){this._promise=e}return n.fromSafePromise=function(e){var t=e.then(function(r){return new ce(r)});return new n(t)},n.fromPromise=function(e,t){var r=e.then(function(i){return new ce(i)}).catch(function(i){return new le(t(i))});return new n(r)},n.combine=function(e){return Lr(e)},n.combineWithAllErrors=function(e){return Or(e)},n.prototype.map=function(e){var t=this;return new n(this._promise.then(function(r){return oe(t,void 0,void 0,function(){var i;return gt(this,function(s){switch(s.label){case 0:return r.isErr()?[2,new le(r.error)]:(i=ce.bind,[4,e(r.value)]);case 1:return[2,new(i.apply(ce,[void 0,s.sent()]))]}})})}))},n.prototype.mapErr=function(e){var t=this;return new n(this._promise.then(function(r){return oe(t,void 0,void 0,function(){var i;return gt(this,function(s){switch(s.label){case 0:return r.isOk()?[2,new ce(r.value)]:(i=le.bind,[4,e(r.error)]);case 1:return[2,new(i.apply(le,[void 0,s.sent()]))]}})})}))},n.prototype.andThen=function(e){return new n(this._promise.then(function(t){if(t.isErr())return new le(t.error);var r=e(t.value);return r instanceof n?r._promise:r}))},n.prototype.orElse=function(e){var t=this;return new n(this._promise.then(function(r){return oe(t,void 0,void 0,function(){return gt(this,function(i){return r.isErr()?[2,e(r.error)]:[2,new ce(r.value)]})})}))},n.prototype.match=function(e,t){return this._promise.then(function(r){return r.match(e,t)})},n.prototype.unwrapOr=function(e){return this._promise.then(function(t){return t.unwrapOr(e)})},n.prototype.then=function(e,t){return this._promise.then(e,t)},n}(),tn=function(n){return new M(Promise.resolve(new le(n)))};M.fromPromise,M.fromSafePromise;var Nr=function(n){return function(e){return ue(ue([],Be(e),!1),[n],!1)}},nn=function(n){return n.reduce(function(e,t){return e.isOk()?t.isErr()?U(t.error):e.map(Nr(t.value)):e},K([]))},Lr=function(n){return M.fromSafePromise(Promise.all(n)).andThen(nn)},rn=function(n){return n.reduce(function(e,t){return t.isErr()?e.isErr()?U(ue(ue([],Be(e.error),!1),[t.error],!1)):U([t.error]):e.isErr()?e:K(ue(ue([],Be(e.value),!1),[t.value],!1))},K([]))},Or=function(n){return M.fromSafePromise(Promise.all(n)).andThen(rn)},_t;(function(n){function e(i,s){return function(){for(var a=[],o=0;o<arguments.length;o++)a[o]=arguments[o];try{var u=i.apply(void 0,ue([],Be(a),!1));return K(u)}catch(c){return U(s?s(c):c)}}}n.fromThrowable=e;function t(i){return nn(i)}n.combine=t;function r(i){return rn(i)}n.combineWithAllErrors=r})(_t||(_t={}));var K=function(n){return new ce(n)},U=function(n){return new le(n)},ce=function(){function n(e){this.value=e}return n.prototype.isOk=function(){return!0},n.prototype.isErr=function(){return!this.isOk()},n.prototype.map=function(e){return K(e(this.value))},n.prototype.mapErr=function(e){return K(this.value)},n.prototype.andThen=function(e){return e(this.value)},n.prototype.orElse=function(e){return K(this.value)},n.prototype.asyncAndThen=function(e){return e(this.value)},n.prototype.asyncMap=function(e){return M.fromSafePromise(e(this.value))},n.prototype.unwrapOr=function(e){return this.value},n.prototype.match=function(e,t){return e(this.value)},n.prototype._unsafeUnwrap=function(e){return this.value},n.prototype._unsafeUnwrapErr=function(e){throw en("Called `_unsafeUnwrapErr` on an Ok",this,e)},n}(),le=function(){function n(e){this.error=e}return n.prototype.isOk=function(){return!1},n.prototype.isErr=function(){return!this.isOk()},n.prototype.map=function(e){return U(this.error)},n.prototype.mapErr=function(e){return U(e(this.error))},n.prototype.andThen=function(e){return U(this.error)},n.prototype.orElse=function(e){return e(this.error)},n.prototype.asyncAndThen=function(e){return tn(this.error)},n.prototype.asyncMap=function(e){return tn(this.error)},n.prototype.unwrapOr=function(e){return e},n.prototype.match=function(e,t){return t(this.error)},n.prototype._unsafeUnwrap=function(e){throw en("Called `_unsafeUnwrap` on an Err",this,e)},n.prototype._unsafeUnwrapErr=function(e){return this.error},n}();_t.fromThrowable;var T;(function(n){n.assertEqual=i=>i;function e(i){}n.assertIs=e;function t(i){throw new Error}n.assertNever=t,n.arrayToEnum=i=>{const s={};for(const a of i)s[a]=a;return s},n.getValidEnumValues=i=>{const s=n.objectKeys(i).filter(o=>typeof i[i[o]]!="number"),a={};for(const o of s)a[o]=i[o];return n.objectValues(a)},n.objectValues=i=>n.objectKeys(i).map(function(s){return i[s]}),n.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{const s=[];for(const a in i)Object.prototype.hasOwnProperty.call(i,a)&&s.push(a);return s},n.find=(i,s)=>{for(const a of i)if(s(a))return a},n.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&isFinite(i)&&Math.floor(i)===i;function r(i,s=" | "){return i.map(a=>typeof a=="string"?`'${a}'`:a).join(s)}n.joinValues=r,n.jsonStringifyReplacer=(i,s)=>typeof s=="bigint"?s.toString():s})(T||(T={}));var sn;(function(n){n.mergeShapes=(e,t)=>({...e,...t})})(sn||(sn={}));const f=T.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),de=n=>{switch(typeof n){case"undefined":return f.undefined;case"string":return f.string;case"number":return isNaN(n)?f.nan:f.number;case"boolean":return f.boolean;case"function":return f.function;case"bigint":return f.bigint;case"symbol":return f.symbol;case"object":return Array.isArray(n)?f.array:n===null?f.null:n.then&&typeof n.then=="function"&&n.catch&&typeof n.catch=="function"?f.promise:typeof Map<"u"&&n instanceof Map?f.map:typeof Set<"u"&&n instanceof Set?f.set:typeof Date<"u"&&n instanceof Date?f.date:f.object;default:return f.unknown}},d=T.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class H extends Error{constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const t=e||function(s){return s.message},r={_errors:[]},i=s=>{for(const a of s.issues)if(a.code==="invalid_union")a.unionErrors.map(i);else if(a.code==="invalid_return_type")i(a.returnTypeError);else if(a.code==="invalid_arguments")i(a.argumentsError);else if(a.path.length===0)r._errors.push(t(a));else{let o=r,u=0;for(;u<a.path.length;){const c=a.path[u];u===a.path.length-1?(o[c]=o[c]||{_errors:[]},o[c]._errors.push(t(a))):o[c]=o[c]||{_errors:[]},o=o[c],u++}}};return i(this),r}toString(){return this.message}get message(){return JSON.stringify(this.issues,T.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=t=>t.message){const t={},r=[];for(const i of this.issues)i.path.length>0?(t[i.path[0]]=t[i.path[0]]||[],t[i.path[0]].push(e(i))):r.push(e(i));return{formErrors:r,fieldErrors:t}}get formErrors(){return this.flatten()}}H.create=n=>new H(n);const je=(n,e)=>{let t;switch(n.code){case d.invalid_type:n.received===f.undefined?t="Required":t=`Expected ${n.expected}, received ${n.received}`;break;case d.invalid_literal:t=`Invalid literal value, expected ${JSON.stringify(n.expected,T.jsonStringifyReplacer)}`;break;case d.unrecognized_keys:t=`Unrecognized key(s) in object: ${T.joinValues(n.keys,", ")}`;break;case d.invalid_union:t="Invalid input";break;case d.invalid_union_discriminator:t=`Invalid discriminator value. Expected ${T.joinValues(n.options)}`;break;case d.invalid_enum_value:t=`Invalid enum value. Expected ${T.joinValues(n.options)}, received '${n.received}'`;break;case d.invalid_arguments:t="Invalid function arguments";break;case d.invalid_return_type:t="Invalid function return type";break;case d.invalid_date:t="Invalid date";break;case d.invalid_string:typeof n.validation=="object"?"includes"in n.validation?(t=`Invalid input: must include "${n.validation.includes}"`,typeof n.validation.position=="number"&&(t=`${t} at one or more positions greater than or equal to ${n.validation.position}`)):"startsWith"in n.validation?t=`Invalid input: must start with "${n.validation.startsWith}"`:"endsWith"in n.validation?t=`Invalid input: must end with "${n.validation.endsWith}"`:T.assertNever(n.validation):n.validation!=="regex"?t=`Invalid ${n.validation}`:t="Invalid";break;case d.too_small:n.type==="array"?t=`Array must contain ${n.exact?"exactly":n.inclusive?"at least":"more than"} ${n.minimum} element(s)`:n.type==="string"?t=`String must contain ${n.exact?"exactly":n.inclusive?"at least":"over"} ${n.minimum} character(s)`:n.type==="number"?t=`Number must be ${n.exact?"exactly equal to ":n.inclusive?"greater than or equal to ":"greater than "}${n.minimum}`:n.type==="date"?t=`Date must be ${n.exact?"exactly equal to ":n.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(n.minimum))}`:t="Invalid input";break;case d.too_big:n.type==="array"?t=`Array must contain ${n.exact?"exactly":n.inclusive?"at most":"less than"} ${n.maximum} element(s)`:n.type==="string"?t=`String must contain ${n.exact?"exactly":n.inclusive?"at most":"under"} ${n.maximum} character(s)`:n.type==="number"?t=`Number must be ${n.exact?"exactly":n.inclusive?"less than or equal to":"less than"} ${n.maximum}`:n.type==="bigint"?t=`BigInt must be ${n.exact?"exactly":n.inclusive?"less than or equal to":"less than"} ${n.maximum}`:n.type==="date"?t=`Date must be ${n.exact?"exactly":n.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(n.maximum))}`:t="Invalid input";break;case d.custom:t="Invalid input";break;case d.invalid_intersection_types:t="Intersection results could not be merged";break;case d.not_multiple_of:t=`Number must be a multiple of ${n.multipleOf}`;break;case d.not_finite:t="Number must be finite";break;default:t=e.defaultError,T.assertNever(n)}return{message:t}};let Dr=je;function wt(){return Dr}const bt=n=>{const{data:e,path:t,errorMaps:r,issueData:i}=n,s=[...t,...i.path||[]],a={...i,path:s};let o="";const u=r.filter(c=>!!c).slice().reverse();for(const c of u)o=c(a,{data:e,defaultError:o}).message;return{...i,path:s,message:i.message||o}};function h(n,e){const t=bt({issueData:e,data:n.data,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,wt(),je].filter(r=>!!r)});n.common.issues.push(t)}class O{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,t){const r=[];for(const i of t){if(i.status==="aborted")return _;i.status==="dirty"&&e.dirty(),r.push(i.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,t){const r=[];for(const i of t)r.push({key:await i.key,value:await i.value});return O.mergeObjectSync(e,r)}static mergeObjectSync(e,t){const r={};for(const i of t){const{key:s,value:a}=i;if(s.status==="aborted"||a.status==="aborted")return _;s.status==="dirty"&&e.dirty(),a.status==="dirty"&&e.dirty(),(typeof a.value<"u"||i.alwaysSet)&&(r[s.value]=a.value)}return{status:e.value,value:r}}}const _=Object.freeze({status:"aborted"}),Zr=n=>({status:"dirty",value:n}),Z=n=>({status:"valid",value:n}),an=n=>n.status==="aborted",on=n=>n.status==="dirty",kt=n=>n.status==="valid",xt=n=>typeof Promise<"u"&&n instanceof Promise;var y;(function(n){n.errToObj=e=>typeof e=="string"?{message:e}:e||{},n.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(y||(y={}));class Y{constructor(e,t,r,i){this._cachedPath=[],this.parent=e,this.data=t,this._path=r,this._key=i}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const un=(n,e)=>{if(kt(e))return{success:!0,data:e.value};if(!n.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new H(n.common.issues);return this._error=t,this._error}}};function w(n){if(!n)return{};const{errorMap:e,invalid_type_error:t,required_error:r,description:i}=n;if(e&&(t||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:(a,o)=>a.code!=="invalid_type"?{message:o.defaultError}:typeof o.data>"u"?{message:r??o.defaultError}:{message:t??o.defaultError},description:i}}class b{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return de(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:de(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new O,ctx:{common:e.parent.common,data:e.data,parsedType:de(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(xt(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const r=this.safeParse(e,t);if(r.success)return r.data;throw r.error}safeParse(e,t){var r;const i={common:{issues:[],async:(r=t==null?void 0:t.async)!==null&&r!==void 0?r:!1,contextualErrorMap:t==null?void 0:t.errorMap},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:de(e)},s=this._parseSync({data:e,path:i.path,parent:i});return un(i,s)}async parseAsync(e,t){const r=await this.safeParseAsync(e,t);if(r.success)return r.data;throw r.error}async safeParseAsync(e,t){const r={common:{issues:[],contextualErrorMap:t==null?void 0:t.errorMap,async:!0},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:de(e)},i=this._parse({data:e,path:r.path,parent:r}),s=await(xt(i)?i:Promise.resolve(i));return un(r,s)}refine(e,t){const r=i=>typeof t=="string"||typeof t>"u"?{message:t}:typeof t=="function"?t(i):t;return this._refinement((i,s)=>{const a=e(i),o=()=>s.addIssue({code:d.custom,...r(i)});return typeof Promise<"u"&&a instanceof Promise?a.then(u=>u?!0:(o(),!1)):a?!0:(o(),!1)})}refinement(e,t){return this._refinement((r,i)=>e(r)?!0:(i.addIssue(typeof t=="function"?t(r,i):t),!1))}_refinement(e){return new te({schema:this,typeName:v.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return re.create(this,this._def)}nullable(){return Se.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return G.create(this,this._def)}promise(){return Oe.create(this,this._def)}or(e){return Ke.create([this,e],this._def)}and(e){return Ye.create(this,e,this._def)}transform(e){return new te({...w(this._def),schema:this,typeName:v.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t=typeof e=="function"?e:()=>e;return new et({...w(this._def),innerType:this,defaultValue:t,typeName:v.ZodDefault})}brand(){return new Hr({typeName:v.ZodBranded,type:this,...w(this._def)})}catch(e){const t=typeof e=="function"?e:()=>e;return new Pt({...w(this._def),innerType:this,catchValue:t,typeName:v.ZodCatch})}describe(e){const t=this.constructor;return new t({...this._def,description:e})}pipe(e){return tt.create(this,e)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const qr=/^c[^\s-]{8,}$/i,Wr=/^[a-z][a-z0-9]*$/,Vr=/[0-9A-HJKMNP-TV-Z]{26}/,$r=/^([a-f0-9]{8}-[a-f0-9]{4}-[1-5][a-f0-9]{3}-[a-f0-9]{4}-[a-f0-9]{12}|00000000-0000-0000-0000-000000000000)$/i,Ur=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\])|(\[IPv6:(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))\])|([A-Za-z0-9]([A-Za-z0-9-]*[A-Za-z0-9])*(\.[A-Za-z]{2,})+))$/,zr=/^(\p{Extended_Pictographic}|\p{Emoji_Component})+$/u,Br=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,jr=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,Fr=n=>n.precision?n.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${n.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${n.precision}}Z$`):n.precision===0?n.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):n.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$");function Mr(n,e){return!!((e==="v4"||!e)&&Br.test(n)||(e==="v6"||!e)&&jr.test(n))}class Q extends b{constructor(){super(...arguments),this._regex=(e,t,r)=>this.refinement(i=>e.test(i),{validation:t,code:d.invalid_string,...y.errToObj(r)}),this.nonempty=e=>this.min(1,y.errToObj(e)),this.trim=()=>new Q({...this._def,checks:[...this._def.checks,{kind:"trim"}]}),this.toLowerCase=()=>new Q({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]}),this.toUpperCase=()=>new Q({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==f.string){const s=this._getOrReturnCtx(e);return h(s,{code:d.invalid_type,expected:f.string,received:s.parsedType}),_}const r=new O;let i;for(const s of this._def.checks)if(s.kind==="min")e.data.length<s.value&&(i=this._getOrReturnCtx(e,i),h(i,{code:d.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),r.dirty());else if(s.kind==="max")e.data.length>s.value&&(i=this._getOrReturnCtx(e,i),h(i,{code:d.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),r.dirty());else if(s.kind==="length"){const a=e.data.length>s.value,o=e.data.length<s.value;(a||o)&&(i=this._getOrReturnCtx(e,i),a?h(i,{code:d.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):o&&h(i,{code:d.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),r.dirty())}else if(s.kind==="email")Ur.test(e.data)||(i=this._getOrReturnCtx(e,i),h(i,{validation:"email",code:d.invalid_string,message:s.message}),r.dirty());else if(s.kind==="emoji")zr.test(e.data)||(i=this._getOrReturnCtx(e,i),h(i,{validation:"emoji",code:d.invalid_string,message:s.message}),r.dirty());else if(s.kind==="uuid")$r.test(e.data)||(i=this._getOrReturnCtx(e,i),h(i,{validation:"uuid",code:d.invalid_string,message:s.message}),r.dirty());else if(s.kind==="cuid")qr.test(e.data)||(i=this._getOrReturnCtx(e,i),h(i,{validation:"cuid",code:d.invalid_string,message:s.message}),r.dirty());else if(s.kind==="cuid2")Wr.test(e.data)||(i=this._getOrReturnCtx(e,i),h(i,{validation:"cuid2",code:d.invalid_string,message:s.message}),r.dirty());else if(s.kind==="ulid")Vr.test(e.data)||(i=this._getOrReturnCtx(e,i),h(i,{validation:"ulid",code:d.invalid_string,message:s.message}),r.dirty());else if(s.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),h(i,{validation:"url",code:d.invalid_string,message:s.message}),r.dirty()}else s.kind==="regex"?(s.regex.lastIndex=0,s.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),h(i,{validation:"regex",code:d.invalid_string,message:s.message}),r.dirty())):s.kind==="trim"?e.data=e.data.trim():s.kind==="includes"?e.data.includes(s.value,s.position)||(i=this._getOrReturnCtx(e,i),h(i,{code:d.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),r.dirty()):s.kind==="toLowerCase"?e.data=e.data.toLowerCase():s.kind==="toUpperCase"?e.data=e.data.toUpperCase():s.kind==="startsWith"?e.data.startsWith(s.value)||(i=this._getOrReturnCtx(e,i),h(i,{code:d.invalid_string,validation:{startsWith:s.value},message:s.message}),r.dirty()):s.kind==="endsWith"?e.data.endsWith(s.value)||(i=this._getOrReturnCtx(e,i),h(i,{code:d.invalid_string,validation:{endsWith:s.value},message:s.message}),r.dirty()):s.kind==="datetime"?Fr(s).test(e.data)||(i=this._getOrReturnCtx(e,i),h(i,{code:d.invalid_string,validation:"datetime",message:s.message}),r.dirty()):s.kind==="ip"?Mr(e.data,s.version)||(i=this._getOrReturnCtx(e,i),h(i,{validation:"ip",code:d.invalid_string,message:s.message}),r.dirty()):T.assertNever(s);return{status:r.value,value:e.data}}_addCheck(e){return new Q({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...y.errToObj(e)})}url(e){return this._addCheck({kind:"url",...y.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...y.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...y.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...y.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...y.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...y.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...y.errToObj(e)})}datetime(e){var t;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(t=e==null?void 0:e.offset)!==null&&t!==void 0?t:!1,...y.errToObj(e==null?void 0:e.message)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...y.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t==null?void 0:t.position,...y.errToObj(t==null?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...y.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...y.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...y.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...y.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...y.errToObj(t)})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get minLength(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}Q.create=n=>{var e;return new Q({checks:[],typeName:v.ZodString,coerce:(e=n==null?void 0:n.coerce)!==null&&e!==void 0?e:!1,...w(n)})};function Kr(n,e){const t=(n.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,i=t>r?t:r,s=parseInt(n.toFixed(i).replace(".","")),a=parseInt(e.toFixed(i).replace(".",""));return s%a/Math.pow(10,i)}class _e extends b{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==f.number){const s=this._getOrReturnCtx(e);return h(s,{code:d.invalid_type,expected:f.number,received:s.parsedType}),_}let r;const i=new O;for(const s of this._def.checks)s.kind==="int"?T.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),h(r,{code:d.invalid_type,expected:"integer",received:"float",message:s.message}),i.dirty()):s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(r=this._getOrReturnCtx(e,r),h(r,{code:d.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(r=this._getOrReturnCtx(e,r),h(r,{code:d.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="multipleOf"?Kr(e.data,s.value)!==0&&(r=this._getOrReturnCtx(e,r),h(r,{code:d.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):s.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),h(r,{code:d.not_finite,message:s.message}),i.dirty()):T.assertNever(s);return{status:i.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,y.toString(t))}gt(e,t){return this.setLimit("min",e,!1,y.toString(t))}lte(e,t){return this.setLimit("max",e,!0,y.toString(t))}lt(e,t){return this.setLimit("max",e,!1,y.toString(t))}setLimit(e,t,r,i){return new _e({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:y.toString(i)}]})}_addCheck(e){return new _e({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:y.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:y.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:y.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:y.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:y.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:y.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:y.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:y.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:y.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&T.isInteger(e.value))}get isFinite(){let e=null,t=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(t===null||r.value>t)&&(t=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(t)&&Number.isFinite(e)}}_e.create=n=>new _e({checks:[],typeName:v.ZodNumber,coerce:(n==null?void 0:n.coerce)||!1,...w(n)});class we extends b{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==f.bigint){const s=this._getOrReturnCtx(e);return h(s,{code:d.invalid_type,expected:f.bigint,received:s.parsedType}),_}let r;const i=new O;for(const s of this._def.checks)s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(r=this._getOrReturnCtx(e,r),h(r,{code:d.too_small,type:"bigint",minimum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(r=this._getOrReturnCtx(e,r),h(r,{code:d.too_big,type:"bigint",maximum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="multipleOf"?e.data%s.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),h(r,{code:d.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):T.assertNever(s);return{status:i.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,y.toString(t))}gt(e,t){return this.setLimit("min",e,!1,y.toString(t))}lte(e,t){return this.setLimit("max",e,!0,y.toString(t))}lt(e,t){return this.setLimit("max",e,!1,y.toString(t))}setLimit(e,t,r,i){return new we({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:y.toString(i)}]})}_addCheck(e){return new we({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:y.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:y.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:y.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:y.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:y.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}we.create=n=>{var e;return new we({checks:[],typeName:v.ZodBigInt,coerce:(e=n==null?void 0:n.coerce)!==null&&e!==void 0?e:!1,...w(n)})};class St extends b{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==f.boolean){const r=this._getOrReturnCtx(e);return h(r,{code:d.invalid_type,expected:f.boolean,received:r.parsedType}),_}return Z(e.data)}}St.create=n=>new St({typeName:v.ZodBoolean,coerce:(n==null?void 0:n.coerce)||!1,...w(n)});class Ne extends b{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==f.date){const s=this._getOrReturnCtx(e);return h(s,{code:d.invalid_type,expected:f.date,received:s.parsedType}),_}if(isNaN(e.data.getTime())){const s=this._getOrReturnCtx(e);return h(s,{code:d.invalid_date}),_}const r=new O;let i;for(const s of this._def.checks)s.kind==="min"?e.data.getTime()<s.value&&(i=this._getOrReturnCtx(e,i),h(i,{code:d.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),r.dirty()):s.kind==="max"?e.data.getTime()>s.value&&(i=this._getOrReturnCtx(e,i),h(i,{code:d.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),r.dirty()):T.assertNever(s);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Ne({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:y.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:y.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e!=null?new Date(e):null}}Ne.create=n=>new Ne({checks:[],coerce:(n==null?void 0:n.coerce)||!1,typeName:v.ZodDate,...w(n)});class Tt extends b{_parse(e){if(this._getType(e)!==f.symbol){const r=this._getOrReturnCtx(e);return h(r,{code:d.invalid_type,expected:f.symbol,received:r.parsedType}),_}return Z(e.data)}}Tt.create=n=>new Tt({typeName:v.ZodSymbol,...w(n)});class Fe extends b{_parse(e){if(this._getType(e)!==f.undefined){const r=this._getOrReturnCtx(e);return h(r,{code:d.invalid_type,expected:f.undefined,received:r.parsedType}),_}return Z(e.data)}}Fe.create=n=>new Fe({typeName:v.ZodUndefined,...w(n)});class Me extends b{_parse(e){if(this._getType(e)!==f.null){const r=this._getOrReturnCtx(e);return h(r,{code:d.invalid_type,expected:f.null,received:r.parsedType}),_}return Z(e.data)}}Me.create=n=>new Me({typeName:v.ZodNull,...w(n)});class Et extends b{constructor(){super(...arguments),this._any=!0}_parse(e){return Z(e.data)}}Et.create=n=>new Et({typeName:v.ZodAny,...w(n)});class be extends b{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Z(e.data)}}be.create=n=>new be({typeName:v.ZodUnknown,...w(n)});class ne extends b{_parse(e){const t=this._getOrReturnCtx(e);return h(t,{code:d.invalid_type,expected:f.never,received:t.parsedType}),_}}ne.create=n=>new ne({typeName:v.ZodNever,...w(n)});class It extends b{_parse(e){if(this._getType(e)!==f.undefined){const r=this._getOrReturnCtx(e);return h(r,{code:d.invalid_type,expected:f.void,received:r.parsedType}),_}return Z(e.data)}}It.create=n=>new It({typeName:v.ZodVoid,...w(n)});class G extends b{_parse(e){const{ctx:t,status:r}=this._processInputParams(e),i=this._def;if(t.parsedType!==f.array)return h(t,{code:d.invalid_type,expected:f.array,received:t.parsedType}),_;if(i.exactLength!==null){const a=t.data.length>i.exactLength.value,o=t.data.length<i.exactLength.value;(a||o)&&(h(t,{code:a?d.too_big:d.too_small,minimum:o?i.exactLength.value:void 0,maximum:a?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),r.dirty())}if(i.minLength!==null&&t.data.length<i.minLength.value&&(h(t,{code:d.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),r.dirty()),i.maxLength!==null&&t.data.length>i.maxLength.value&&(h(t,{code:d.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),r.dirty()),t.common.async)return Promise.all([...t.data].map((a,o)=>i.type._parseAsync(new Y(t,a,t.path,o)))).then(a=>O.mergeArray(r,a));const s=[...t.data].map((a,o)=>i.type._parseSync(new Y(t,a,t.path,o)));return O.mergeArray(r,s)}get element(){return this._def.type}min(e,t){return new G({...this._def,minLength:{value:e,message:y.toString(t)}})}max(e,t){return new G({...this._def,maxLength:{value:e,message:y.toString(t)}})}length(e,t){return new G({...this._def,exactLength:{value:e,message:y.toString(t)}})}nonempty(e){return this.min(1,e)}}G.create=(n,e)=>new G({type:n,minLength:null,maxLength:null,exactLength:null,typeName:v.ZodArray,...w(e)});function ke(n){if(n instanceof R){const e={};for(const t in n.shape){const r=n.shape[t];e[t]=re.create(ke(r))}return new R({...n._def,shape:()=>e})}else return n instanceof G?new G({...n._def,type:ke(n.element)}):n instanceof re?re.create(ke(n.unwrap())):n instanceof Se?Se.create(ke(n.unwrap())):n instanceof ee?ee.create(n.items.map(e=>ke(e))):n}class R extends b{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),t=T.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==f.object){const c=this._getOrReturnCtx(e);return h(c,{code:d.invalid_type,expected:f.object,received:c.parsedType}),_}const{status:r,ctx:i}=this._processInputParams(e),{shape:s,keys:a}=this._getCached(),o=[];if(!(this._def.catchall instanceof ne&&this._def.unknownKeys==="strip"))for(const c in i.data)a.includes(c)||o.push(c);const u=[];for(const c of a){const l=s[c],p=i.data[c];u.push({key:{status:"valid",value:c},value:l._parse(new Y(i,p,i.path,c)),alwaysSet:c in i.data})}if(this._def.catchall instanceof ne){const c=this._def.unknownKeys;if(c==="passthrough")for(const l of o)u.push({key:{status:"valid",value:l},value:{status:"valid",value:i.data[l]}});else if(c==="strict")o.length>0&&(h(i,{code:d.unrecognized_keys,keys:o}),r.dirty());else if(c!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const c=this._def.catchall;for(const l of o){const p=i.data[l];u.push({key:{status:"valid",value:l},value:c._parse(new Y(i,p,i.path,l)),alwaysSet:l in i.data})}}return i.common.async?Promise.resolve().then(async()=>{const c=[];for(const l of u){const p=await l.key;c.push({key:p,value:await l.value,alwaysSet:l.alwaysSet})}return c}).then(c=>O.mergeObjectSync(r,c)):O.mergeObjectSync(r,u)}get shape(){return this._def.shape()}strict(e){return y.errToObj,new R({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(t,r)=>{var i,s,a,o;const u=(a=(s=(i=this._def).errorMap)===null||s===void 0?void 0:s.call(i,t,r).message)!==null&&a!==void 0?a:r.defaultError;return t.code==="unrecognized_keys"?{message:(o=y.errToObj(e).message)!==null&&o!==void 0?o:u}:{message:u}}}:{}})}strip(){return new R({...this._def,unknownKeys:"strip"})}passthrough(){return new R({...this._def,unknownKeys:"passthrough"})}extend(e){return new R({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new R({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:v.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new R({...this._def,catchall:e})}pick(e){const t={};return T.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(t[r]=this.shape[r])}),new R({...this._def,shape:()=>t})}omit(e){const t={};return T.objectKeys(this.shape).forEach(r=>{e[r]||(t[r]=this.shape[r])}),new R({...this._def,shape:()=>t})}deepPartial(){return ke(this)}partial(e){const t={};return T.objectKeys(this.shape).forEach(r=>{const i=this.shape[r];e&&!e[r]?t[r]=i:t[r]=i.optional()}),new R({...this._def,shape:()=>t})}required(e){const t={};return T.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])t[r]=this.shape[r];else{let s=this.shape[r];for(;s instanceof re;)s=s._def.innerType;t[r]=s}}),new R({...this._def,shape:()=>t})}keyof(){return cn(T.objectKeys(this.shape))}}R.create=(n,e)=>new R({shape:()=>n,unknownKeys:"strip",catchall:ne.create(),typeName:v.ZodObject,...w(e)}),R.strictCreate=(n,e)=>new R({shape:()=>n,unknownKeys:"strict",catchall:ne.create(),typeName:v.ZodObject,...w(e)}),R.lazycreate=(n,e)=>new R({shape:n,unknownKeys:"strip",catchall:ne.create(),typeName:v.ZodObject,...w(e)});class Ke extends b{_parse(e){const{ctx:t}=this._processInputParams(e),r=this._def.options;function i(s){for(const o of s)if(o.result.status==="valid")return o.result;for(const o of s)if(o.result.status==="dirty")return t.common.issues.push(...o.ctx.common.issues),o.result;const a=s.map(o=>new H(o.ctx.common.issues));return h(t,{code:d.invalid_union,unionErrors:a}),_}if(t.common.async)return Promise.all(r.map(async s=>{const a={...t,common:{...t.common,issues:[]},parent:null};return{result:await s._parseAsync({data:t.data,path:t.path,parent:a}),ctx:a}})).then(i);{let s;const a=[];for(const u of r){const c={...t,common:{...t.common,issues:[]},parent:null},l=u._parseSync({data:t.data,path:t.path,parent:c});if(l.status==="valid")return l;l.status==="dirty"&&!s&&(s={result:l,ctx:c}),c.common.issues.length&&a.push(c.common.issues)}if(s)return t.common.issues.push(...s.ctx.common.issues),s.result;const o=a.map(u=>new H(u));return h(t,{code:d.invalid_union,unionErrors:o}),_}}get options(){return this._def.options}}Ke.create=(n,e)=>new Ke({options:n,typeName:v.ZodUnion,...w(e)});const He=n=>n instanceof Je?He(n.schema):n instanceof te?He(n.innerType()):n instanceof Xe?[n.value]:n instanceof fe?n.options:n instanceof Qe?Object.keys(n.enum):n instanceof et?He(n._def.innerType):n instanceof Fe?[void 0]:n instanceof Me?[null]:null;class At extends b{_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==f.object)return h(t,{code:d.invalid_type,expected:f.object,received:t.parsedType}),_;const r=this.discriminator,i=t.data[r],s=this.optionsMap.get(i);return s?t.common.async?s._parseAsync({data:t.data,path:t.path,parent:t}):s._parseSync({data:t.data,path:t.path,parent:t}):(h(t,{code:d.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),_)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,r){const i=new Map;for(const s of t){const a=He(s.shape[e]);if(!a)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const o of a){if(i.has(o))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(o)}`);i.set(o,s)}}return new At({typeName:v.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:i,...w(r)})}}function Ct(n,e){const t=de(n),r=de(e);if(n===e)return{valid:!0,data:n};if(t===f.object&&r===f.object){const i=T.objectKeys(e),s=T.objectKeys(n).filter(o=>i.indexOf(o)!==-1),a={...n,...e};for(const o of s){const u=Ct(n[o],e[o]);if(!u.valid)return{valid:!1};a[o]=u.data}return{valid:!0,data:a}}else if(t===f.array&&r===f.array){if(n.length!==e.length)return{valid:!1};const i=[];for(let s=0;s<n.length;s++){const a=n[s],o=e[s],u=Ct(a,o);if(!u.valid)return{valid:!1};i.push(u.data)}return{valid:!0,data:i}}else return t===f.date&&r===f.date&&+n==+e?{valid:!0,data:n}:{valid:!1}}class Ye extends b{_parse(e){const{status:t,ctx:r}=this._processInputParams(e),i=(s,a)=>{if(an(s)||an(a))return _;const o=Ct(s.value,a.value);return o.valid?((on(s)||on(a))&&t.dirty(),{status:t.value,value:o.data}):(h(r,{code:d.invalid_intersection_types}),_)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([s,a])=>i(s,a)):i(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}Ye.create=(n,e,t)=>new Ye({left:n,right:e,typeName:v.ZodIntersection,...w(t)});class ee extends b{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==f.array)return h(r,{code:d.invalid_type,expected:f.array,received:r.parsedType}),_;if(r.data.length<this._def.items.length)return h(r,{code:d.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),_;!this._def.rest&&r.data.length>this._def.items.length&&(h(r,{code:d.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const s=[...r.data].map((a,o)=>{const u=this._def.items[o]||this._def.rest;return u?u._parse(new Y(r,a,r.path,o)):null}).filter(a=>!!a);return r.common.async?Promise.all(s).then(a=>O.mergeArray(t,a)):O.mergeArray(t,s)}get items(){return this._def.items}rest(e){return new ee({...this._def,rest:e})}}ee.create=(n,e)=>{if(!Array.isArray(n))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new ee({items:n,typeName:v.ZodTuple,rest:null,...w(e)})};class Ge extends b{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==f.object)return h(r,{code:d.invalid_type,expected:f.object,received:r.parsedType}),_;const i=[],s=this._def.keyType,a=this._def.valueType;for(const o in r.data)i.push({key:s._parse(new Y(r,o,r.path,o)),value:a._parse(new Y(r,r.data[o],r.path,o))});return r.common.async?O.mergeObjectAsync(t,i):O.mergeObjectSync(t,i)}get element(){return this._def.valueType}static create(e,t,r){return t instanceof b?new Ge({keyType:e,valueType:t,typeName:v.ZodRecord,...w(r)}):new Ge({keyType:Q.create(),valueType:e,typeName:v.ZodRecord,...w(t)})}}class Rt extends b{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==f.map)return h(r,{code:d.invalid_type,expected:f.map,received:r.parsedType}),_;const i=this._def.keyType,s=this._def.valueType,a=[...r.data.entries()].map(([o,u],c)=>({key:i._parse(new Y(r,o,r.path,[c,"key"])),value:s._parse(new Y(r,u,r.path,[c,"value"]))}));if(r.common.async){const o=new Map;return Promise.resolve().then(async()=>{for(const u of a){const c=await u.key,l=await u.value;if(c.status==="aborted"||l.status==="aborted")return _;(c.status==="dirty"||l.status==="dirty")&&t.dirty(),o.set(c.value,l.value)}return{status:t.value,value:o}})}else{const o=new Map;for(const u of a){const c=u.key,l=u.value;if(c.status==="aborted"||l.status==="aborted")return _;(c.status==="dirty"||l.status==="dirty")&&t.dirty(),o.set(c.value,l.value)}return{status:t.value,value:o}}}}Rt.create=(n,e,t)=>new Rt({valueType:e,keyType:n,typeName:v.ZodMap,...w(t)});class xe extends b{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==f.set)return h(r,{code:d.invalid_type,expected:f.set,received:r.parsedType}),_;const i=this._def;i.minSize!==null&&r.data.size<i.minSize.value&&(h(r,{code:d.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),t.dirty()),i.maxSize!==null&&r.data.size>i.maxSize.value&&(h(r,{code:d.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),t.dirty());const s=this._def.valueType;function a(u){const c=new Set;for(const l of u){if(l.status==="aborted")return _;l.status==="dirty"&&t.dirty(),c.add(l.value)}return{status:t.value,value:c}}const o=[...r.data.values()].map((u,c)=>s._parse(new Y(r,u,r.path,c)));return r.common.async?Promise.all(o).then(u=>a(u)):a(o)}min(e,t){return new xe({...this._def,minSize:{value:e,message:y.toString(t)}})}max(e,t){return new xe({...this._def,maxSize:{value:e,message:y.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}xe.create=(n,e)=>new xe({valueType:n,minSize:null,maxSize:null,typeName:v.ZodSet,...w(e)});class Le extends b{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==f.function)return h(t,{code:d.invalid_type,expected:f.function,received:t.parsedType}),_;function r(o,u){return bt({data:o,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,wt(),je].filter(c=>!!c),issueData:{code:d.invalid_arguments,argumentsError:u}})}function i(o,u){return bt({data:o,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,wt(),je].filter(c=>!!c),issueData:{code:d.invalid_return_type,returnTypeError:u}})}const s={errorMap:t.common.contextualErrorMap},a=t.data;return this._def.returns instanceof Oe?Z(async(...o)=>{const u=new H([]),c=await this._def.args.parseAsync(o,s).catch(g=>{throw u.addIssue(r(o,g)),u}),l=await a(...c);return await this._def.returns._def.type.parseAsync(l,s).catch(g=>{throw u.addIssue(i(l,g)),u})}):Z((...o)=>{const u=this._def.args.safeParse(o,s);if(!u.success)throw new H([r(o,u.error)]);const c=a(...u.data),l=this._def.returns.safeParse(c,s);if(!l.success)throw new H([i(c,l.error)]);return l.data})}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new Le({...this._def,args:ee.create(e).rest(be.create())})}returns(e){return new Le({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,r){return new Le({args:e||ee.create([]).rest(be.create()),returns:t||be.create(),typeName:v.ZodFunction,...w(r)})}}class Je extends b{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}Je.create=(n,e)=>new Je({getter:n,typeName:v.ZodLazy,...w(e)});class Xe extends b{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return h(t,{received:t.data,code:d.invalid_literal,expected:this._def.value}),_}return{status:"valid",value:e.data}}get value(){return this._def.value}}Xe.create=(n,e)=>new Xe({value:n,typeName:v.ZodLiteral,...w(e)});function cn(n,e){return new fe({values:n,typeName:v.ZodEnum,...w(e)})}class fe extends b{_parse(e){if(typeof e.data!="string"){const t=this._getOrReturnCtx(e),r=this._def.values;return h(t,{expected:T.joinValues(r),received:t.parsedType,code:d.invalid_type}),_}if(this._def.values.indexOf(e.data)===-1){const t=this._getOrReturnCtx(e),r=this._def.values;return h(t,{received:t.data,code:d.invalid_enum_value,options:r}),_}return Z(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e){return fe.create(e)}exclude(e){return fe.create(this.options.filter(t=>!e.includes(t)))}}fe.create=cn;class Qe extends b{_parse(e){const t=T.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==f.string&&r.parsedType!==f.number){const i=T.objectValues(t);return h(r,{expected:T.joinValues(i),received:r.parsedType,code:d.invalid_type}),_}if(t.indexOf(e.data)===-1){const i=T.objectValues(t);return h(r,{received:r.data,code:d.invalid_enum_value,options:i}),_}return Z(e.data)}get enum(){return this._def.values}}Qe.create=(n,e)=>new Qe({values:n,typeName:v.ZodNativeEnum,...w(e)});class Oe extends b{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==f.promise&&t.common.async===!1)return h(t,{code:d.invalid_type,expected:f.promise,received:t.parsedType}),_;const r=t.parsedType===f.promise?t.data:Promise.resolve(t.data);return Z(r.then(i=>this._def.type.parseAsync(i,{path:t.path,errorMap:t.common.contextualErrorMap})))}}Oe.create=(n,e)=>new Oe({type:n,typeName:v.ZodPromise,...w(e)});class te extends b{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===v.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:r}=this._processInputParams(e),i=this._def.effect||null;if(i.type==="preprocess"){const a=i.transform(r.data);return r.common.async?Promise.resolve(a).then(o=>this._def.schema._parseAsync({data:o,path:r.path,parent:r})):this._def.schema._parseSync({data:a,path:r.path,parent:r})}const s={addIssue:a=>{h(r,a),a.fatal?t.abort():t.dirty()},get path(){return r.path}};if(s.addIssue=s.addIssue.bind(s),i.type==="refinement"){const a=o=>{const u=i.refinement(o,s);if(r.common.async)return Promise.resolve(u);if(u instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return o};if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return o.status==="aborted"?_:(o.status==="dirty"&&t.dirty(),a(o.value),{status:t.value,value:o.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>o.status==="aborted"?_:(o.status==="dirty"&&t.dirty(),a(o.value).then(()=>({status:t.value,value:o.value}))))}if(i.type==="transform")if(r.common.async===!1){const a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!kt(a))return a;const o=i.transform(a.value,s);if(o instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:o}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(a=>kt(a)?Promise.resolve(i.transform(a.value,s)).then(o=>({status:t.value,value:o})):a);T.assertNever(i)}}te.create=(n,e,t)=>new te({schema:n,typeName:v.ZodEffects,effect:e,...w(t)}),te.createWithPreprocess=(n,e,t)=>new te({schema:e,effect:{type:"preprocess",transform:n},typeName:v.ZodEffects,...w(t)});class re extends b{_parse(e){return this._getType(e)===f.undefined?Z(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}re.create=(n,e)=>new re({innerType:n,typeName:v.ZodOptional,...w(e)});class Se extends b{_parse(e){return this._getType(e)===f.null?Z(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Se.create=(n,e)=>new Se({innerType:n,typeName:v.ZodNullable,...w(e)});class et extends b{_parse(e){const{ctx:t}=this._processInputParams(e);let r=t.data;return t.parsedType===f.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}et.create=(n,e)=>new et({innerType:n,typeName:v.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...w(e)});class Pt extends b{_parse(e){const{ctx:t}=this._processInputParams(e),r={...t,common:{...t.common,issues:[]}},i=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return xt(i)?i.then(s=>({status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new H(r.common.issues)},input:r.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new H(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}Pt.create=(n,e)=>new Pt({innerType:n,typeName:v.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...w(e)});class Nt extends b{_parse(e){if(this._getType(e)!==f.nan){const r=this._getOrReturnCtx(e);return h(r,{code:d.invalid_type,expected:f.nan,received:r.parsedType}),_}return{status:"valid",value:e.data}}}Nt.create=n=>new Nt({typeName:v.ZodNaN,...w(n)});class Hr extends b{_parse(e){const{ctx:t}=this._processInputParams(e),r=t.data;return this._def.type._parse({data:r,path:t.path,parent:t})}unwrap(){return this._def.type}}class tt extends b{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const s=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?_:s.status==="dirty"?(t.dirty(),Zr(s.value)):this._def.out._parseAsync({data:s.value,path:r.path,parent:r})})();{const i=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?_:i.status==="dirty"?(t.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:r.path,parent:r})}}static create(e,t){return new tt({in:e,out:t,typeName:v.ZodPipeline})}}R.lazycreate;var v;(function(n){n.ZodString="ZodString",n.ZodNumber="ZodNumber",n.ZodNaN="ZodNaN",n.ZodBigInt="ZodBigInt",n.ZodBoolean="ZodBoolean",n.ZodDate="ZodDate",n.ZodSymbol="ZodSymbol",n.ZodUndefined="ZodUndefined",n.ZodNull="ZodNull",n.ZodAny="ZodAny",n.ZodUnknown="ZodUnknown",n.ZodNever="ZodNever",n.ZodVoid="ZodVoid",n.ZodArray="ZodArray",n.ZodObject="ZodObject",n.ZodUnion="ZodUnion",n.ZodDiscriminatedUnion="ZodDiscriminatedUnion",n.ZodIntersection="ZodIntersection",n.ZodTuple="ZodTuple",n.ZodRecord="ZodRecord",n.ZodMap="ZodMap",n.ZodSet="ZodSet",n.ZodFunction="ZodFunction",n.ZodLazy="ZodLazy",n.ZodLiteral="ZodLiteral",n.ZodEnum="ZodEnum",n.ZodEffects="ZodEffects",n.ZodNativeEnum="ZodNativeEnum",n.ZodOptional="ZodOptional",n.ZodNullable="ZodNullable",n.ZodDefault="ZodDefault",n.ZodCatch="ZodCatch",n.ZodPromise="ZodPromise",n.ZodBranded="ZodBranded",n.ZodPipeline="ZodPipeline"})(v||(v={}));const E=Q.create,nt=_e.create;Nt.create,we.create;const De=St.create;Ne.create,Tt.create,Fe.create,Me.create,Et.create,be.create,ne.create,It.create;const Ze=G.create,x=R.create;R.strictCreate;const q=Ke.create;At.create,Ye.create,ee.create,Ge.create,Rt.create,xe.create,Le.create,Je.create;const A=Xe.create;fe.create,Qe.create,Oe.create,te.create,re.create,Se.create,te.createWithPreprocess,tt.create;const ln=x({address:E(),label:E(),appearanceId:nt()}),rt=x({publicKey:E(),signature:E(),curve:q([A("curve25519"),A("secp256k1")])}),dn=x({accountAddress:E(),proof:rt}),qe=x({identityAddress:E(),label:E()}),Lt={western:"western",eastern:"eastern"},fn=q([A(Lt.eastern),A(Lt.western)]),hn=x({variant:fn,familyName:E(),nickname:E(),givenNames:E()}),it=x({quantifier:q([A("exactly"),A("atLeast")]),quantity:nt().gte(0)}),st=x({challenge:E().optional(),numberOfAccounts:it}),at=x({accounts:Ze(ln),challenge:E().optional(),proofs:Ze(dn).optional()}).refine(n=>{var e;return n.challenge||n!=null&&n.proofs?n.challenge&&((e=n==null?void 0:n.proofs)==null?void 0:e.length):!0},"missing challenge or proofs"),ot=x({isRequestingName:De().optional(),numberOfRequestedEmailAddresses:it.optional(),numberOfRequestedPhoneNumbers:it.optional()}),ut=x({name:hn.optional(),emailAddresses:Ze(E()).optional(),phoneNumbers:Ze(E()).optional()}),pn=x({accounts:De(),personaData:De()}),Yr=x({persona:qe,challenge:E().optional(),proof:rt.optional()}).refine(n=>n.challenge||n.proof?n.challenge&&n.proof:!0,"missing challenge or proof"),mn=x({discriminator:A("unauthorizedRequest"),oneTimeAccounts:st.optional(),oneTimePersonaData:ot.optional()}),yn=x({discriminator:A("usePersona"),identityAddress:E()}),vn=x({discriminator:A("loginWithoutChallenge")}),gn=x({discriminator:A("loginWithChallenge"),challenge:E()}),_n=q([vn,gn]),wn=q([yn,_n]),bn=x({discriminator:A("authorizedRequest"),auth:wn,reset:pn.optional(),oneTimeAccounts:st.optional(),ongoingAccounts:st.optional(),oneTimePersonaData:ot.optional(),ongoingPersonaData:ot.optional()}),kn=q([mn,bn]),xn=x({transactionManifest:E(),version:nt(),blobs:Ze(E()).optional(),message:E().optional()}),Sn=x({discriminator:A("transaction"),send:xn}),Tn=x({transactionIntentHash:E()}),Gr=x({discriminator:A("transaction"),send:Tn}),En=x({discriminator:A("cancelRequest")}),In=q([kn,Sn,En]),Ot=x({version:A(2),networkId:nt(),dAppDefinitionAddress:E()}),An=x({interactionId:E(),metadata:Ot,items:In}),Jr=x({discriminator:A("unauthorizedRequest"),oneTimeAccounts:at.optional(),oneTimePersonaData:ut.optional()}),Cn=x({discriminator:A("loginWithoutChallenge"),persona:qe}),Rn=x({discriminator:A("loginWithChallenge"),persona:qe,challenge:E(),proof:rt}),Pn=q([Cn,Rn]),Xr=x({discriminator:A("usePersona"),persona:qe}),Nn=q([Xr,Pn]),Ln=x({discriminator:A("authorizedRequest"),auth:Nn,oneTimeAccounts:at.optional(),ongoingAccounts:at.optional(),oneTimePersonaData:ut.optional(),ongoingPersonaData:ut.optional()}),On=q([Jr,Ln]),Qr=q([On,Gr]),Dn=x({discriminator:A("success"),interactionId:E(),items:Qr}),Zn=x({discriminator:A("failure"),interactionId:E(),error:E(),message:E().optional()}),Dt=q([Dn,Zn]),ei=x({interactionId:E(),discriminator:A("extensionStatus")}),he={extensionStatus:"extensionStatus",receivedByExtension:"receivedByExtension",receivedByWallet:"receivedByWallet",requestCancelSuccess:"requestCancelSuccess",requestCancelFail:"requestCancelFail"},ti=x({eventType:A(he.extensionStatus),interactionId:E(),isWalletLinked:De(),isExtensionAvailable:De()}),qn=x({eventType:q([A(he.extensionStatus),A(he.receivedByExtension),A(he.receivedByWallet),A(he.requestCancelSuccess),A(he.requestCancelFail)]),interactionId:E()});q([qn,Dt]);const We={outgoingMessage:"radix#chromeExtension#send",incomingMessage:"radix#chromeExtension#receive"},ni=(n,e)=>M.fromPromise(n.parseAsync(e),t=>t.issues),Wn=n=>(e,t,r=crypto.randomUUID())=>{const i={items:t,interactionId:r,metadata:e};return ni(An,i).mapErr(s=>(n==null||n.error(" invalidWalletInteraction",s),Te(Ve.walletRequestValidation,i.interactionId)))},ri=Object.freeze(Object.defineProperty({__proto__:null,walletInteractionFactory:Wn},Symbol.toStringTag,{value:"Module"})),Vn=n=>n,Ve={rejectedByUser:"rejectedByUser",missingExtension:"missingExtension",canceledByUser:"canceledByUser",walletRequestValidation:"walletRequestValidation",walletResponseValidation:"walletResponseValidation",wrongNetwork:"wrongNetwork",failedToPrepareTransaction:"failedToPrepareTransaction",failedToCompileTransaction:"failedToCompileTransaction",failedToSignTransaction:"failedToSignTransaction",failedToSubmitTransaction:"failedToSubmitTransaction",failedToPollSubmittedTransaction:"failedToPollSubmittedTransaction",submittedTransactionWasDuplicate:"submittedTransactionWasDuplicate",submittedTransactionHasFailedTransactionStatus:"submittedTransactionHasFailedTransactionStatus",submittedTransactionHasRejectedTransactionStatus:"submittedTransactionHasRejectedTransactionStatus",failedToFindAccountWithEnoughFundsToLockFee:"failedToFindAccountWithEnoughFundsToLockFee",wrongAccountType:"wrongAccountType",unknownWebsite:"unknownWebsite",radixJsonNotFound:"radixJsonNotFound",unknownDappDefinitionAddress:"unknownDappDefinitionAddress",invalidPersona:"invalidPersona"},ii=new Map().set(Ve.missingExtension,"extension could not be found").set(Ve.rejectedByUser,"user rejected request").set(Ve.canceledByUser,"user has canceled the request"),Te=(n,e,t)=>({error:n,interactionId:e,message:t||ii.get(n)||""}),$n=n=>M.fromPromise(Dt.parseAsync(n),e=>e.issues).andThen(e=>e.discriminator==="success"?K(e):U(e)).mapErr(()=>Te("walletResponseValidation","")),si=(n,e)=>{const t=n.logger,r=Wn(t);return{request:(a,o={})=>r(n,a).andThen(u=>e.send(u,o)).andThen($n).map(u=>u.items),sendTransaction:(a,o={})=>r(n,{discriminator:"transaction",send:a}).andThen(u=>e.send(u,o)).andThen($n).map(u=>u.items.send),extensionStatus$:e.extensionStatus$,openPopup:e.openPopup}};var Zt=function(n,e){return Zt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},Zt(n,e)};function ie(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Zt(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}function ai(n,e,t,r){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function o(l){try{c(r.next(l))}catch(p){a(p)}}function u(l){try{c(r.throw(l))}catch(p){a(p)}}function c(l){l.done?s(l.value):i(l.value).then(o,u)}c((r=r.apply(n,e||[])).next())})}function Un(n,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,a;return a={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function o(c){return function(l){return u([c,l])}}function u(c){if(r)throw new TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(t=0)),t;)try{if(r=1,i&&(s=c[0]&2?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return t.label++,{value:c[1],done:!1};case 5:t.label++,i=c[1],c=[0];continue;case 7:c=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){t=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){t.label=c[1];break}if(c[0]===6&&t.label<s[1]){t.label=s[1],s=c;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(c);break}s[2]&&t.ops.pop(),t.trys.pop();continue}c=e.call(n,t)}catch(l){c=[6,l],i=0}finally{r=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function Ee(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function pe(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,s=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(o){a={error:o}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return s}function me(n,e,t){if(t||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return n.concat(s||Array.prototype.slice.call(e))}function Ie(n){return this instanceof Ie?(this.v=n,this):new Ie(n)}function oi(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,s=[];return i={},a("next"),a("throw"),a("return"),i[Symbol.asyncIterator]=function(){return this},i;function a(g){r[g]&&(i[g]=function(I){return new Promise(function(C,S){s.push([g,I,C,S])>1||o(g,I)})})}function o(g,I){try{u(r[g](I))}catch(C){p(s[0][3],C)}}function u(g){g.value instanceof Ie?Promise.resolve(g.value.v).then(c,l):p(s[0][2],g)}function c(g){o("next",g)}function l(g){o("throw",g)}function p(g,I){g(I),s.shift(),s.length&&o(s[0][0],s[0][1])}}function ui(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof Ee=="function"?Ee(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(s){t[s]=n[s]&&function(a){return new Promise(function(o,u){a=n[s](a),i(o,u,a.done,a.value)})}}function i(s,a,o,u){Promise.resolve(u).then(function(c){s({value:c,done:o})},a)}}typeof SuppressedError=="function"&&SuppressedError;function P(n){return typeof n=="function"}function qt(n){var e=function(r){Error.call(r),r.stack=new Error().stack},t=n(e);return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var Wt=qt(function(n){return function(t){n(this),this.message=t?t.length+` errors occurred during unsubscription:
`+t.map(function(r,i){return i+1+") "+r.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=t}});function ct(n,e){if(n){var t=n.indexOf(e);0<=t&&n.splice(t,1)}}var Ae=function(){function n(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}return n.prototype.unsubscribe=function(){var e,t,r,i,s;if(!this.closed){this.closed=!0;var a=this._parentage;if(a)if(this._parentage=null,Array.isArray(a))try{for(var o=Ee(a),u=o.next();!u.done;u=o.next()){var c=u.value;c.remove(this)}}catch(S){e={error:S}}finally{try{u&&!u.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}else a.remove(this);var l=this.initialTeardown;if(P(l))try{l()}catch(S){s=S instanceof Wt?S.errors:[S]}var p=this._finalizers;if(p){this._finalizers=null;try{for(var g=Ee(p),I=g.next();!I.done;I=g.next()){var C=I.value;try{jn(C)}catch(S){s=s??[],S instanceof Wt?s=me(me([],pe(s)),pe(S.errors)):s.push(S)}}}catch(S){r={error:S}}finally{try{I&&!I.done&&(i=g.return)&&i.call(g)}finally{if(r)throw r.error}}}if(s)throw new Wt(s)}},n.prototype.add=function(e){var t;if(e&&e!==this)if(this.closed)jn(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}},n.prototype._hasParent=function(e){var t=this._parentage;return t===e||Array.isArray(t)&&t.includes(e)},n.prototype._addParent=function(e){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e},n.prototype._removeParent=function(e){var t=this._parentage;t===e?this._parentage=null:Array.isArray(t)&&ct(t,e)},n.prototype.remove=function(e){var t=this._finalizers;t&&ct(t,e),e instanceof n&&e._removeParent(this)},n.EMPTY=function(){var e=new n;return e.closed=!0,e}(),n}(),zn=Ae.EMPTY;function Bn(n){return n instanceof Ae||n&&"closed"in n&&P(n.remove)&&P(n.add)&&P(n.unsubscribe)}function jn(n){P(n)?n():n.unsubscribe()}var Fn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Vt={setTimeout:function(n,e){for(var t=[],r=2;r<arguments.length;r++)t[r-2]=arguments[r];var i=Vt.delegate;return i!=null&&i.setTimeout?i.setTimeout.apply(i,me([n,e],pe(t))):setTimeout.apply(void 0,me([n,e],pe(t)))},clearTimeout:function(n){var e=Vt.delegate;return((e==null?void 0:e.clearTimeout)||clearTimeout)(n)},delegate:void 0};function Mn(n){Vt.setTimeout(function(){throw n})}function $t(){}function lt(n){n()}var Ut=function(n){ie(e,n);function e(t){var r=n.call(this)||this;return r.isStopped=!1,t?(r.destination=t,Bn(t)&&t.add(r)):r.destination=fi,r}return e.create=function(t,r,i){return new Ce(t,r,i)},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,n.prototype.unsubscribe.call(this),this.destination=null)},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){try{this.destination.error(t)}finally{this.unsubscribe()}},e.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},e}(Ae),ci=Function.prototype.bind;function zt(n,e){return ci.call(n,e)}var li=function(){function n(e){this.partialObserver=e}return n.prototype.next=function(e){var t=this.partialObserver;if(t.next)try{t.next(e)}catch(r){dt(r)}},n.prototype.error=function(e){var t=this.partialObserver;if(t.error)try{t.error(e)}catch(r){dt(r)}else dt(e)},n.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(t){dt(t)}},n}(),Ce=function(n){ie(e,n);function e(t,r,i){var s=n.call(this)||this,a;if(P(t)||!t)a={next:t??void 0,error:r??void 0,complete:i??void 0};else{var o;s&&Fn.useDeprecatedNextContext?(o=Object.create(t),o.unsubscribe=function(){return s.unsubscribe()},a={next:t.next&&zt(t.next,o),error:t.error&&zt(t.error,o),complete:t.complete&&zt(t.complete,o)}):a=t}return s.destination=new li(a),s}return e}(Ut);function dt(n){Mn(n)}function di(n){throw n}var fi={closed:!0,next:$t,error:di,complete:$t},Bt=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function ft(n){return n}function hi(n){return n.length===0?ft:n.length===1?n[0]:function(t){return n.reduce(function(r,i){return i(r)},t)}}var W=function(){function n(e){e&&(this._subscribe=e)}return n.prototype.lift=function(e){var t=new n;return t.source=this,t.operator=e,t},n.prototype.subscribe=function(e,t,r){var i=this,s=mi(e)?e:new Ce(e,t,r);return lt(function(){var a=i,o=a.operator,u=a.source;s.add(o?o.call(s,u):u?i._subscribe(s):i._trySubscribe(s))}),s},n.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.error(t)}},n.prototype.forEach=function(e,t){var r=this;return t=Kn(t),new t(function(i,s){var a=new Ce({next:function(o){try{e(o)}catch(u){s(u),a.unsubscribe()}},error:s,complete:i});r.subscribe(a)})},n.prototype._subscribe=function(e){var t;return(t=this.source)===null||t===void 0?void 0:t.subscribe(e)},n.prototype[Bt]=function(){return this},n.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return hi(e)(this)},n.prototype.toPromise=function(e){var t=this;return e=Kn(e),new e(function(r,i){var s;t.subscribe(function(a){return s=a},function(a){return i(a)},function(){return r(s)})})},n.create=function(e){return new n(e)},n}();function Kn(n){var e;return(e=n??Fn.Promise)!==null&&e!==void 0?e:Promise}function pi(n){return n&&P(n.next)&&P(n.error)&&P(n.complete)}function mi(n){return n&&n instanceof Ut||pi(n)&&Bn(n)}function yi(n){return P(n==null?void 0:n.lift)}function z(n){return function(e){if(yi(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function $(n,e,t,r,i){return new vi(n,e,t,r,i)}var vi=function(n){ie(e,n);function e(t,r,i,s,a,o){var u=n.call(this,t)||this;return u.onFinalize=a,u.shouldUnsubscribe=o,u._next=r?function(c){try{r(c)}catch(l){t.error(l)}}:n.prototype._next,u._error=s?function(c){try{s(c)}catch(l){t.error(l)}finally{this.unsubscribe()}}:n.prototype._error,u._complete=i?function(){try{i()}catch(c){t.error(c)}finally{this.unsubscribe()}}:n.prototype._complete,u}return e.prototype.unsubscribe=function(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var r=this.closed;n.prototype.unsubscribe.call(this),!r&&((t=this.onFinalize)===null||t===void 0||t.call(this))}},e}(Ut),gi=qt(function(n){return function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),ye=function(n){ie(e,n);function e(){var t=n.call(this)||this;return t.closed=!1,t.currentObservers=null,t.observers=[],t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return e.prototype.lift=function(t){var r=new Hn(this,this);return r.operator=t,r},e.prototype._throwIfClosed=function(){if(this.closed)throw new gi},e.prototype.next=function(t){var r=this;lt(function(){var i,s;if(r._throwIfClosed(),!r.isStopped){r.currentObservers||(r.currentObservers=Array.from(r.observers));try{for(var a=Ee(r.currentObservers),o=a.next();!o.done;o=a.next()){var u=o.value;u.next(t)}}catch(c){i={error:c}}finally{try{o&&!o.done&&(s=a.return)&&s.call(a)}finally{if(i)throw i.error}}}})},e.prototype.error=function(t){var r=this;lt(function(){if(r._throwIfClosed(),!r.isStopped){r.hasError=r.isStopped=!0,r.thrownError=t;for(var i=r.observers;i.length;)i.shift().error(t)}})},e.prototype.complete=function(){var t=this;lt(function(){if(t._throwIfClosed(),!t.isStopped){t.isStopped=!0;for(var r=t.observers;r.length;)r.shift().complete()}})},e.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(e.prototype,"observed",{get:function(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0},enumerable:!1,configurable:!0}),e.prototype._trySubscribe=function(t){return this._throwIfClosed(),n.prototype._trySubscribe.call(this,t)},e.prototype._subscribe=function(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)},e.prototype._innerSubscribe=function(t){var r=this,i=this,s=i.hasError,a=i.isStopped,o=i.observers;return s||a?zn:(this.currentObservers=null,o.push(t),new Ae(function(){r.currentObservers=null,ct(o,t)}))},e.prototype._checkFinalizedStatuses=function(t){var r=this,i=r.hasError,s=r.thrownError,a=r.isStopped;i?t.error(s):a&&t.complete()},e.prototype.asObservable=function(){var t=new W;return t.source=this,t},e.create=function(t,r){return new Hn(t,r)},e}(W),Hn=function(n){ie(e,n);function e(t,r){var i=n.call(this)||this;return i.destination=t,i.source=r,i}return e.prototype.next=function(t){var r,i;(i=(r=this.destination)===null||r===void 0?void 0:r.next)===null||i===void 0||i.call(r,t)},e.prototype.error=function(t){var r,i;(i=(r=this.destination)===null||r===void 0?void 0:r.error)===null||i===void 0||i.call(r,t)},e.prototype.complete=function(){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.complete)===null||r===void 0||r.call(t)},e.prototype._subscribe=function(t){var r,i;return(i=(r=this.source)===null||r===void 0?void 0:r.subscribe(t))!==null&&i!==void 0?i:zn},e}(ye),Yn={now:function(){return(Yn.delegate||Date).now()},delegate:void 0},_i=function(n){ie(e,n);function e(t,r){return n.call(this)||this}return e.prototype.schedule=function(t,r){return this},e}(Ae),ht={setInterval:function(n,e){for(var t=[],r=2;r<arguments.length;r++)t[r-2]=arguments[r];var i=ht.delegate;return i!=null&&i.setInterval?i.setInterval.apply(i,me([n,e],pe(t))):setInterval.apply(void 0,me([n,e],pe(t)))},clearInterval:function(n){var e=ht.delegate;return((e==null?void 0:e.clearInterval)||clearInterval)(n)},delegate:void 0},wi=function(n){ie(e,n);function e(t,r){var i=n.call(this,t,r)||this;return i.scheduler=t,i.work=r,i.pending=!1,i}return e.prototype.schedule=function(t,r){var i;if(r===void 0&&(r=0),this.closed)return this;this.state=t;var s=this.id,a=this.scheduler;return s!=null&&(this.id=this.recycleAsyncId(a,s,r)),this.pending=!0,this.delay=r,this.id=(i=this.id)!==null&&i!==void 0?i:this.requestAsyncId(a,this.id,r),this},e.prototype.requestAsyncId=function(t,r,i){return i===void 0&&(i=0),ht.setInterval(t.flush.bind(t,this),i)},e.prototype.recycleAsyncId=function(t,r,i){if(i===void 0&&(i=0),i!=null&&this.delay===i&&this.pending===!1)return r;r!=null&&ht.clearInterval(r)},e.prototype.execute=function(t,r){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var i=this._execute(t,r);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(t,r){var i=!1,s;try{this.work(t)}catch(a){i=!0,s=a||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),s},e.prototype.unsubscribe=function(){if(!this.closed){var t=this,r=t.id,i=t.scheduler,s=i.actions;this.work=this.state=this.scheduler=null,this.pending=!1,ct(s,this),r!=null&&(this.id=this.recycleAsyncId(i,r,null)),this.delay=null,n.prototype.unsubscribe.call(this)}},e}(_i),Gn=function(){function n(e,t){t===void 0&&(t=n.now),this.schedulerActionCtor=e,this.now=t}return n.prototype.schedule=function(e,t,r){return t===void 0&&(t=0),new this.schedulerActionCtor(this,e).schedule(r,t)},n.now=Yn.now,n}(),bi=function(n){ie(e,n);function e(t,r){r===void 0&&(r=Gn.now);var i=n.call(this,t,r)||this;return i.actions=[],i._active=!1,i}return e.prototype.flush=function(t){var r=this.actions;if(this._active){r.push(t);return}var i;this._active=!0;do if(i=t.execute(t.state,t.delay))break;while(t=r.shift());if(this._active=!1,i){for(;t=r.shift();)t.unsubscribe();throw i}},e}(Gn),ki=new bi(wi),xi=ki,Jn=new W(function(n){return n.complete()});function Xn(n){return n&&P(n.schedule)}function Qn(n){return n[n.length-1]}function er(n){return Xn(Qn(n))?n.pop():void 0}function Si(n,e){return typeof Qn(n)=="number"?n.pop():e}var tr=function(n){return n&&typeof n.length=="number"&&typeof n!="function"};function nr(n){return P(n==null?void 0:n.then)}function rr(n){return P(n[Bt])}function ir(n){return Symbol.asyncIterator&&P(n==null?void 0:n[Symbol.asyncIterator])}function sr(n){return new TypeError("You provided "+(n!==null&&typeof n=="object"?"an invalid object":"'"+n+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function Ti(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var ar=Ti();function or(n){return P(n==null?void 0:n[ar])}function ur(n){return oi(this,arguments,function(){var t,r,i,s;return Un(this,function(a){switch(a.label){case 0:t=n.getReader(),a.label=1;case 1:a.trys.push([1,,9,10]),a.label=2;case 2:return[4,Ie(t.read())];case 3:return r=a.sent(),i=r.value,s=r.done,s?[4,Ie(void 0)]:[3,5];case 4:return[2,a.sent()];case 5:return[4,Ie(i)];case 6:return[4,a.sent()];case 7:return a.sent(),[3,2];case 8:return[3,10];case 9:return t.releaseLock(),[7];case 10:return[2]}})})}function cr(n){return P(n==null?void 0:n.getReader)}function B(n){if(n instanceof W)return n;if(n!=null){if(rr(n))return Ei(n);if(tr(n))return Ii(n);if(nr(n))return Ai(n);if(ir(n))return lr(n);if(or(n))return Ci(n);if(cr(n))return Ri(n)}throw sr(n)}function Ei(n){return new W(function(e){var t=n[Bt]();if(P(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function Ii(n){return new W(function(e){for(var t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function Ai(n){return new W(function(e){n.then(function(t){e.closed||(e.next(t),e.complete())},function(t){return e.error(t)}).then(null,Mn)})}function Ci(n){return new W(function(e){var t,r;try{for(var i=Ee(n),s=i.next();!s.done;s=i.next()){var a=s.value;if(e.next(a),e.closed)return}}catch(o){t={error:o}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}e.complete()})}function lr(n){return new W(function(e){Pi(n,e).catch(function(t){return e.error(t)})})}function Ri(n){return lr(ur(n))}function Pi(n,e){var t,r,i,s;return ai(this,void 0,void 0,function(){var a,o;return Un(this,function(u){switch(u.label){case 0:u.trys.push([0,5,6,11]),t=ui(n),u.label=1;case 1:return[4,t.next()];case 2:if(r=u.sent(),!!r.done)return[3,4];if(a=r.value,e.next(a),e.closed)return[2];u.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return o=u.sent(),i={error:o},[3,11];case 6:return u.trys.push([6,,9,10]),r&&!r.done&&(s=t.return)?[4,s.call(t)]:[3,8];case 7:u.sent(),u.label=8;case 8:return[3,10];case 9:if(i)throw i.error;return[7];case 10:return[7];case 11:return e.complete(),[2]}})})}function se(n,e,t,r,i){r===void 0&&(r=0),i===void 0&&(i=!1);var s=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(s),!i)return s}function dr(n,e){return e===void 0&&(e=0),z(function(t,r){t.subscribe($(r,function(i){return se(r,n,function(){return r.next(i)},e)},function(){return se(r,n,function(){return r.complete()},e)},function(i){return se(r,n,function(){return r.error(i)},e)}))})}function fr(n,e){return e===void 0&&(e=0),z(function(t,r){r.add(n.schedule(function(){return t.subscribe(r)},e))})}function Ni(n,e){return B(n).pipe(fr(e),dr(e))}function Li(n,e){return B(n).pipe(fr(e),dr(e))}function Oi(n,e){return new W(function(t){var r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function Di(n,e){return new W(function(t){var r;return se(t,e,function(){r=n[ar](),se(t,e,function(){var i,s,a;try{i=r.next(),s=i.value,a=i.done}catch(o){t.error(o);return}a?t.complete():t.next(s)},0,!0)}),function(){return P(r==null?void 0:r.return)&&r.return()}})}function hr(n,e){if(!n)throw new Error("Iterable cannot be null");return new W(function(t){se(t,e,function(){var r=n[Symbol.asyncIterator]();se(t,e,function(){r.next().then(function(i){i.done?t.complete():t.next(i.value)})},0,!0)})})}function Zi(n,e){return hr(ur(n),e)}function qi(n,e){if(n!=null){if(rr(n))return Ni(n,e);if(tr(n))return Oi(n,e);if(nr(n))return Li(n,e);if(ir(n))return hr(n,e);if(or(n))return Di(n,e);if(cr(n))return Zi(n,e)}throw sr(n)}function pr(n,e){return e?qi(n,e):B(n)}function mr(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var t=er(n);return pr(n,t)}var jt=qt(function(n){return function(){n(this),this.name="EmptyError",this.message="no elements in sequence"}});function yr(n,e){var t=typeof e=="object";return new Promise(function(r,i){var s=new Ce({next:function(a){r(a),s.unsubscribe()},error:i,complete:function(){t?r(e.defaultValue):i(new jt)}});n.subscribe(s)})}function Wi(n){return n instanceof Date&&!isNaN(n)}function ve(n,e){return z(function(t,r){var i=0;t.subscribe($(r,function(s){r.next(n.call(e,s,i++))}))})}function Vi(n,e,t,r,i,s,a,o){var u=[],c=0,l=0,p=!1,g=function(){p&&!u.length&&!c&&e.complete()},I=function(S){return c<r?C(S):u.push(S)},C=function(S){s&&e.next(S),c++;var D=!1;B(t(S,l++)).subscribe($(e,function(N){i==null||i(N),s?I(N):e.next(N)},function(){D=!0},void 0,function(){if(D)try{c--;for(var N=function(){var V=u.shift();a?se(e,a,function(){return C(V)}):C(V)};u.length&&c<r;)N();g()}catch(V){e.error(V)}}))};return n.subscribe($(e,I,function(){p=!0,g()})),function(){o==null||o()}}function vr(n,e,t){return t===void 0&&(t=1/0),P(e)?vr(function(r,i){return ve(function(s,a){return e(r,s,i,a)})(B(n(r,i)))},t):(typeof e=="number"&&(t=e),z(function(r,i){return Vi(r,i,n,t)}))}function $i(n){return n===void 0&&(n=1/0),vr(ft,n)}function gr(n,e,t){n===void 0&&(n=0),t===void 0&&(t=xi);var r=-1;return e!=null&&(Xn(e)?t=e:r=e),new W(function(i){var s=Wi(n)?+n-t.now():n;s<0&&(s=0);var a=0;return t.schedule(function(){i.closed||(i.next(a++),0<=r?this.schedule(void 0,r):i.complete())},s)})}function $e(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var t=er(n),r=Si(n,1/0),i=n;return i.length?i.length===1?B(i[0]):$i(r)(pr(i,t)):Jn}var Ui=Array.isArray;function zi(n){return n.length===1&&Ui(n[0])?n[0]:n}function ge(n,e){return z(function(t,r){var i=0;t.subscribe($(r,function(s){return n.call(e,s,i++)&&r.next(s)}))})}function Bi(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return n=zi(n),n.length===1?B(n[0]):new W(ji(n))}function ji(n){return function(e){for(var t=[],r=function(s){t.push(B(n[s]).subscribe($(e,function(a){if(t){for(var o=0;o<t.length;o++)o!==s&&t[o].unsubscribe();t=null}e.next(a)})))},i=0;t&&!e.closed&&i<n.length;i++)r(i)}}function Fi(n){return z(function(e,t){var r=!1;e.subscribe($(t,function(i){r=!0,t.next(i)},function(){r||t.next(n),t.complete()}))})}function Mi(n){return n<=0?function(){return Jn}:z(function(e,t){var r=0;e.subscribe($(t,function(i){++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Ki(n){return n===void 0&&(n=Hi),z(function(e,t){var r=!1;e.subscribe($(t,function(i){r=!0,t.next(i)},function(){return r?t.complete():t.error(n())}))})}function Hi(){return new jt}function _r(n,e){var t=arguments.length>=2;return function(r){return r.pipe(n?ge(function(i,s){return n(i,s,r)}):ft,Mi(1),t?Fi(e):Ki(function(){return new jt}))}}function Yi(n){n===void 0&&(n={});var e=n.connector,t=e===void 0?function(){return new ye}:e,r=n.resetOnError,i=r===void 0?!0:r,s=n.resetOnComplete,a=s===void 0?!0:s,o=n.resetOnRefCountZero,u=o===void 0?!0:o;return function(c){var l,p,g,I=0,C=!1,S=!1,D=function(){p==null||p.unsubscribe(),p=void 0},N=function(){D(),l=g=void 0,C=S=!1},V=function(){var k=l;N(),k==null||k.unsubscribe()};return z(function(k,F){I++,!S&&!C&&D();var J=g=g??t();F.add(function(){I--,I===0&&!S&&!C&&(p=Ft(V,u))}),J.subscribe(F),!l&&I>0&&(l=new Ce({next:function(X){return J.next(X)},error:function(X){S=!0,D(),p=Ft(N,i,X),J.error(X)},complete:function(){C=!0,D(),p=Ft(N,a),J.complete()}}),B(k).subscribe(l))})(c)}}function Ft(n,e){for(var t=[],r=2;r<arguments.length;r++)t[r-2]=arguments[r];if(e===!0){n();return}if(e!==!1){var i=new Ce({next:function(){i.unsubscribe(),n()}});return B(e.apply(void 0,me([],pe(t)))).subscribe(i)}}function Gi(n,e){return z(function(t,r){var i=null,s=0,a=!1,o=function(){return a&&!i&&r.complete()};t.subscribe($(r,function(u){i==null||i.unsubscribe();var c=0,l=s++;B(n(u,l)).subscribe(i=$(r,function(p){return r.next(e?e(u,p,l,c++):p)},function(){i=null,o()}))},function(){a=!0,o()}))})}function Ji(n){return z(function(e,t){B(n).subscribe($(t,function(){return t.complete()},$t)),!t.closed&&e.subscribe(t)})}function Re(n,e,t){var r=P(n)||e||t?{next:n,error:e,complete:t}:n;return r?z(function(i,s){var a;(a=r.subscribe)===null||a===void 0||a.call(r);var o=!0;i.subscribe($(s,function(u){var c;(c=r.next)===null||c===void 0||c.call(r,u),s.next(u)},function(){var u;o=!1,(u=r.complete)===null||u===void 0||u.call(r),s.complete()},function(u){var c;o=!1,(c=r.error)===null||c===void 0||c.call(r,u),s.error(u)},function(){var u,c;o&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(c=r.finalize)===null||c===void 0||c.call(r)}))}):ft}const Xi=()=>({outgoingMessageSubject:new ye,incomingMessageSubject:new ye,responseSubject:new ye,messageLifeCycleEventSubject:new ye}),Qi=n=>M.fromPromise(yr(n),Vn).andThen(e=>e),wr={extensionDetectionTime:100},es=n=>{const e=n==null?void 0:n.logger,t=(n==null?void 0:n.subjects)??Xi(),r=new Ae;r.add(t.incomingMessageSubject.pipe(Re(o=>{"eventType"in o?(e==null||e.debug(" messageLifecycleEvent",o),t.messageLifeCycleEventSubject.next(o)):(e==null||e.debug(" walletResponse",o),t.responseSubject.next(o))})).subscribe()),r.add(t.outgoingMessageSubject.pipe(Re(o=>{e==null||e.debug(" walletRequest",o),window.dispatchEvent(new CustomEvent(We.outgoingMessage,{detail:o}))})).subscribe());const i=o=>{const u=o.detail;t.incomingMessageSubject.next(u)};addEventListener(We.incomingMessage,i);const s=(o,u)=>{const c=new ye,l=t.responseSubject.pipe(ge(k=>k.interactionId===o.interactionId),ve(k=>k.discriminator==="success"?K(k):U(k))),p=t.messageLifeCycleEventSubject.pipe(ge(({interactionId:k,eventType:F})=>o.interactionId===k&&["requestCancelSuccess","requestCancelFail"].includes(F)),ve(k=>{const F=Te("canceledByUser",k.interactionId);return e==null||e.debug(" walletRequestCanceled",F),k})),g=()=>(t.outgoingMessageSubject.next({interactionId:o.interactionId,items:{discriminator:"cancelRequest"},metadata:o.metadata}),setTimeout(()=>{c.next(U(Te("canceledByUser",o.interactionId)))}),M.fromSafePromise(yr($e(l.pipe(ve(()=>"requestCancelFail")),p.pipe(ve(({eventType:k})=>k))))));u.requestControl&&u.requestControl({cancelRequest:()=>g().andThen(k=>k==="requestCancelSuccess"?K("requestCancelSuccess"):U("requestCancelFail")),getRequest:()=>o});const I=$e(l,c).pipe(_r()),C=t.messageLifeCycleEventSubject.pipe(ge(({interactionId:k})=>o.interactionId===k),Re(k=>{u.eventCallback&&u.eventCallback(k.eventType)}),Ji(l),Yi()),S=C.subscribe(),D=gr(wr.extensionDetectionTime).pipe(ve(()=>U(Te("missingExtension",o.interactionId)))),N=$e(D,C).pipe(_r(),ge(k=>!("eventType"in k))),V=mr(o).pipe(Re(k=>{t.outgoingMessageSubject.next(k)}),ge(k=>!1));return Qi($e(I,N,V).pipe(Re(()=>{S.unsubscribe()})))},a=t.messageLifeCycleEventSubject.pipe(ge(o=>o.eventType==="extensionStatus"));return{send:s,destroy:()=>{r.unsubscribe(),removeEventListener(We.incomingMessage,i)},openPopup:()=>{window.dispatchEvent(new CustomEvent(We.outgoingMessage,{detail:{discriminator:"openPopup"}}))},extensionStatus$:mr(!0).pipe(Re(()=>{t.outgoingMessageSubject.next({interactionId:crypto.randomUUID(),discriminator:"extensionStatus"})}),Gi(()=>Bi(a,$e(a,gr(wr.extensionDetectionTime).pipe(ve(()=>({eventType:"extensionStatus",isWalletLinked:!1,isExtensionAvailable:!1})))))))}},Mt={reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29],black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39],bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]};function Kt(n,e,t,r=!1){const i=String(e),s=(o,u)=>`\x1B[${u[0]}m${o}\x1B[${u[1]}m`,a=(o,u)=>u!=null&&typeof u=="string"?s(o,Mt[u]):u!=null&&Array.isArray(u)?u.reduce((c,l)=>a(c,l),o):u!=null&&u[o.trim()]!=null?a(o,u[o.trim()]):u!=null&&u["*"]!=null?a(o,u["*"]):o;return i.replace(/{{(.+?)}}/g,(o,u)=>{var l;const c=t[u]!=null?t[u]:r?"":o;return n.stylePrettyLogs?a(c,(l=n==null?void 0:n.prettyLogStyles)==null?void 0:l[u])+s("",Mt.reset):c})}function br(n){const e=new Set;return JSON.stringify(n,(t,r)=>{if(typeof r=="object"&&r!==null){if(e.has(r))return"[Circular]";e.add(r)}return r})}function L(n,e){const t={seen:[],stylize:kr};return e!=null&&Ir(t,e),Pe(t.showHidden)&&(t.showHidden=!1),Pe(t.depth)&&(t.depth=2),Pe(t.colors)&&(t.colors=!0),Pe(t.customInspect)&&(t.customInspect=!0),t.colors&&(t.stylize=ns),yt(t,n,t.depth)}L.colors=Mt,L.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function ts(n){return typeof n=="boolean"}function Pe(n){return n==null}function kr(n){return n}function ns(n,e){var r,i,s,a;const t=L.styles[e];return t!=null&&((i=(r=L==null?void 0:L.colors)==null?void 0:r[t])==null?void 0:i[0])!=null&&((a=(s=L==null?void 0:L.colors)==null?void 0:s[t])==null?void 0:a[1])!=null?"\x1B["+L.colors[t][0]+"m"+n+"\x1B["+L.colors[t][1]+"m":n}function pt(n){return typeof n=="function"}function xr(n){return typeof n=="string"}function rs(n){return typeof n=="number"}function Sr(n){return n===null}function Tr(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function Ht(n){return mt(n)&&Gt(n)==="[object RegExp]"}function mt(n){return typeof n=="object"&&n!==null}function Yt(n){return mt(n)&&(Gt(n)==="[object Error]"||n instanceof Error)}function Er(n){return mt(n)&&Gt(n)==="[object Date]"}function Gt(n){return Object.prototype.toString.call(n)}function is(n){const e={};return n.forEach(t=>{e[t]=!0}),e}function ss(n,e,t,r,i){const s=[];for(let a=0,o=e.length;a<o;++a)Tr(e,String(a))?s.push(Xt(n,e,t,r,String(a),!0)):s.push("");return i.forEach(a=>{a.match(/^\d+$/)||s.push(Xt(n,e,t,r,a,!0))}),s}function Jt(n){return"["+Error.prototype.toString.call(n)+"]"}function yt(n,e,t=0){if(n.customInspect&&e!=null&&pt(e)&&(e==null?void 0:e.inspect)!==L&&!(e!=null&&e.constructor&&(e==null?void 0:e.constructor.prototype)===e)){if(typeof e.inspect!="function"&&e.toString!=null)return e.toString();let l=e==null?void 0:e.inspect(t,n);return xr(l)||(l=yt(n,l,t)),l}const r=ae(n,e);if(r)return r;let i=Object.keys(e);const s=is(i);try{n.showHidden&&Object.getOwnPropertyNames&&(i=Object.getOwnPropertyNames(e))}catch{}if(Yt(e)&&(i.indexOf("message")>=0||i.indexOf("description")>=0))return Jt(e);if(i.length===0)if(pt(n.stylize)){if(pt(e)){const l=e.name?": "+e.name:"";return n.stylize("[Function"+l+"]","special")}if(Ht(e))return n.stylize(RegExp.prototype.toString.call(e),"regexp");if(Er(e))return n.stylize(Date.prototype.toString.call(e),"date");if(Yt(e))return Jt(e)}else return e;let a="",o=!1,u=[`{
`,`
}`];if(Array.isArray(e)&&(o=!0,u=[`[
`,`
]`]),pt(e)&&(a=" [Function"+(e.name?": "+e.name:"")+"]"),Ht(e)&&(a=" "+RegExp.prototype.toString.call(e)),Er(e)&&(a=" "+Date.prototype.toUTCString.call(e)),Yt(e)&&(a=" "+Jt(e)),i.length===0&&(!o||e.length==0))return u[0]+a+u[1];if(t<0)return Ht(e)?n.stylize(RegExp.prototype.toString.call(e),"regexp"):n.stylize("[Object]","special");n.seen.push(e);let c;return o?c=ss(n,e,t,s,i):c=i.map(l=>Xt(n,e,t,s,l,o)),n.seen.pop(),as(c,a,u)}function Xt(n,e,t,r,i,s){let a,o,u;u={value:void 0};try{u.value=e[i]}catch{}try{Object.getOwnPropertyDescriptor&&(u=Object.getOwnPropertyDescriptor(e,i)||u)}catch{}if(u.get?u.set?o=n.stylize("[Getter/Setter]","special"):o=n.stylize("[Getter]","special"):u.set&&(o=n.stylize("[Setter]","special")),Tr(r,i)||(a="["+i+"]"),o||(n.seen.indexOf(u.value)<0?(Sr(t)?o=yt(n,u.value,void 0):o=yt(n,u.value,t-1),o.indexOf(`
`)>-1&&(s?o=o.split(`
`).map(c=>"  "+c).join(`
`).substr(2):o=`
`+o.split(`
`).map(c=>"   "+c).join(`
`))):o=n.stylize("[Circular]","special")),Pe(a)){if(s&&i.match(/^\d+$/))return o;a=JSON.stringify(""+i),a.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=n.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,"\\'").replace(/(^"|"$)/g,"'"),a=n.stylize(a,"string"))}return a+": "+o}function ae(n,e){if(Pe(e))return n.stylize("undefined","undefined");if(xr(e)){const t="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,"\\'")+"'";return n.stylize(t,"string")}if(rs(e))return n.stylize(""+e,"number");if(ts(e))return n.stylize(""+e,"boolean");if(Sr(e))return n.stylize("null","null")}function as(n,e,t){return t[0]+(e===""?"":e+`
`)+"  "+n.join(`,
  `)+" "+t[1]}function Ir(n,e){if(!e||!mt(e))return n;const t=Object.keys(e);let r=t.length;for(;r--;)n[t[r]]=e[t[r]];return n}function os(n,...e){const t={seen:[],stylize:kr};n!=null&&Ir(t,n);const r=e[0];let i=0,s="",a="";if(typeof r=="string"){if(e.length===1)return r;let o,u=0;for(let c=0;c<r.length-1;c++)if(r.charCodeAt(c)===37){const l=r.charCodeAt(++c);if(i+1!==e.length){switch(l){case 115:{const p=e[++i];typeof p=="number"||typeof p=="bigint"?o=ae(t,p):typeof p!="object"||p===null?o=String(p):o=L(p,{...n,compact:3,colors:!1,depth:0});break}case 106:o=br(e[++i]);break;case 100:{const p=e[++i];typeof p=="bigint"?o=ae(t,p):typeof p=="symbol"?o="NaN":o=ae(t,p);break}case 79:o=L(e[++i],n);break;case 111:o=L(e[++i],{...n,showHidden:!0,showProxy:!0,depth:4});break;case 105:{const p=e[++i];typeof p=="bigint"?o=ae(t,p):typeof p=="symbol"?o="NaN":o=ae(t,parseInt(o));break}case 102:{const p=e[++i];typeof p=="symbol"?o="NaN":o=ae(t,parseInt(p));break}case 99:i+=1,o="";break;case 37:s+=r.slice(u,c),u=c+1;continue;default:continue}u!==c-1&&(s+=r.slice(u,c-1)),s+=o,u=c+1}else l===37&&(s+=r.slice(u,c),u=c+1)}u!==0&&(i++,a=" ",u<r.length&&(s+=r.slice(u)))}for(;i<e.length;){const o=e[i];s+=a,s+=typeof o!="string"?L(o,n):o,a=" ",i++}return s}const us={runtime:[typeof window,typeof document].includes("undefined")?"Generic":"Browser",browser:(Rr=globalThis==null?void 0:globalThis.navigator)==null?void 0:Rr.userAgent},cs=/(?:(?:file|https?|global code|[^@]+)@)?(?:file:)?((?:\/[^:/]+){2,})(?::(\d+))?(?::(\d+))?/;function ls(n,e,t,r,i,s){return Object.assign({},us,{name:i,parentNames:s,date:new Date,logLevelId:n,logLevelName:e,path:r?void 0:ds(t)})}function ds(n,e=Error()){var t,r,i;return Cr((i=(r=(t=e==null?void 0:e.stack)==null?void 0:t.split(`
`))==null?void 0:r.filter(s=>!s.includes("Error: ")))==null?void 0:i[n])}function Ar(n){var e,t,r;return(r=(t=(e=n==null?void 0:n.stack)==null?void 0:e.split(`
`))==null?void 0:t.filter(i=>!i.includes("Error: ")))==null?void 0:r.reduce((i,s)=>(i.push(Cr(s)),i),[])}function Cr(n){const e=globalThis.location.origin,t={fullFilePath:void 0,fileName:void 0,fileNameWithLine:void 0,fileColumn:void 0,fileLine:void 0,filePath:void 0,filePathWithLine:void 0,method:void 0};if(n!=null){const r=n.match(cs);if(r){t.filePath=r[1].replace(/\?.*$/,""),t.fullFilePath=`${e}${t.filePath}`;const i=t.filePath.split("/");t.fileName=i[i.length-1],t.fileLine=r[2],t.fileColumn=r[3],t.filePathWithLine=`${t.filePath}:${t.fileLine}`,t.fileNameWithLine=`${t.fileName}:${t.fileLine}`}}return t}function Qt(n){return n instanceof Error}function fs(n,e){return n.reduce((t,r)=>(Qt(r)?t.errors.push(hs(r,e)):t.args.push(r),t),{args:[],errors:[]})}function hs(n,e){const t=Ar(n).map(i=>Kt(e,e.prettyErrorStackTemplate,{...i},!0)),r={errorName:` ${n.name} `,errorMessage:n.message,errorStack:t.join(`
`)};return Kt(e,e.prettyErrorTemplate,r)}function ps(n,e,t,r){const i=(t.length>0&&e.length>0?`
`:"")+t.join(`
`);r.prettyInspectOptions.colors=r.stylePrettyLogs,console.log(n+os(r.prettyInspectOptions,...e)+i)}function ms(n){console.log(br(n))}function ws(n){}function j(n,e=2,t=0){return n!=null&&isNaN(n)?"":(n=n!=null?n+t:n,e===2?n==null?"--":n<10?"0"+n:n.toString():n==null?"---":n<10?"00"+n:n<100?"0"+n:n.toString())}class ys{constructor(e,t,r=4){var u,c,l,p,g,I,C;this.logObj=t,this.stackDepthLevel=r;const i=![typeof window,typeof document].includes("undefined"),s=Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]";this.runtime=i?"browser":s?"nodejs":"unknown";const a=i?(((window==null?void 0:window.chrome)||window.Intl&&(Intl==null?void 0:Intl.v8BreakIterator))&&"CSS"in window)!=null:!1,o=i?/^((?!chrome|android).)*safari/i.test(navigator==null?void 0:navigator.userAgent):!1;this.stackDepthLevel=o?4:this.stackDepthLevel,this.settings={type:(e==null?void 0:e.type)??"pretty",name:e==null?void 0:e.name,parentNames:e==null?void 0:e.parentNames,minLevel:(e==null?void 0:e.minLevel)??0,argumentsArrayName:e==null?void 0:e.argumentsArrayName,hideLogPositionForProduction:(e==null?void 0:e.hideLogPositionForProduction)??!1,prettyLogTemplate:(e==null?void 0:e.prettyLogTemplate)??"{{yyyy}}.{{mm}}.{{dd}} {{hh}}:{{MM}}:{{ss}}:{{ms}}	{{logLevelName}}	{{filePathWithLine}}{{nameWithDelimiterPrefix}}	",prettyErrorTemplate:(e==null?void 0:e.prettyErrorTemplate)??`
{{errorName}} {{errorMessage}}
error stack:
{{errorStack}}`,prettyErrorStackTemplate:(e==null?void 0:e.prettyErrorStackTemplate)??`   {{fileName}}	{{method}}
	{{filePathWithLine}}`,prettyErrorParentNamesSeparator:(e==null?void 0:e.prettyErrorParentNamesSeparator)??":",prettyErrorLoggerNameDelimiter:(e==null?void 0:e.prettyErrorLoggerNameDelimiter)??"	",stylePrettyLogs:(e==null?void 0:e.stylePrettyLogs)??!0,prettyLogTimeZone:(e==null?void 0:e.prettyLogTimeZone)??"UTC",prettyLogStyles:(e==null?void 0:e.prettyLogStyles)??{logLevelName:{"*":["bold","black","bgWhiteBright","dim"],SILLY:["bold","white"],TRACE:["bold","whiteBright"],DEBUG:["bold","green"],INFO:["bold","blue"],WARN:["bold","yellow"],ERROR:["bold","red"],FATAL:["bold","redBright"]},dateIsoStr:"white",filePathWithLine:"white",name:["white","bold"],nameWithDelimiterPrefix:["white","bold"],nameWithDelimiterSuffix:["white","bold"],errorName:["bold","bgRedBright","whiteBright"],fileName:["yellow"],fileNameWithLine:"white"},prettyInspectOptions:(e==null?void 0:e.prettyInspectOptions)??{colors:!0,compact:!1,depth:1/0},metaProperty:(e==null?void 0:e.metaProperty)??"_meta",maskPlaceholder:(e==null?void 0:e.maskPlaceholder)??"[***]",maskValuesOfKeys:(e==null?void 0:e.maskValuesOfKeys)??["password"],maskValuesOfKeysCaseInsensitive:(e==null?void 0:e.maskValuesOfKeysCaseInsensitive)??!1,maskValuesRegEx:e==null?void 0:e.maskValuesRegEx,prefix:[...(e==null?void 0:e.prefix)??[]],attachedTransports:[...(e==null?void 0:e.attachedTransports)??[]],overwrite:{mask:(u=e==null?void 0:e.overwrite)==null?void 0:u.mask,toLogObj:(c=e==null?void 0:e.overwrite)==null?void 0:c.toLogObj,addMeta:(l=e==null?void 0:e.overwrite)==null?void 0:l.addMeta,formatMeta:(p=e==null?void 0:e.overwrite)==null?void 0:p.formatMeta,formatLogObj:(g=e==null?void 0:e.overwrite)==null?void 0:g.formatLogObj,transportFormatted:(I=e==null?void 0:e.overwrite)==null?void 0:I.transportFormatted,transportJSON:(C=e==null?void 0:e.overwrite)==null?void 0:C.transportJSON}},this.settings.stylePrettyLogs=this.settings.stylePrettyLogs&&i&&!a?!1:this.settings.stylePrettyLogs}log(e,t,...r){var p,g,I,C,S,D,N,V,k,F,J,X,Ue,ze;if(e<this.settings.minLevel)return;const i=[...this.settings.prefix,...r],s=((p=this.settings.overwrite)==null?void 0:p.mask)!=null?(g=this.settings.overwrite)==null?void 0:g.mask(i):this.settings.maskValuesOfKeys!=null&&this.settings.maskValuesOfKeys.length>0?this._mask(i):i,a=this.logObj!=null?this._recursiveCloneAndExecuteFunctions(this.logObj):void 0,o=((I=this.settings.overwrite)==null?void 0:I.toLogObj)!=null?(C=this.settings.overwrite)==null?void 0:C.toLogObj(s,a):this._toLogObj(s,a),u=((S=this.settings.overwrite)==null?void 0:S.addMeta)!=null?(D=this.settings.overwrite)==null?void 0:D.addMeta(o,e,t):this._addMetaToLogObj(o,e,t);let c,l;return((N=this.settings.overwrite)==null?void 0:N.formatMeta)!=null&&(c=(V=this.settings.overwrite)==null?void 0:V.formatMeta(u==null?void 0:u[this.settings.metaProperty])),((k=this.settings.overwrite)==null?void 0:k.formatLogObj)!=null&&(l=(F=this.settings.overwrite)==null?void 0:F.formatLogObj(s,this.settings)),this.settings.type==="pretty"&&(c=c??this._prettyFormatLogObjMeta(u==null?void 0:u[this.settings.metaProperty]),l=l??fs(s,this.settings)),c!=null&&l!=null?((J=this.settings.overwrite)==null?void 0:J.transportFormatted)!=null?(X=this.settings.overwrite)==null||X.transportFormatted(c,l.args,l.errors,this.settings):ps(c,l.args,l.errors,this.settings):((Ue=this.settings.overwrite)==null?void 0:Ue.transportJSON)!=null?(ze=this.settings.overwrite)==null||ze.transportJSON(u):this.settings.type!=="hidden"&&ms(u),this.settings.attachedTransports!=null&&this.settings.attachedTransports.length>0&&this.settings.attachedTransports.forEach(vt=>{vt(u)}),u}attachTransport(e){this.settings.attachedTransports.push(e)}getSubLogger(e,t){var s,a,o;const r={...this.settings,...e,parentNames:((s=this.settings)==null?void 0:s.parentNames)!=null&&((a=this.settings)==null?void 0:a.name)!=null?[...this.settings.parentNames,this.settings.name]:((o=this.settings)==null?void 0:o.name)!=null?[this.settings.name]:void 0,prefix:[...this.settings.prefix,...(e==null?void 0:e.prefix)??[]]};return new this.constructor(r,t??this.logObj,this.stackDepthLevel)}_mask(e){const t=this.settings.maskValuesOfKeysCaseInsensitive!==!0?this.settings.maskValuesOfKeys:this.settings.maskValuesOfKeys.map(r=>r.toLowerCase());return e==null?void 0:e.map(r=>this._recursiveCloneAndMaskValuesOfKeys(r,t))}_recursiveCloneAndMaskValuesOfKeys(e,t,r=[]){return r.includes(e)?{...e}:(typeof e=="object"&&e!=null&&r.push(e),void 0?e:e instanceof Map?new Map(e):e instanceof Set?new Set(e):Array.isArray(e)?e.map(i=>this._recursiveCloneAndMaskValuesOfKeys(i,t,r)):e instanceof Date?new Date(e.getTime()):Qt(e)?Object.getOwnPropertyNames(e).reduce((i,s)=>{var a;return i[s]=t.includes(((a=this.settings)==null?void 0:a.maskValuesOfKeysCaseInsensitive)!==!0?s:s.toLowerCase())?this.settings.maskPlaceholder:this._recursiveCloneAndMaskValuesOfKeys(e[s],t,r),i},this._cloneError(e)):e!=null&&typeof e=="object"?Object.getOwnPropertyNames(e).reduce((i,s)=>{var a;return i[s]=t.includes(((a=this.settings)==null?void 0:a.maskValuesOfKeysCaseInsensitive)!==!0?s:s.toLowerCase())?this.settings.maskPlaceholder:this._recursiveCloneAndMaskValuesOfKeys(e[s],t,r),i},Object.create(Object.getPrototypeOf(e))):(i=>{var s,a;return(a=(s=this.settings)==null?void 0:s.maskValuesRegEx)==null||a.forEach(o=>{var u;i=(u=i==null?void 0:i.toString())==null?void 0:u.replace(o,this.settings.maskPlaceholder)}),i})(e))}_recursiveCloneAndExecuteFunctions(e,t=[]){return t.includes(e)?{...e}:(typeof e=="object"&&t.push(e),Array.isArray(e)?e.map(r=>this._recursiveCloneAndExecuteFunctions(r,t)):e instanceof Date?new Date(e.getTime()):e&&typeof e=="object"?Object.getOwnPropertyNames(e).reduce((r,i)=>(Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(e,i)),r[i]=typeof e[i]=="function"?e[i]():this._recursiveCloneAndExecuteFunctions(e[i],t),r),Object.create(Object.getPrototypeOf(e))):e)}_toLogObj(e,t={}){return e=e==null?void 0:e.map(r=>Qt(r)?this._toErrorObject(r):r),this.settings.argumentsArrayName==null?e.length===1&&!Array.isArray(e[0])&&(e[0],void 0)!==!0&&!(e[0]instanceof Date)?t=typeof e[0]=="object"&&e[0]!=null?{...e[0],...t}:{0:e[0],...t}:t={...t,...e}:t={...t,[this.settings.argumentsArrayName]:e},t}_cloneError(e){const t=e.constructor,r=new t(e.message);Object.assign(r,e);const i=Object.getOwnPropertyNames(r);for(const s of i){const a=Object.getOwnPropertyDescriptor(r,s);a&&(a.writable=!0,Object.defineProperty(r,s,a))}return r}_toErrorObject(e){return{nativeError:e,name:e.name??"Error",message:e.message,stack:Ar(e)}}_addMetaToLogObj(e,t,r){return{...e,[this.settings.metaProperty]:ls(t,r,this.stackDepthLevel,this.settings.hideLogPositionForProduction,this.settings.name,this.settings.parentNames)}}_prettyFormatLogObjMeta(e){var a,o,u,c,l,p,g,I,C,S,D,N,V,k,F,J,X,Ue,ze,vt;if(e==null)return"";let t=this.settings.prettyLogTemplate;const r={};t.includes("{{yyyy}}.{{mm}}.{{dd}} {{hh}}:{{MM}}:{{ss}}:{{ms}}")?t=t.replace("{{yyyy}}.{{mm}}.{{dd}} {{hh}}:{{MM}}:{{ss}}:{{ms}}","{{dateIsoStr}}"):this.settings.prettyLogTimeZone==="UTC"?(r.yyyy=((a=e==null?void 0:e.date)==null?void 0:a.getUTCFullYear())??"----",r.mm=j((o=e==null?void 0:e.date)==null?void 0:o.getUTCMonth(),2,1),r.dd=j((u=e==null?void 0:e.date)==null?void 0:u.getUTCDate(),2),r.hh=j((c=e==null?void 0:e.date)==null?void 0:c.getUTCHours(),2),r.MM=j((l=e==null?void 0:e.date)==null?void 0:l.getUTCMinutes(),2),r.ss=j((p=e==null?void 0:e.date)==null?void 0:p.getUTCSeconds(),2),r.ms=j((g=e==null?void 0:e.date)==null?void 0:g.getUTCMilliseconds(),3)):(r.yyyy=((I=e==null?void 0:e.date)==null?void 0:I.getFullYear())??"----",r.mm=j((C=e==null?void 0:e.date)==null?void 0:C.getMonth(),2,1),r.dd=j((S=e==null?void 0:e.date)==null?void 0:S.getDate(),2),r.hh=j((D=e==null?void 0:e.date)==null?void 0:D.getHours(),2),r.MM=j((N=e==null?void 0:e.date)==null?void 0:N.getMinutes(),2),r.ss=j((V=e==null?void 0:e.date)==null?void 0:V.getSeconds(),2),r.ms=j((k=e==null?void 0:e.date)==null?void 0:k.getMilliseconds(),3));const i=this.settings.prettyLogTimeZone==="UTC"?e==null?void 0:e.date:new Date(((F=e==null?void 0:e.date)==null?void 0:F.getTime())-((J=e==null?void 0:e.date)==null?void 0:J.getTimezoneOffset())*6e4);r.rawIsoStr=i==null?void 0:i.toISOString(),r.dateIsoStr=i==null?void 0:i.toISOString().replace("T"," ").replace("Z",""),r.logLevelName=e==null?void 0:e.logLevelName,r.fileNameWithLine=((X=e==null?void 0:e.path)==null?void 0:X.fileNameWithLine)??"",r.filePathWithLine=((Ue=e==null?void 0:e.path)==null?void 0:Ue.filePathWithLine)??"",r.fullFilePath=((ze=e==null?void 0:e.path)==null?void 0:ze.fullFilePath)??"";let s=(vt=this.settings.parentNames)==null?void 0:vt.join(this.settings.prettyErrorParentNamesSeparator);return s=s!=null&&(e==null?void 0:e.name)!=null?s+this.settings.prettyErrorParentNamesSeparator:void 0,r.name=(e==null?void 0:e.name)!=null||s!=null?(s??"")+(e==null?void 0:e.name):"",r.nameWithDelimiterPrefix=r.name.length>0?this.settings.prettyErrorLoggerNameDelimiter+r.name:"",r.nameWithDelimiterSuffix=r.name.length>0?r.name+this.settings.prettyErrorLoggerNameDelimiter:"",Kt(this.settings,t,r)}}class vs extends ys{constructor(e,t){super(e,t,5)}log(e,t,...r){return super.log(e,t,...r)}silly(...e){return super.log(0,"SILLY",...e)}trace(...e){return super.log(1,"TRACE",...e)}debug(...e){return super.log(2,"DEBUG",...e)}info(...e){return super.log(3,"INFO",...e)}warn(...e){return super.log(4,"WARN",...e)}error(...e){return super.log(5,"ERROR",...e)}fatal(...e){return super.log(6,"FATAL",...e)}getSubLogger(e,t){return super.getSubLogger(e,t)}}const gs=n=>new vs({minLevel:n,prettyLogTemplate:"{{hh}}:{{MM}}:{{ss}}:{{ms}}	{{logLevelName}}	"}),_s=n=>{var i,s;const e={version:2,dAppDefinitionAddress:n.dAppDefinitionAddress,networkId:n.networkId};Ot.parse(e),(i=n.logger)==null||i.debug(" walletSdkInstantiated",e);const t=n.logger,r=((s=n.providers)==null?void 0:s.connectorExtensionClient)??es({logger:t});return{...si({version:2,logger:n.logger,dAppDefinitionAddress:n.dAppDefinitionAddress,networkId:n.networkId},r),destroy:()=>{t==null||t.debug(" walletSdkInstantiatedDestroyed"),r.destroy()}}};m.Account=ln,m.AccountProof=dn,m.AccountsRequestItem=st,m.AccountsRequestResponseItem=at,m.AuthLoginRequestItem=_n,m.AuthLoginRequestResponseItem=Pn,m.AuthLoginWithChallengeRequestItem=gn,m.AuthLoginWithChallengeRequestResponseItem=Rn,m.AuthLoginWithoutChallengeRequestItem=vn,m.AuthLoginWithoutChallengeRequestResponseItem=Cn,m.AuthRequestItem=wn,m.AuthRequestResponseItem=Nn,m.AuthUsePersonaRequestItem=yn,m.CancelRequest=En,m.ExtensionInteraction=ei,m.LoginRequestResponseItem=Yr,m.MessageLifeCycleEvent=qn,m.MessageLifeCycleExtensionStatusEvent=ti,m.Metadata=Ot,m.NumberOfValues=it,m.Persona=qe,m.PersonaDataName=hn,m.PersonaDataNameVariant=fn,m.PersonaDataRequestItem=ot,m.PersonaDataRequestResponseItem=ut,m.Proof=rt,m.ResetRequestItem=pn,m.SendTransactionItem=xn,m.SendTransactionResponseItem=Tn,m.WalletAuthorizedRequestItems=bn,m.WalletAuthorizedRequestResponseItems=Ln,m.WalletInteraction=An,m.WalletInteractionFailureResponse=Zn,m.WalletInteractionItems=In,m.WalletInteractionResponse=Dt,m.WalletInteractionSuccessResponse=Dn,m.WalletRequestItems=kn,m.WalletRequestResponseItems=On,m.WalletSdk=_s,m.WalletTransactionItems=Sn,m.WalletUnauthorizedRequestItems=mn,m.createLogger=gs,m.createSdkError=Te,m.errorType=Ve,m.eventType=We,m.messageLifeCycleEventType=he,m.personaDataFullNameVariant=Lt,m.sdkError=Vn,m.walletInteractionFactoryV2=ri,Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})});
